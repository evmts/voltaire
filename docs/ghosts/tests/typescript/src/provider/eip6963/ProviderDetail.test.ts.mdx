---
title: '[TS/JS] src/provider/eip6963/ProviderDetail.test.ts'
source: 'src/provider/eip6963/ProviderDetail.test.ts'
---

> Auto-generated from test file: src/provider/eip6963/ProviderDetail.test.ts

```typescript
import { describe, expect, it } from "vitest";
import { brand } from "../../brand.js";
import {
	InvalidProviderError,
	InvalidUuidError,
	MissingFieldError,
} from "./errors.js";
import { ProviderDetail } from "./ProviderDetail.js";

const validInfo = {
	uuid: "350670db-19fa-4704-a166-e52e178b59d2",
	name: "Test Wallet",
	icon: "data:image/svg+xml;base64,PHN2Zz4=",
	rdns: "com.test.wallet",
};

const mockProvider = {
	request: async () => {},
};

describe("ProviderDetail", () => {
	it("creates a valid ProviderDetail from valid input", () => {
		const detail = ProviderDetail({ info: validInfo, provider: mockProvider });
		expect(detail.info.uuid).toBe(validInfo.uuid);
		expect(detail.info.name).toBe(validInfo.name);
		expect(detail.provider).toBe(mockProvider);
	});

	it("returns frozen object", () => {
		const detail = ProviderDetail({ info: validInfo, provider: mockProvider });
		expect(Object.isFrozen(detail)).toBe(true);
	});

	it("has correct brand", () => {
		const detail = ProviderDetail({ info: validInfo, provider: mockProvider });
		// biome-ignore lint/suspicious/noExplicitAny: testing brand access
		expect((detail as any)[brand]).toBe("ProviderDetail");
	});

	it("info is also frozen", () => {
		const detail = ProviderDetail({ info: validInfo, provider: mockProvider });
		expect(Object.isFrozen(detail.info)).toBe(true);
	});

	it("info has correct brand", () => {
		const detail = ProviderDetail({ info: validInfo, provider: mockProvider });
		// biome-ignore lint/suspicious/noExplicitAny: testing brand access
		expect((detail.info as any)[brand]).toBe("ProviderInfo");
	});

	describe("info validation", () => {
		it("throws MissingFieldError when info is missing", () => {
			expect(() =>
				// biome-ignore lint/suspicious/noExplicitAny: testing invalid input
				ProviderDetail({ info: undefined as any, provider: mockProvider }),
			).toThrow(MissingFieldError);
		});

		it("validates info fields", () => {
			const badInfo = { ...validInfo, uuid: "bad-uuid" };
			expect(() =>
				ProviderDetail({ info: badInfo, provider: mockProvider }),
			).toThrow(InvalidUuidError);
		});
	});

	describe("provider validation", () => {
		it("throws MissingFieldError when provider is missing", () => {
			expect(() =>
				// biome-ignore lint/suspicious/noExplicitAny: testing invalid input
				ProviderDetail({ info: validInfo, provider: undefined as any }),
			).toThrow(MissingFieldError);
		});

		it("throws InvalidProviderError when provider.request is not function", () => {
			expect(() =>
				// biome-ignore lint/suspicious/noExplicitAny: testing invalid input
				ProviderDetail({ info: validInfo, provider: {} as any }),
			).toThrow(InvalidProviderError);
		});

		it("accepts provider with request method", () => {
			const detail = ProviderDetail({
				info: validInfo,
				provider: mockProvider,
			});
			expect(detail.provider.request).toBe(mockProvider.request);
		});
	});
});

```
