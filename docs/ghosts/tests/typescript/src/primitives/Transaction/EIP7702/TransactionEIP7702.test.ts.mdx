---
title: '[TS/JS] src/primitives/Transaction/EIP7702/TransactionEIP7702.test.ts'
source: 'src/primitives/Transaction/EIP7702/TransactionEIP7702.test.ts'
---

> Auto-generated from test file: src/primitives/Transaction/EIP7702/TransactionEIP7702.test.ts

```typescript
import { describe, expect, it } from "vitest";
import { Address } from "../../Address/index.js";
import { InvalidRangeError } from "../../errors/index.js";
import { TransactionEIP7702 } from "./TransactionEIP7702.js";

describe("TransactionEIP7702 constructor", () => {
	it("creates valid transaction", () => {
		const tx = TransactionEIP7702({
			chainId: 1n,
			nonce: 0n,
			maxPriorityFeePerGas: 1000000000n,
			maxFeePerGas: 20000000000n,
			gasLimit: 100000n,
			to: Address("0x742d35cc6634c0532925a3b844bc9e7595f0beb0"),
			value: 0n,
			data: new Uint8Array(),
			accessList: [],
			authorizationList: [],
			yParity: 0,
			r: new Uint8Array(32).fill(1),
			s: new Uint8Array(32).fill(2),
		});
		expect(tx.chainId).toBe(1n);
	});

	it("rejects maxPriorityFeePerGas > maxFeePerGas", () => {
		expect(() =>
			TransactionEIP7702({
				chainId: 1n,
				nonce: 0n,
				maxPriorityFeePerGas: 30000000000n,
				maxFeePerGas: 20000000000n,
				gasLimit: 100000n,
				to: Address("0x742d35cc6634c0532925a3b844bc9e7595f0beb0"),
				value: 0n,
				data: new Uint8Array(),
				accessList: [],
				authorizationList: [],
				yParity: 0,
				r: new Uint8Array(32).fill(1),
				s: new Uint8Array(32).fill(2),
			}),
		).toThrow(InvalidRangeError);
	});

	it("rejects maxPriorityFeePerGas > maxFeePerGas with correct error message", () => {
		expect(() =>
			TransactionEIP7702({
				chainId: 1n,
				nonce: 0n,
				maxPriorityFeePerGas: 30000000000n,
				maxFeePerGas: 20000000000n,
				gasLimit: 100000n,
				to: Address("0x742d35cc6634c0532925a3b844bc9e7595f0beb0"),
				value: 0n,
				data: new Uint8Array(),
				accessList: [],
				authorizationList: [],
				yParity: 0,
				r: new Uint8Array(32).fill(1),
				s: new Uint8Array(32).fill(2),
			}),
		).toThrow("Max priority fee per gas cannot exceed max fee per gas");
	});

	it("accepts maxPriorityFeePerGas equal to maxFeePerGas", () => {
		const tx = TransactionEIP7702({
			chainId: 1n,
			nonce: 0n,
			maxPriorityFeePerGas: 20000000000n,
			maxFeePerGas: 20000000000n,
			gasLimit: 100000n,
			to: Address("0x742d35cc6634c0532925a3b844bc9e7595f0beb0"),
			value: 0n,
			data: new Uint8Array(),
			accessList: [],
			authorizationList: [],
			yParity: 0,
			r: new Uint8Array(32).fill(1),
			s: new Uint8Array(32).fill(2),
		});
		expect(tx.maxPriorityFeePerGas).toBe(tx.maxFeePerGas);
	});
});

```
