---
title: '[TS/JS] src/primitives/TransactionIndex/TransactionIndex.test.ts'
source: 'src/primitives/TransactionIndex/TransactionIndex.test.ts'
---

> Auto-generated from test file: src/primitives/TransactionIndex/TransactionIndex.test.ts

```typescript
import { describe, expect, it } from "vitest";
import * as TransactionIndex from "./index.js";
import { InvalidTransactionIndexError } from "./errors.js";

describe("TransactionIndex", () => {
	describe("from", () => {
		it("creates from number", () => {
			const idx = TransactionIndex.from(42);
			expect(TransactionIndex.toNumber(idx)).toBe(42);
		});

		it("creates from bigint", () => {
			const idx = TransactionIndex.from(42n);
			expect(TransactionIndex.toNumber(idx)).toBe(42);
		});

		it("accepts zero", () => {
			const idx = TransactionIndex.from(0);
			expect(TransactionIndex.toNumber(idx)).toBe(0);
		});

		it("throws on negative", () => {
			try {
				TransactionIndex.from(-1);
				expect.fail("Should have thrown");
			} catch (e) {
				expect(e).toBeInstanceOf(InvalidTransactionIndexError);
				expect((e as InvalidTransactionIndexError).name).toBe(
					"InvalidTransactionIndexError",
				);
				expect((e as InvalidTransactionIndexError).message).toContain(
					"cannot be negative",
				);
			}
		});

		it("throws on non-integer", () => {
			try {
				TransactionIndex.from(1.5);
				expect.fail("Should have thrown");
			} catch (e) {
				expect(e).toBeInstanceOf(InvalidTransactionIndexError);
				expect((e as InvalidTransactionIndexError).name).toBe(
					"InvalidTransactionIndexError",
				);
				expect((e as InvalidTransactionIndexError).message).toContain(
					"must be an integer",
				);
			}
		});

		it("throws on invalid type", () => {
			try {
				// biome-ignore lint/suspicious/noExplicitAny: testing invalid input types
				TransactionIndex.from("42" as any);
				expect.fail("Should have thrown");
			} catch (e) {
				expect(e).toBeInstanceOf(InvalidTransactionIndexError);
				expect((e as InvalidTransactionIndexError).name).toBe(
					"InvalidTransactionIndexError",
				);
				expect((e as InvalidTransactionIndexError).message).toContain(
					"must be a number or bigint",
				);
			}
		});
	});

	describe("toNumber", () => {
		it("converts to number", () => {
			const idx = TransactionIndex.from(123);
			expect(TransactionIndex.toNumber(idx)).toBe(123);
		});
	});

	describe("equals", () => {
		it("returns true for equal indexes", () => {
			const a = TransactionIndex.from(42);
			const b = TransactionIndex.from(42);
			expect(TransactionIndex.equals(a, b)).toBe(true);
		});

		it("returns false for different indexes", () => {
			const a = TransactionIndex.from(42);
			const b = TransactionIndex.from(43);
			expect(TransactionIndex.equals(a, b)).toBe(false);
		});
	});

	describe("error properties", () => {
		it("InvalidTransactionIndexError has correct properties", () => {
			const error = new InvalidTransactionIndexError("Test message", {
				value: -1,
				expected: "non-negative integer",
			});
			expect(error.name).toBe("InvalidTransactionIndexError");
			expect(error.code).toBe("INVALID_TRANSACTION_INDEX");
			expect(error.value).toBe(-1);
			expect(error.expected).toBe("non-negative integer");
		});
	});
});

```
