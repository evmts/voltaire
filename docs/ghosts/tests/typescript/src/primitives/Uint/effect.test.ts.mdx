---
title: '[TS/JS] src/primitives/Uint/effect.test.ts'
source: 'src/primitives/Uint/effect.test.ts'
---

> Auto-generated from test file: src/primitives/Uint/effect.test.ts

```typescript
import * as Effect from "effect/Effect";
import * as Schema from "effect/Schema";
import { describe, expect, it } from "vitest";
import { UintBrand, UintFromUnknown, UintSchema } from "./effect.js";
import * as UintImpl from "./index.js";

describe("Uint Effect Schema", () => {
	describe("UintSchema class", () => {
		it("creates UintSchema from bigint", () => {
			const u = UintSchema.from(10n);
			expect(u.toBigInt()).toBe(10n);
			expect(u.toNumber()).toBe(10);
			expect(u.toHex().startsWith("0x")).toBe(true);
		});

		it("creates from hex and bytes", () => {
			const u1 = UintSchema.fromHex("0x0a");
			expect(u1.toBigInt()).toBe(10n);
			const b = new Uint8Array(32);
			b[31] = 1;
			const u2 = UintSchema.fromBytes(b);
			expect(u2.toBigInt()).toBe(1n);
		});

		it("rejects invalid input in constructor", () => {
			// @ts-expect-error invalid type
			// biome-ignore lint/suspicious/noExplicitAny: testing invalid input
			expect(() => new UintSchema({ value: -1n as any })).toThrow();
		});
	});

	describe("Effect Branded Types", () => {
		it("creates UintBrand with validation", () => {
			const brand = UintBrand(0n);
			expect(brand).toBe(0n);
		});

		it("rejects invalid UintBrand (negative)", () => {
			// biome-ignore lint/suspicious/noExplicitAny: testing invalid input
			expect(() => UintBrand(-1n as any)).toThrow();
		});

		it("creates UintSchema from UintBrand", () => {
			const brand = UintBrand(5n);
			const u = UintSchema.fromBranded(brand);
			expect(u.branded).toBe(brand);
		});
	});

	describe("Schema transforms", () => {
		it("decodes from unknown (number | bigint | string)", () => {
			const decode = Schema.decodeUnknownSync(UintFromUnknown);
			expect(decode(1)).toBeInstanceOf(UintSchema);
			expect(decode(1n)).toBeInstanceOf(UintSchema);
			expect(decode("0x01")).toBeInstanceOf(UintSchema);
		});

		it("encodes to bigint via UintFromUnknown", () => {
			const encode = Schema.encodeSync(UintFromUnknown);
			const out = encode(UintSchema.from(7n));
			expect(typeof out).toBe("bigint");
			expect(out).toBe(7n);
		});
	});

	describe("Effect integration", () => {
		it("works with Effect.gen", async () => {
			const program = Effect.gen(function* () {
				const u = yield* Effect.sync(() => UintSchema.from(3n));
				const v = yield* Effect.sync(() => UintSchema.fromHex("0x02"));
				return u.plus(v).toBigInt();
			});
			const result = await Effect.runPromise(program);
			expect(result).toBe(5n);
		});

		it("handles validation errors", async () => {
			const program = Effect.try({
				// biome-ignore lint/suspicious/noExplicitAny: testing invalid input
				try: () => new UintSchema({ value: -1n as any }),
				catch: (e) => new Error(`Failed: ${String(e)}`),
			});
			const result = await Effect.runPromise(Effect.either(program));
			expect(result._tag).toBe("Left");
		});
	});
});

```
