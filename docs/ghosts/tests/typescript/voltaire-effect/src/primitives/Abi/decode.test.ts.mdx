---
title: '[TS/JS] voltaire-effect/src/primitives/Abi/decode.test.ts'
source: 'voltaire-effect/src/primitives/Abi/decode.test.ts'
---

> Auto-generated from test file: voltaire-effect/src/primitives/Abi/decode.test.ts

```typescript
import { describe, expect, it } from "@effect/vitest";
import * as Effect from "effect/Effect";
import * as Exit from "effect/Exit";
import * as S from "effect/Schema";
import { fromArray } from "./AbiSchema.js";
import { decode } from "./decode.js";

const erc20Abi = S.decodeUnknownSync(fromArray)([
	{
		type: "function",
		name: "balanceOf",
		stateMutability: "view",
		inputs: [{ name: "account", type: "address" }],
		outputs: [{ type: "uint256" }],
	},
]);

describe("decode", () => {
	describe("success cases", () => {
		it.effect("decodes balanceOf result", () =>
			Effect.gen(function* () {
				const encoded = new Uint8Array(32);
				encoded[31] = 100;
				const result = yield* decode(erc20Abi, "balanceOf", encoded);
				expect(result).toBeInstanceOf(Array);
			}),
		);
	});

	describe("error cases", () => {
		it("fails for unknown function", async () => {
			const exit = await Effect.runPromiseExit(
				decode(erc20Abi, "unknownFunction", new Uint8Array(32)),
			);
			expect(Exit.isFailure(exit)).toBe(true);
		});
	});
});

```
