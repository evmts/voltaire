---
title: CryptoLive Tests
description: Test examples for the unified crypto service layer providing Keccak and Secp256k1.
---

## CryptoTest provides KeccakService

Demonstrates accessing the KeccakService through the unified CryptoTest layer.

```typescript
import { describe, expect, it } from "@effect/vitest";
import * as Effect from "effect/Effect";
import { CryptoTest } from "voltaire-effect/crypto";
import { KeccakService } from "voltaire-effect/crypto/Keccak256";

it.effect("provides KeccakService", () =>
  Effect.gen(function* () {
    const svc = yield* KeccakService;
    expect(typeof svc.hash === "function").toBe(true);
  }).pipe(Effect.provide(CryptoTest)),
);
```

## CryptoTest provides Secp256k1Service

Shows accessing the Secp256k1Service through the unified layer.

```typescript
import * as Effect from "effect/Effect";
import { CryptoTest } from "voltaire-effect/crypto";
import { Secp256k1Service } from "voltaire-effect/crypto/Secp256k1";

it.effect("provides Secp256k1Service", () =>
  Effect.gen(function* () {
    const svc = yield* Secp256k1Service;
    expect(typeof svc.sign === "function" && typeof svc.recover === "function").toBe(true);
  }).pipe(Effect.provide(CryptoTest)),
);
```

## KeccakService.hash returns 32 bytes

Verifies the Keccak hash function produces correct output length.

```typescript
import * as Effect from "effect/Effect";
import { CryptoTest } from "voltaire-effect/crypto";
import { KeccakService } from "voltaire-effect/crypto/Keccak256";

it.effect("KeccakService.hash returns 32 bytes", () =>
  Effect.gen(function* () {
    const svc = yield* KeccakService;
    const result = yield* svc.hash(new Uint8Array([1, 2, 3]));
    expect(result).toBeInstanceOf(Uint8Array);
    expect(result.length).toBe(32);
  }).pipe(Effect.provide(CryptoTest)),
);
```

## Composes Keccak and Secp256k1 in single program

Demonstrates using multiple crypto services together in one Effect program.

```typescript
import * as Effect from "effect/Effect";
import { CryptoTest } from "voltaire-effect/crypto";
import { KeccakService } from "voltaire-effect/crypto/Keccak256";

it.effect("composes Keccak and Secp256k1 in single program", () =>
  Effect.gen(function* () {
    const keccak = yield* KeccakService;
    const msgHash = yield* keccak.hash(new Uint8Array([0xde, 0xad, 0xbe, 0xef]));
    expect(msgHash.length).toBe(32);
  }).pipe(Effect.provide(CryptoTest)),
);
```
