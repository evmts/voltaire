---
title: encodeFunctionResult Tests
description: Test examples for ABI function result encoding showing uint256, bool, and uint8 return value encoding.
---

## Encodes uint256 result

Demonstrates encoding a balanceOf function result returning a uint256 value.

```typescript
import { describe, expect, it } from "@effect/vitest"
import * as Effect from "effect/Effect"
import * as S from "effect/Schema"
import * as Abi from "voltaire-effect/primitives/Abi"

const erc20Abi = S.decodeUnknownSync(Abi.fromArray)([
  {
    type: "function",
    name: "balanceOf",
    stateMutability: "view",
    inputs: [{ name: "account", type: "address" }],
    outputs: [{ type: "uint256" }],
  },
])

it.effect("encodes uint256 result", () =>
  Effect.gen(function* () {
    const encoded = yield* Abi.encodeFunctionResult(erc20Abi, "balanceOf", [
      1000000000000000000n,
    ])
    expect(encoded.startsWith("0x")).toBe(true)
    expect(encoded.length).toBe(66)
  }),
)
```

## Encodes bool true result

Demonstrates encoding a transfer function result returning true.

```typescript
import { describe, expect, it } from "@effect/vitest"
import * as Effect from "effect/Effect"
import * as S from "effect/Schema"
import * as Abi from "voltaire-effect/primitives/Abi"

const erc20Abi = S.decodeUnknownSync(Abi.fromArray)([
  {
    type: "function",
    name: "transfer",
    stateMutability: "nonpayable",
    inputs: [
      { name: "to", type: "address" },
      { name: "amount", type: "uint256" },
    ],
    outputs: [{ type: "bool" }],
  },
])

it.effect("encodes bool true result", () =>
  Effect.gen(function* () {
    const encoded = yield* Abi.encodeFunctionResult(erc20Abi, "transfer", [true])
    expect(encoded).toBe(
      "0x0000000000000000000000000000000000000000000000000000000000000001",
    )
  }),
)
```

## Encodes max uint256

Demonstrates encoding the maximum uint256 value.

```typescript
import { describe, expect, it } from "@effect/vitest"
import * as Effect from "effect/Effect"
import * as S from "effect/Schema"
import * as Abi from "voltaire-effect/primitives/Abi"

const erc20Abi = S.decodeUnknownSync(Abi.fromArray)([
  {
    type: "function",
    name: "balanceOf",
    stateMutability: "view",
    inputs: [{ name: "account", type: "address" }],
    outputs: [{ type: "uint256" }],
  },
])

it.effect("encodes max uint256", () =>
  Effect.gen(function* () {
    const maxUint256 = 2n ** 256n - 1n
    const encoded = yield* Abi.encodeFunctionResult(erc20Abi, "balanceOf", [maxUint256])
    expect(encoded).toBe(`0x${"f".repeat(64)}`)
  }),
)
```

## Error: Unknown function

Demonstrates that encoding fails for unknown function names.

```typescript
import * as Effect from "effect/Effect"
import * as Exit from "effect/Exit"
import * as Abi from "voltaire-effect/primitives/Abi"

it("fails for unknown function", async () => {
  const exit = await Effect.runPromiseExit(
    Abi.encodeFunctionResult(erc20Abi, "unknownFunction", [100n]),
  )
  expect(Exit.isFailure(exit)).toBe(true)
})
```
