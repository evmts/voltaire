---
title: NoopCache Tests
description: Test examples for NoopCache showing a cache implementation that never stores values.
---

## NoopCache get always returns none

The NoopCache always returns Option.none for any key lookup.

```typescript
import { Effect } from 'effect'
import * as Option from 'effect/Option'
import { CacheService, NoopCache } from 'voltaire-effect'

const program = Effect.gen(function* () {
  const cache = yield* CacheService
  const result = yield* cache.get("any-key")
  expect(Option.isNone(result)).toBe(true)
}).pipe(Effect.provide(NoopCache))
```

## NoopCache returns none even after set

Values are never stored, so get returns none even after a set operation.

```typescript
import { Effect } from 'effect'
import * as Option from 'effect/Option'
import { CacheService, NoopCache } from 'voltaire-effect'

const program = Effect.gen(function* () {
  const cache = yield* CacheService
  yield* cache.set("key", "value")
  const result = yield* cache.get("key")
  expect(Option.isNone(result)).toBe(true)
}).pipe(Effect.provide(NoopCache))
```

## NoopCache set completes without error

The set operation completes successfully even though it doesn't store anything.

```typescript
import { Effect } from 'effect'
import { CacheService, NoopCache } from 'voltaire-effect'

const program = Effect.gen(function* () {
  const cache = yield* CacheService
  yield* cache.set("key", "value")
  yield* cache.set("key", "value", 1000) // With TTL
}).pipe(Effect.provide(NoopCache))
```

## NoopCache delete always returns false

Delete operations always return false since nothing is stored.

```typescript
import { Effect } from 'effect'
import { CacheService, NoopCache } from 'voltaire-effect'

const program = Effect.gen(function* () {
  const cache = yield* CacheService
  const result = yield* cache.delete("any-key")
  expect(result).toBe(false)
}).pipe(Effect.provide(NoopCache))
```

## NoopCache use case: testing without cache interference

NoopCache is useful for testing code paths that should always fetch fresh data.

```typescript
import { Effect } from 'effect'
import * as Option from 'effect/Option'
import { CacheService, NoopCache } from 'voltaire-effect'

const program = Effect.gen(function* () {
  let fetchCount = 0
  
  const fetchWithCache = (key: string) =>
    Effect.gen(function* () {
      const cache = yield* CacheService
      const cached = yield* cache.get<string>(key)
      if (Option.isSome(cached)) {
        return cached.value
      }
      fetchCount++
      const value = `value-${fetchCount}`
      yield* cache.set(key, value)
      return value
    })

  const r1 = yield* fetchWithCache("key")
  const r2 = yield* fetchWithCache("key")
  const r3 = yield* fetchWithCache("key")

  // With NoopCache, each call fetches fresh
  expect([r1, r2, r3]).toEqual(["value-1", "value-2", "value-3"])
  expect(fetchCount).toBe(3)
}).pipe(Effect.provide(NoopCache))
```
