---
title: Bytecode Tests
description: Test examples for Bytecode schema showing EVM bytecode parsing and encoding.
---

## Decodes hex string

Demonstrates decoding EVM bytecode from hex string.

```typescript
import { describe, expect, it } from "@effect/vitest"
import * as S from "effect/Schema"
import * as Bytecode from "voltaire-effect/primitives/Bytecode"

it("decodes hex string", () => {
  const result = S.decodeSync(Bytecode.Hex)("0x60016002")
  expect([...result]).toEqual([0x60, 0x01, 0x60, 0x02])
})
```

## Handles empty hex string

Demonstrates handling of empty bytecode.

```typescript
import * as S from "effect/Schema"
import * as Bytecode from "voltaire-effect/primitives/Bytecode"

it("handles empty hex string", () => {
  const result = S.decodeSync(Bytecode.Hex)("0x")
  expect(result.length).toBe(0)
})
```

## Encodes to hex string

Demonstrates encoding bytecode back to hex.

```typescript
import * as S from "effect/Schema"
import * as Bytecode from "voltaire-effect/primitives/Bytecode"

it("encodes to hex string", () => {
  const code = S.decodeSync(Bytecode.Hex)("0x60016002")
  const hex = S.encodeSync(Bytecode.Hex)(code)
  expect(hex).toBe("0x60016002")
})
```

## Bytes schema

Demonstrates working with bytecode as raw bytes.

```typescript
import * as S from "effect/Schema"
import * as Bytecode from "voltaire-effect/primitives/Bytecode"

it("decodes Uint8Array", () => {
  const input = new Uint8Array([0x60, 0x01, 0x60, 0x02])
  const result = S.decodeSync(Bytecode.Bytes)(input)
  expect([...result]).toEqual([...input])
})

it("handles empty bytecode", () => {
  const result = S.decodeSync(Bytecode.Bytes)(new Uint8Array(0))
  expect(result.length).toBe(0)
})

it("encodes to Uint8Array", () => {
  const code = S.decodeSync(Bytecode.Hex)("0x6001")
  const bytes = S.encodeSync(Bytecode.Bytes)(code)
  expect(bytes).toBeInstanceOf(Uint8Array)
  expect([...bytes]).toEqual([0x60, 0x01])
})
```
