---
title: TransportError Tests
description: Test examples for transport error construction with JSON-RPC error codes and metadata.
---

## Creates error with code and message

Shows basic TransportError construction with standard properties.

```typescript
import { TransportError } from "voltaire-effect";

const error = new TransportError({
  code: -32603,
  message: "Internal error",
});

expect(error.code).toBe(-32603);
expect(error.message).toBe("Internal error");
expect(error.name).toBe("TransportError");
expect(error._tag).toBe("TransportError");
```

## Stores data

Demonstrates storing additional error data like revert reasons.

```typescript
import { TransportError } from "voltaire-effect";

const errorData = {
  revertReason: "0x08c379a0...",
  details: { gas: 21000 },
};
const error = new TransportError({
  code: -32000,
  message: "reverted",
  data: errorData,
});

expect(error.data).toEqual(errorData);
```

## Stores context object

Shows how to attach request context for debugging.

```typescript
import { TransportError } from "voltaire-effect";

const context = { method: "eth_call", params: ["0x123"] };
const error = new TransportError(
  { code: -32603, message: "Error" },
  undefined,
  { context },
);

expect(error.context).toEqual(context);
```

## Stores cause

Demonstrates wrapping underlying errors with cause chain.

```typescript
import { TransportError } from "voltaire-effect";

const originalError = new Error("Original error");
const error = new TransportError(
  { code: -32603, message: "Wrapped error" },
  undefined,
  { cause: originalError },
);

expect(error.cause).toBe(originalError);
```

## Standard JSON-RPC error codes

Shows handling of standard JSON-RPC error codes.

```typescript
import { TransportError } from "voltaire-effect";

// Parse error
const parseError = new TransportError({ code: -32700, message: "Parse error" });

// Invalid request
const invalidRequest = new TransportError({ code: -32600, message: "Invalid Request" });

// Method not found
const methodNotFound = new TransportError({ code: -32601, message: "Method not found" });

// Invalid params
const invalidParams = new TransportError({ code: -32602, message: "Invalid params" });

// Internal error
const internalError = new TransportError({ code: -32603, message: "Internal error" });

// Server error range (-32000 to -32099)
const serverError = new TransportError({ code: -32000, message: "Server error" });
```

## Is instanceof Error

Verifies TransportError extends standard Error class.

```typescript
import { TransportError } from "voltaire-effect";

const error = new TransportError({ code: -32603, message: "Error" });
expect(error instanceof Error).toBe(true);
expect(error instanceof TransportError).toBe(true);
```

## Handles complex nested data

Shows that arbitrary nested data structures are preserved.

```typescript
import { TransportError } from "voltaire-effect";

const nestedData = {
  level1: {
    level2: {
      array: [1, 2, { nested: true }],
    },
  },
};
const error = new TransportError({
  code: -32603,
  message: "Error",
  data: nestedData,
});
expect(error.data).toEqual(nestedData);
```
