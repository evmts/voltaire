---
title: Signers Tests
description: Test examples for Signers showing Ethereum wallet creation and message signing.
---

## Create Signer from Private Key (Hex)

Creates a signer from a hex-encoded private key with 0x prefix.

```typescript
import { Effect } from 'effect'
import * as Signers from 'voltaire-effect/crypto/Signers'

const testPrivateKey = '0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80'

const program = Effect.gen(function* () {
  const result = yield* Signers.fromPrivateKey(testPrivateKey)
  // result.address starts with "0x"
  // result.publicKey is Uint8Array of length 64
})
```

## Create Signer from Uint8Array

Creates a signer from a raw 32-byte private key.

```typescript
import { Effect } from 'effect'
import * as Signers from 'voltaire-effect/crypto/Signers'

const privateKeyBytes = new Uint8Array([
  0xac, 0x09, 0x74, 0xbe, 0xc3, 0x9a, 0x17, 0xe3,
  0x6b, 0xa4, 0xa6, 0xb4, 0xd2, 0x38, 0xff, 0x94,
  0x4b, 0xac, 0xb4, 0x78, 0xcb, 0xed, 0x5e, 0xfc,
  0xae, 0x78, 0x4d, 0x7b, 0xf4, 0xf2, 0xff, 0x80,
])

const program = Effect.gen(function* () {
  const result = yield* Signers.fromPrivateKey(privateKeyBytes)
  // result.address is defined
  // result.publicKey.length is 64
})
```

## Sign a String Message

Signs a string message with EIP-191 prefix, returning a 65-byte signature.

```typescript
import { Effect } from 'effect'
import * as Signers from 'voltaire-effect/crypto/Signers'

const testPrivateKey = '0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80'

const program = Effect.gen(function* () {
  const signer = yield* Signers.fromPrivateKey(testPrivateKey)
  const signature = yield* signer.signMessage('Hello, Ethereum!')
  // signature starts with "0x"
  // signature.length is 132 (65 bytes hex encoded)
})
```

## Sign a Uint8Array Message

Signs raw bytes as a message.

```typescript
import { Effect } from 'effect'
import * as Signers from 'voltaire-effect/crypto/Signers'

const testPrivateKey = '0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80'

const program = Effect.gen(function* () {
  const signer = yield* Signers.fromPrivateKey(testPrivateKey)
  const message = new TextEncoder().encode('Hello')
  const signature = yield* signer.signMessage(message)
  // signature starts with "0x"
  // signature.length is 132
})
```

## Sign EIP-712 Typed Data

Signs structured typed data according to EIP-712.

```typescript
import { Effect } from 'effect'
import * as Signers from 'voltaire-effect/crypto/Signers'

const testPrivateKey = '0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80'

const program = Effect.gen(function* () {
  const signer = yield* Signers.fromPrivateKey(testPrivateKey)
  const typedData = {
    types: {
      EIP712Domain: [
        { name: 'name', type: 'string' },
        { name: 'version', type: 'string' },
      ],
      Message: [{ name: 'content', type: 'string' }],
    },
    primaryType: 'Message',
    domain: { name: 'MyApp', version: '1' },
    message: { content: 'Hello' },
  }
  const signature = yield* signer.signTypedData(typedData)
  // signature starts with "0x"
  // signature.length is 132
})
```

## Get Signer Address

Retrieves the Ethereum address from a signer.

```typescript
import { Effect } from 'effect'
import * as Signers from 'voltaire-effect/crypto/Signers'

const testPrivateKey = '0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80'

const program = Effect.gen(function* () {
  const signer = yield* Signers.fromPrivateKey(testPrivateKey)
  const address = yield* Signers.getAddress(signer)
  // address equals signer.address
})
```

## Service Layer Usage

Uses the SignersService with dependency injection.

```typescript
import { Effect } from 'effect'
import { SignersService, SignersLive } from 'voltaire-effect/crypto/Signers'

const testPrivateKey = '0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80'

const program = Effect.gen(function* () {
  const signers = yield* SignersService
  const signer = yield* signers.fromPrivateKey(testPrivateKey)
  const address = yield* signers.getAddress(signer)
  // address equals signer.address
}).pipe(Effect.provide(SignersLive))
```

## Test Layer for Mocking

Uses the SignersTest layer for testing with mock addresses.

```typescript
import { Effect } from 'effect'
import { SignersService, SignersTest } from 'voltaire-effect/crypto/Signers'

const program = Effect.gen(function* () {
  const signers = yield* SignersService
  const result = yield* signers.fromPrivateKey(`0x${'00'.repeat(32)}`)
  // result.address is "0x0000000000000000000000000000000000000000"
}).pipe(Effect.provide(SignersTest))
```
