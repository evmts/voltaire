---
title: Presets Tests
description: Test examples for provider presets showing MainnetProvider and createProvider usage.
---

## MainnetProvider with getChainId

Provides composed layer with getChainId.

```typescript
import { describe, expect, it } from "@effect/vitest"
import * as Effect from "effect/Effect"
import * as Layer from "effect/Layer"
import { Provider, ProviderService } from "voltaire-effect"
import { TestTransport } from "voltaire-effect"

describe("presets", () => {
  describe("MainnetProvider", () => {
    it.effect("provides composed layer with getChainId", () =>
      Effect.gen(function* () {
        const testLayer = Provider.pipe(
          Layer.provide(TestTransport({ eth_chainId: "0x1" }))
        )

        const program = Effect.gen(function* () {
          const provider = yield* ProviderService
          return yield* provider.getChainId()
        }).pipe(Effect.provide(testLayer))

        const result = yield* program
        expect(result).toBe(1)
      })
    )
  })
})
```

## MainnetProvider with getBlockNumber

Provides composed layer with getBlockNumber.

```typescript
import { describe, expect, it } from "@effect/vitest"
import * as Effect from "effect/Effect"
import * as Layer from "effect/Layer"
import { Provider, ProviderService } from "voltaire-effect"
import { TestTransport } from "voltaire-effect"

describe("getBlockNumber", () => {
  it.effect("provides composed layer with getBlockNumber", () =>
    Effect.gen(function* () {
      const testLayer = Provider.pipe(
        Layer.provide(TestTransport({ eth_blockNumber: "0x1234" }))
      )

      const program = Effect.gen(function* () {
        const provider = yield* ProviderService
        return yield* provider.getBlockNumber()
      }).pipe(Effect.provide(testLayer))

      const result = yield* program
      expect(result).toBe(0x1234n)
    })
  )
})
```

## createProvider with getChainId

createProvider returns a composed layer.

```typescript
import { describe, expect, it } from "@effect/vitest"
import * as Effect from "effect/Effect"
import * as Layer from "effect/Layer"
import { Provider, ProviderService } from "voltaire-effect"
import { TestTransport } from "voltaire-effect"

describe("createProvider", () => {
  it.effect("provides composed layer with getChainId", () =>
    Effect.gen(function* () {
      const testLayer = Provider.pipe(
        Layer.provide(TestTransport({ eth_chainId: "0xa4b1" }))
      )

      const program = Effect.gen(function* () {
        const provider = yield* ProviderService
        return yield* provider.getChainId()
      }).pipe(Effect.provide(testLayer))

      const result = yield* program
      expect(result).toBe(42161)
    })
  )
})
```

## createProvider with getBalance

createProvider provides getBalance functionality.

```typescript
import { describe, expect, it } from "@effect/vitest"
import * as Effect from "effect/Effect"
import * as Layer from "effect/Layer"
import { Provider, ProviderService } from "voltaire-effect"
import { TestTransport } from "voltaire-effect"

describe("getBalance", () => {
  it.effect("provides composed layer with getBalance", () =>
    Effect.gen(function* () {
      const testLayer = Provider.pipe(
        Layer.provide(TestTransport({ eth_getBalance: "0xde0b6b3a7640000" }))
      )

      const program = Effect.gen(function* () {
        const provider = yield* ProviderService
        return yield* provider.getBalance("0x1234567890123456789012345678901234567890")
      }).pipe(Effect.provide(testLayer))

      const result = yield* program
      expect(result).toBe(1000000000000000000n)
    })
  )
})
```

## Layer Construction

MainnetProvider and createProvider return fully composed layers.

```typescript
import { describe, expect, it } from "@effect/vitest"
import { createProvider, MainnetProvider } from "voltaire-effect"

describe("layer construction", () => {
  it("MainnetProvider returns a fully composed layer", () => {
    const layer = MainnetProvider("https://eth.example.com")
    expect(layer).toBeDefined()
  })

  it("createProvider returns a fully composed layer", () => {
    const layer = createProvider("https://arb.example.com")
    expect(layer).toBeDefined()
  })
})
```
