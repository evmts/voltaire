---
title: BlockError Tests
description: Test examples for BlockError and BlockNotFoundError classes showing error construction and inheritance.
---

## BlockError Constructor

Creates a BlockError with message, cause, and context.

```typescript
import { describe, expect, it } from "@effect/vitest"
import { BlockError } from "voltaire-effect/block/BlockError"

describe("BlockError", () => {
  describe("constructor", () => {
    it("creates error with message", () => {
      const error = new BlockError("Block operation failed")
      expect(error.message).toBe("Block operation failed")
      expect(error.name).toBe("BlockError")
      expect(error._tag).toBe("BlockError")
    })

    it("creates error with cause", () => {
      const originalError = new Error("Network timeout")
      const error = new BlockError("Block fetch failed", {
        cause: originalError,
      })
      expect(error.cause).toBe(originalError)
    })

    it("creates error with context", () => {
      const context = { blockNumber: 12345, rpcUrl: "https://example.com" }
      const error = new BlockError("Block validation failed", { context })
      expect((error as any).context).toEqual(context)
    })

    it("creates error with both cause and context", () => {
      const originalError = new Error("RPC error")
      const context = { method: "eth_getBlockByNumber" }
      const error = new BlockError("Block fetch failed", {
        cause: originalError,
        context,
      })
      expect(error.cause).toBe(originalError)
      expect((error as any).context).toEqual(context)
    })
  })
})
```

## BlockError instanceof Checks

Verifies BlockError is a proper Error subclass.

```typescript
import { describe, expect, it } from "@effect/vitest"
import { BlockError } from "voltaire-effect/block/BlockError"

describe("instanceof checks", () => {
  it("BlockError is instanceof Error", () => {
    const error = new BlockError("Error")
    expect(error instanceof Error).toBe(true)
  })

  it("BlockError is instanceof BlockError", () => {
    const error = new BlockError("Error")
    expect(error instanceof BlockError).toBe(true)
  })
})
```

## BlockNotFoundError with String Identifier

Creates BlockNotFoundError with block hash or tag.

```typescript
import { describe, expect, it } from "@effect/vitest"
import { BlockNotFoundError } from "voltaire-effect/block/BlockError"

describe("BlockNotFoundError", () => {
  describe("constructor with string identifier", () => {
    it("creates error with block hash", () => {
      const hash = "0xabc123"
      const error = new BlockNotFoundError(hash)
      expect(error.message).toBe(`Block ${hash} not found`)
      expect(error.identifier).toBe(hash)
      expect(error.name).toBe("BlockNotFoundError")
      expect(error._tag).toBe("BlockNotFoundError")
    })

    it("creates error with block tag", () => {
      const error = new BlockNotFoundError("latest")
      expect(error.message).toBe("Block latest not found")
    })
  })
})
```

## BlockNotFoundError with BigInt Identifier

Creates BlockNotFoundError with block number.

```typescript
import { describe, expect, it } from "@effect/vitest"
import { BlockNotFoundError } from "voltaire-effect/block/BlockError"

describe("constructor with bigint identifier", () => {
  it("creates error with block number", () => {
    const blockNumber = 12345678n
    const error = new BlockNotFoundError(blockNumber)
    expect(error.message).toBe("Block 12345678 not found")
    expect(error.identifier).toBe(blockNumber)
  })

  it("handles zero block number", () => {
    const error = new BlockNotFoundError(0n)
    expect(error.message).toBe("Block 0 not found")
  })

  it("handles large block numbers", () => {
    const largeBlock = 999999999999n
    const error = new BlockNotFoundError(largeBlock)
    expect(error.message).toBe("Block 999999999999 not found")
  })
})
```

## BlockNotFoundError with Cause

Creates BlockNotFoundError with an underlying cause.

```typescript
import { describe, expect, it } from "@effect/vitest"
import { BlockNotFoundError } from "voltaire-effect/block/BlockError"

describe("with cause", () => {
  it("creates BlockNotFoundError with cause", () => {
    const originalError = new Error("RPC returned null")
    const error = new BlockNotFoundError("0xabc", { cause: originalError })
    expect(error.cause).toBe(originalError)
  })
})
```
