---
title: BlockNumber Tests
description: Test examples for BlockNumber Effect schemas with number, bigint, and hex encoding.
---

## Decodes safe integer

Decodes JavaScript safe integer to BlockNumber.

```typescript
import { BlockNumber } from "voltaire"
import * as S from "effect/Schema"
import { describe, expect, it } from "vitest"
import * as BlockNumberSchema from "voltaire-effect/primitives/BlockNumber"

it("decodes safe integer", () => {
  const result = S.decodeSync(BlockNumberSchema.Number)(12345)
  expect(BlockNumber.toNumber(result)).toBe(12345)
})
```

## Decodes zero

Handles zero block number.

```typescript
it("decodes zero", () => {
  const result = S.decodeSync(BlockNumberSchema.Number)(0)
  expect(BlockNumber.toNumber(result)).toBe(0)
})
```

## Rejects number exceeding MAX_SAFE_INTEGER

Validates block numbers stay within safe integer range.

```typescript
it("rejects number exceeding MAX_SAFE_INTEGER", () => {
  const unsafeNumber = Number.MAX_SAFE_INTEGER + 10
  expect(() => S.decodeSync(BlockNumberSchema.Number)(unsafeNumber)).toThrow("exceeds")
})
```

## Decodes bigint

Decodes bigint to BlockNumber.

```typescript
it("decodes bigint", () => {
  const result = S.decodeSync(BlockNumberSchema.BigInt)(12345n)
  expect(BlockNumber.toBigInt(result)).toBe(12345n)
})
```

## Decodes large bigint

Handles bigints larger than MAX_SAFE_INTEGER.

```typescript
it("decodes large bigint", () => {
  const largeNum = BigInt(Number.MAX_SAFE_INTEGER) + 1000n
  const result = S.decodeSync(BlockNumberSchema.BigInt)(largeNum)
  expect(BlockNumber.toBigInt(result)).toBe(largeNum)
})
```

## Decodes hex string

Decodes hex-encoded block number.

```typescript
it("decodes hex string", () => {
  const result = S.decodeSync(BlockNumberSchema.Hex)("0x3039")
  expect(BlockNumber.toNumber(result)).toBe(12345)
})
```

## Decodes hex zero

Handles zero in hex format.

```typescript
it("decodes hex zero", () => {
  const result = S.decodeSync(BlockNumberSchema.Hex)("0x0")
  expect(BlockNumber.toNumber(result)).toBe(0)
})
```

## Encodes back to hex

Round-trips block number through hex encoding.

```typescript
it("encodes back to hex", () => {
  const blockNum = S.decodeSync(BlockNumberSchema.Hex)("0x3039")
  const hex = S.encodeSync(BlockNumberSchema.Hex)(blockNum)
  expect(hex.toLowerCase()).toBe("0x3039")
})
```

## Rejects invalid hex

Validates hex string format.

```typescript
it("rejects invalid hex", () => {
  expect(() => S.decodeSync(BlockNumberSchema.Hex)("not-hex")).toThrow()
})
```

## Rejects hex without 0x prefix

Requires proper hex prefix.

```typescript
it("rejects hex without 0x prefix", () => {
  expect(() => S.decodeSync(BlockNumberSchema.Hex)("3039")).toThrow()
})
```
