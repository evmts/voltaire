---
title: format Tests
description: Test examples for formatting ABI items as human-readable strings.
---

## Formats transfer function

Formats function ABI item as readable string.

```typescript
import { describe, expect, it } from "@effect/vitest"
import * as Effect from "effect/Effect"
import * as S from "effect/Schema"
import * as Abi from "voltaire-effect/primitives/Abi"

it.effect("formats transfer function", () =>
  Effect.gen(function* () {
    const fn = S.decodeUnknownSync(Abi.FunctionSchema)({
      type: "function",
      name: "transfer",
      stateMutability: "nonpayable",
      inputs: [
        { name: "to", type: "address" },
        { name: "amount", type: "uint256" },
      ],
      outputs: [{ type: "bool" }],
    })
    const formatted = yield* Abi.format(fn as any)
    expect(formatted).toContain("transfer")
    expect(formatted).toContain("address")
    expect(formatted).toContain("uint256")
  }),
)
```

## Formats function with no inputs

Handles function with empty input list.

```typescript
it.effect("formats function with no inputs", () =>
  Effect.gen(function* () {
    const fn = S.decodeUnknownSync(Abi.FunctionSchema)({
      type: "function",
      name: "totalSupply",
      stateMutability: "view",
      inputs: [],
      outputs: [{ type: "uint256" }],
    })
    const formatted = yield* Abi.format(fn as any)
    expect(formatted).toContain("totalSupply")
  }),
)
```

## Formats Transfer event

Formats event ABI item as readable string.

```typescript
it.effect("formats Transfer event", () =>
  Effect.gen(function* () {
    const evt = S.decodeUnknownSync(Abi.EventSchema)({
      type: "event",
      name: "Transfer",
      inputs: [
        { name: "from", type: "address", indexed: true },
        { name: "to", type: "address", indexed: true },
        { name: "value", type: "uint256", indexed: false },
      ],
    })
    const formatted = yield* Abi.format(evt as any)
    expect(formatted).toContain("Transfer")
    expect(formatted).toContain("address")
  }),
)
```

## Formats error

Formats error ABI item as readable string.

```typescript
it.effect("formats error", () =>
  Effect.gen(function* () {
    const err = S.decodeUnknownSync(Abi.ErrorSchema)({
      type: "error",
      name: "InsufficientBalance",
      inputs: [
        { name: "available", type: "uint256" },
        { name: "required", type: "uint256" },
      ],
    })
    const formatted = yield* Abi.format(err as any)
    expect(formatted).toContain("InsufficientBalance")
  }),
)
```

## Is infallible

Never fails for valid ABI items.

```typescript
it.effect("never fails", () =>
  Effect.gen(function* () {
    const fn = S.decodeUnknownSync(Abi.FunctionSchema)({
      type: "function",
      name: "test",
      stateMutability: "nonpayable",
      inputs: [],
      outputs: [],
    })
    const formatted = yield* Abi.format(fn as any)
    expect(formatted).toContain("test")
  }),
)
```
