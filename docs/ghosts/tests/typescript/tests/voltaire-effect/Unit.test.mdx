---
title: Unit Tests
description: Test examples for Unit showing ether/gwei/wei conversion utilities.
---

## Parse units with decimals

Parses a decimal string to bigint with specified decimals.

```typescript
import * as Effect from 'effect/Effect'
import { parseUnits } from 'voltaire-effect/utils/Unit'

const result = await Effect.runPromise(parseUnits('1.5', 18))
expect(result).toBe(1500000000000000000n)
```

## Parse ether to wei

Converts ETH string to wei (10^18).

```typescript
import * as Effect from 'effect/Effect'
import { parseEther } from 'voltaire-effect/utils/Unit'

const result = await Effect.runPromise(parseEther('1'))
expect(result).toBe(1000000000000000000n)
```

## Parse gwei to wei

Converts gwei string to wei (10^9).

```typescript
import * as Effect from 'effect/Effect'
import { parseGwei } from 'voltaire-effect/utils/Unit'

const result = await Effect.runPromise(parseGwei('20.5'))
expect(result).toBe(20500000000n)
```

## Format units from bigint

Formats a bigint to decimal string with specified decimals.

```typescript
import * as Effect from 'effect/Effect'
import { formatUnits } from 'voltaire-effect/utils/Unit'

const result = await Effect.runPromise(formatUnits(1500000000000000000n, 18))
expect(result).toBe('1.5')
```

## Format ether from wei

Converts wei to ETH string.

```typescript
import * as Effect from 'effect/Effect'
import { formatEther } from 'voltaire-effect/utils/Unit'

const result = await Effect.runPromise(formatEther(1000000000000000000n))
expect(result).toBe('1')
```

## Format gwei from wei

Converts wei to gwei string.

```typescript
import * as Effect from 'effect/Effect'
import { formatGwei } from 'voltaire-effect/utils/Unit'

const result = await Effect.runPromise(formatGwei(1000000000n))
expect(result).toBe('1')
```

## Round-trip parseEther and formatEther

Verifies lossless conversion between formats.

```typescript
import * as Effect from 'effect/Effect'
import { parseEther, formatEther } from 'voltaire-effect/utils/Unit'

const original = '123.456789012345678'
const wei = await Effect.runPromise(parseEther(original))
const formatted = await Effect.runPromise(formatEther(wei))
expect(formatted).toBe('123.456789012345678')
```

## Handle USDC 6 decimals

Parses and formats with 6 decimals for stablecoin use.

```typescript
import * as Effect from 'effect/Effect'
import { parseUnits, formatUnits } from 'voltaire-effect/utils/Unit'

const result = await Effect.runPromise(parseUnits('100.50', 6))
expect(result).toBe(100500000n)

const formatted = await Effect.runPromise(formatUnits(100500000n, 6))
expect(formatted).toBe('100.5')
```

## Handle negative values

Correctly parses and formats negative amounts.

```typescript
import * as Effect from 'effect/Effect'
import { parseEther, formatEther } from 'voltaire-effect/utils/Unit'

const result = await Effect.runPromise(parseEther('-1.5'))
expect(result).toBe(-1500000000000000000n)

const formatted = await Effect.runPromise(formatEther(-1500000000000000000n))
expect(formatted).toBe('-1.5')
```
