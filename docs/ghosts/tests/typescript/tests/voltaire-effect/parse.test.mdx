---
title: parse Tests
description: Test examples for parsing JSON ABI strings into validated ABI arrays.
---

## Parses valid JSON ABI string

Parses stringified ABI JSON into validated array.

```typescript
import { describe, expect, it } from "@effect/vitest"
import * as Effect from "effect/Effect"
import * as Abi from "voltaire-effect/primitives/Abi"

it.effect("parses valid JSON ABI string", () =>
  Effect.gen(function* () {
    const jsonString = JSON.stringify([
      {
        type: "function",
        name: "transfer",
        inputs: [
          { name: "to", type: "address" },
          { name: "amount", type: "uint256" },
        ],
        outputs: [{ type: "bool" }],
      },
    ])
    const abi = yield* Abi.parse(jsonString)
    expect(Array.isArray(abi)).toBe(true)
    expect(abi.length).toBe(1)
  }),
)
```

## Parses empty array as valid ABI

Accepts empty array as valid ABI.

```typescript
it.effect("parses empty array as valid ABI", () =>
  Effect.gen(function* () {
    const abi = yield* Abi.parse("[]")
    expect(Array.isArray(abi)).toBe(true)
    expect(abi.length).toBe(0)
  }),
)
```

## Parses ABI with multiple items

Handles ABI with functions and events.

```typescript
it.effect("parses ABI with multiple items", () =>
  Effect.gen(function* () {
    const jsonString = JSON.stringify([
      {
        type: "function",
        name: "transfer",
        inputs: [
          { name: "to", type: "address" },
          { name: "amount", type: "uint256" },
        ],
        outputs: [{ type: "bool" }],
      },
      {
        type: "event",
        name: "Transfer",
        inputs: [
          { name: "from", type: "address", indexed: true },
          { name: "to", type: "address", indexed: true },
          { name: "value", type: "uint256", indexed: false },
        ],
      },
    ])
    const abi = yield* Abi.parse(jsonString)
    expect(abi.length).toBe(2)
  }),
)
```

## Fails with AbiParseError on invalid JSON

Returns failure for malformed JSON.

```typescript
import * as Exit from "effect/Exit"

it("fails with AbiParseError on invalid JSON", async () => {
  const exit = await Effect.runPromiseExit(Abi.parse("not valid json {{{"))
  expect(Exit.isFailure(exit)).toBe(true)
})
```

## AbiParseError has correct _tag

Error type is properly tagged for pattern matching.

```typescript
it("has correct _tag", () => {
  const error = new Abi.AbiParseError({ message: "test error" })
  expect(error._tag).toBe("AbiParseError")
  expect(error.name).toBe("AbiParseError")
})
```
