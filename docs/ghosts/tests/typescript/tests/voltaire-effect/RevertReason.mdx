---
title: RevertReason Tests
description: Test examples for RevertReason showing EVM revert reason parsing from Error(string) and Panic codes.
---

## Parse Error(string) Revert

Parses standard Error(string) revert data with 0x08c379a0 selector.

```typescript
import { describe, expect, it } from "@effect/vitest"
import * as S from "effect/Schema"
import * as RevertReason from "voltaire-effect/primitives/RevertReason"

// Error(string) with message "Test error message"
const errorData =
  "0x08c379a00000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000001454657374206572726f72206d657373616765000000000000000000000000000000"

const result = S.decodeSync(RevertReason.Hex)(errorData)
expect(result.type).toBe("Error")
if (result.type === "Error") {
  expect(result.message.replace(/\0/g, "")).toBe("Test error message")
}
```

## Parse Unknown Revert

Returns Unknown type for unrecognized revert data.

```typescript
import * as S from "effect/Schema"
import * as RevertReason from "voltaire-effect/primitives/RevertReason"

// Too short to be a valid selector + data
const result = S.decodeSync(RevertReason.Hex)("0x1234")
expect(result.type).toBe("Unknown")
```

## Parse from Bytes

Parses revert reason from Uint8Array.

```typescript
import * as S from "effect/Schema"
import * as RevertReason from "voltaire-effect/primitives/RevertReason"

// Empty bytes = Unknown
const result = S.decodeSync(RevertReason.Bytes)(new Uint8Array(0))
expect(result.type).toBe("Unknown")
```

## Convert to String

Converts parsed revert reason to human-readable string.

```typescript
import * as S from "effect/Schema"
import * as RevertReason from "voltaire-effect/primitives/RevertReason"

const errorData =
  "0x08c379a00000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000001454657374206572726f72206d657373616765000000000000000000000000000000"

const reason = S.decodeSync(RevertReason.Hex)(errorData)
const str = RevertReason.toString(reason)
expect(typeof str).toBe("string")
expect(str.length).toBeGreaterThan(0)
```
