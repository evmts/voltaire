---
title: '[TS/JS] docs/primitives/bytecode/getBlock.test.ts'
source: 'docs/primitives/bytecode/getBlock.test.ts'
---

> Auto-generated from test file: docs/primitives/bytecode/getBlock.test.ts

```typescript
import { describe, expect, it } from "vitest";

describe("Bytecode.getBlock (docs/primitives/bytecode/getBlock.mdx)", () => {
	describe("Basic Usage", () => {
		it("should get block containing a PC", async () => {
			const { Bytecode } = await import(
				"../../../src/primitives/Bytecode/index.js"
			);

			// PUSH1 0x01, JUMPDEST, PUSH1 0x02, STOP
			const code = Bytecode("0x60015b600200");
			const block = code.getBlock(0);

			expect(block).toBeDefined();
		});

		it("should return undefined for out-of-bounds PC", async () => {
			const { Bytecode } = await import(
				"../../../src/primitives/Bytecode/index.js"
			);

			const code = Bytecode("0x600100");
			const block = code.getBlock(9999);

			expect(block).toBeUndefined();
		});
	});

	describe("Block Properties", () => {
		it("should return block with startPc", async () => {
			const { Bytecode } = await import(
				"../../../src/primitives/Bytecode/index.js"
			);

			const code = Bytecode("0x60015b600200");
			const block = code.getBlock(0);

			if (block) {
				expect(typeof block.startPc).toBe("number");
			}
		});

		it("should return block with endPc", async () => {
			const { Bytecode } = await import(
				"../../../src/primitives/Bytecode/index.js"
			);

			const code = Bytecode("0x60015b600200");
			const block = code.getBlock(0);

			if (block) {
				expect(typeof block.endPc).toBe("number");
				expect(block.endPc).toBeGreaterThan(block.startPc);
			}
		});
	});

	describe("PC Within Block", () => {
		it("should return same block for PCs in same block", async () => {
			const { Bytecode } = await import(
				"../../../src/primitives/Bytecode/index.js"
			);

			// PUSH2 0x1234 at PC 0 (spans PC 0, 1, 2)
			const code = Bytecode("0x611234" + "00");
			const block0 = code.getBlock(0);
			const block1 = code.getBlock(1);
			const block2 = code.getBlock(2);

			// All should be in the same block
			if (block0 && block1 && block2) {
				expect(block0.index).toBe(block1.index);
				expect(block1.index).toBe(block2.index);
			}
		});
	});

	describe("Empty Bytecode", () => {
		it("should return undefined for empty bytecode", async () => {
			const { Bytecode } = await import(
				"../../../src/primitives/Bytecode/index.js"
			);

			const code = Bytecode("0x");
			const block = code.getBlock(0);

			expect(block).toBeUndefined();
		});
	});

	describe("Multiple Blocks", () => {
		it("should return different blocks for different PCs", async () => {
			const { Bytecode } = await import(
				"../../../src/primitives/Bytecode/index.js"
			);

			// JUMPDEST, STOP, JUMPDEST, STOP
			const code = Bytecode("0x5b005b00");
			const block0 = code.getBlock(0);
			const block2 = code.getBlock(2);

			// Different blocks
			if (block0 && block2) {
				expect(block0.startPc).not.toBe(block2.startPc);
			}
		});
	});
});

```
