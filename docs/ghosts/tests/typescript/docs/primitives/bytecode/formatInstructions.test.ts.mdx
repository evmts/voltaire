---
title: '[TS/JS] docs/primitives/bytecode/formatInstructions.test.ts'
source: 'docs/primitives/bytecode/formatInstructions.test.ts'
---

> Auto-generated from test file: docs/primitives/bytecode/formatInstructions.test.ts

```typescript
import { describe, expect, it } from "vitest";

describe("Bytecode.formatInstructions (docs/primitives/bytecode/formatInstructions.mdx)", () => {
	describe("Basic Formatting", () => {
		it("should format instructions to strings", async () => {
			const { Bytecode } = await import(
				"../../../src/primitives/Bytecode/index.js"
			);

			// PUSH1 0x01, PUSH1 0x02, ADD
			const code = Bytecode("0x6001600201");
			const formatted = code.formatInstructions();

			expect(Array.isArray(formatted)).toBe(true);
			expect(formatted.length).toBe(3);
		});

		it("should return array of strings", async () => {
			const { Bytecode } = await import(
				"../../../src/primitives/Bytecode/index.js"
			);

			const code = Bytecode("0x60010100");
			const formatted = code.formatInstructions();

			for (const line of formatted) {
				expect(typeof line).toBe("string");
			}
		});

		it("should handle empty bytecode", async () => {
			const { Bytecode } = await import(
				"../../../src/primitives/Bytecode/index.js"
			);

			const code = Bytecode("0x");
			const formatted = code.formatInstructions();

			expect(formatted).toHaveLength(0);
		});
	});

	describe("Disassembly Output", () => {
		it("should format PUSH instructions with data", async () => {
			const { Bytecode } = await import(
				"../../../src/primitives/Bytecode/index.js"
			);

			const code = Bytecode("0x6001"); // PUSH1 0x01
			const formatted = code.formatInstructions();

			expect(formatted[0]).toContain("PUSH1");
		});

		it("should format non-PUSH instructions", async () => {
			const { Bytecode } = await import(
				"../../../src/primitives/Bytecode/index.js"
			);

			const code = Bytecode("0x01020300"); // ADD, MUL, SUB, STOP
			const formatted = code.formatInstructions();

			expect(formatted.length).toBe(4);
		});
	});

	describe("Complete Disassembly", () => {
		it("should disassemble complex bytecode", async () => {
			const { Bytecode } = await import(
				"../../../src/primitives/Bytecode/index.js"
			);

			// PUSH1 0x80, PUSH1 0x40, MSTORE - common Solidity preamble
			const code = Bytecode("0x6080604052");
			const formatted = code.formatInstructions();

			expect(formatted.length).toBe(3);
			expect(formatted[0]).toContain("PUSH1");
			expect(formatted[1]).toContain("PUSH1");
			// API discrepancy: formatInstruction shows opcode hex (0x52) for non-PUSH
			// instead of mnemonic MSTORE. Only PUSH instructions show names.
			expect(formatted[2]).toContain("0x52");
		});
	});
});

```
