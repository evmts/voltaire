---
title: '[TS/JS] docs/jsonrpc-provider/eth-methods/fees.test.ts'
source: 'docs/jsonrpc-provider/eth-methods/fees.test.ts'
---

> Auto-generated from test file: docs/jsonrpc-provider/eth-methods/fees.test.ts

```typescript
/**
 * Tests for docs/jsonrpc-provider/eth-methods/fees.mdx
 *
 * Tests the Fee Methods documentation with 4 gas/fee related methods.
 * Note: The docs indicate this page is a placeholder with AI-generated examples.
 */
import { describe, expect, it } from "vitest";

describe("Fee Methods Documentation", () => {
	describe("eth_gasPrice", () => {
		it("creates request with no parameters", async () => {
			const { Rpc } = await import("../../../src/jsonrpc/index.js");

			const request = Rpc.Eth.GasPriceRequest();

			expect(request.method).toBe("eth_gasPrice");
			expect(request.params).toBeUndefined();
		});
	});

	describe("eth_maxPriorityFeePerGas", () => {
		it("creates request with no parameters", async () => {
			const { Rpc } = await import("../../../src/jsonrpc/index.js");

			const request = Rpc.Eth.MaxPriorityFeePerGasRequest();

			expect(request.method).toBe("eth_maxPriorityFeePerGas");
		});
	});

	describe("eth_feeHistory", () => {
		it("creates request with block count, newest block, and percentiles", async () => {
			const { Rpc } = await import("../../../src/jsonrpc/index.js");

			const request = Rpc.Eth.FeeHistoryRequest("0xa", "latest", [25, 50, 75]);

			expect(request.method).toBe("eth_feeHistory");
			expect(request.params?.[0]).toBe("0xa"); // 10 blocks
			expect(request.params?.[1]).toBe("latest");
			expect(request.params?.[2]).toEqual([25, 50, 75]);
		});

		it("creates request with different block counts", async () => {
			const { Rpc } = await import("../../../src/jsonrpc/index.js");

			// 100 blocks
			const request = Rpc.Eth.FeeHistoryRequest("0x64", "latest", [10, 50, 90]);

			expect(request.params?.[0]).toBe("0x64");
		});

		it("creates request with empty percentiles", async () => {
			const { Rpc } = await import("../../../src/jsonrpc/index.js");

			const request = Rpc.Eth.FeeHistoryRequest("0xa", "latest", []);

			expect(request.params?.[2]).toEqual([]);
		});
	});

	describe("eth_blobBaseFee", () => {
		it("creates request with no parameters", async () => {
			const { Rpc } = await import("../../../src/jsonrpc/index.js");

			const request = Rpc.Eth.BlobBaseFeeRequest();

			expect(request.method).toBe("eth_blobBaseFee");
		});
	});

	describe("Usage Patterns from Docs", () => {
		it("demonstrates estimate transaction costs pattern", async () => {
			const { Rpc } = await import("../../../src/jsonrpc/index.js");

			// Get gas price for legacy transactions
			const gasPriceReq = Rpc.Eth.GasPriceRequest();
			expect(gasPriceReq.method).toBe("eth_gasPrice");

			// Pattern from docs: cost = gasPrice * gasLimit
		});

		it("demonstrates calculate EIP-1559 fees pattern", async () => {
			const { Rpc } = await import("../../../src/jsonrpc/index.js");

			// Get base fee from latest block
			const blockReq = Rpc.Eth.GetBlockByNumberRequest("latest", false);
			expect(blockReq.method).toBe("eth_getBlockByNumber");

			// Get suggested priority fee
			const priorityFeeReq = Rpc.Eth.MaxPriorityFeePerGasRequest();
			expect(priorityFeeReq.method).toBe("eth_maxPriorityFeePerGas");

			// Pattern: maxFeePerGas = baseFee * 2 + maxPriorityFeePerGas
		});

		it("demonstrates monitor gas prices pattern", async () => {
			const { Rpc } = await import("../../../src/jsonrpc/index.js");

			// Get fee history for last 100 blocks
			const historyReq = Rpc.Eth.FeeHistoryRequest("0x64", "latest", [
				10, 50, 90,
			]);

			expect(historyReq.method).toBe("eth_feeHistory");
			expect(historyReq.params?.[2]).toEqual([10, 50, 90]); // Low, medium, high percentiles
		});
	});
});

```
