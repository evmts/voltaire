---
title: '[Zig] lib/c-kzg-4844/bindings/zig/root.zig'
source: 'lib/c-kzg-4844/bindings/zig/root.zig'
---

> Auto-generated from Zig tests in: lib/c-kzg-4844/bindings/zig/root.zig

### constants are defined

```zig
test "constants are defined" {
    try testing.expect(BYTES_PER_BLOB == 131072);
    try testing.expect(BYTES_PER_CELL == 2048);
    try testing.expect(BYTES_PER_COMMITMENT == 48);
    try testing.expect(BYTES_PER_FIELD_ELEMENT == 32);
    try testing.expect(BYTES_PER_PROOF == 48);
    try testing.expect(FIELD_ELEMENTS_PER_BLOB == 4096);
    try testing.expect(FIELD_ELEMENTS_PER_CELL == 64);
    try testing.expect(CELLS_PER_EXT_BLOB == 128);
}
```

### type sizes are correct

```zig
test "type sizes are correct" {
    try testing.expect(@sizeOf(Bytes32) == 32);
    try testing.expect(@sizeOf(Bytes48) == 48);
    try testing.expect(@sizeOf(KZGCommitment) == 48);
    try testing.expect(@sizeOf(KZGProof) == 48);
    try testing.expect(@sizeOf(Blob) == BYTES_PER_BLOB);
    try testing.expect(@sizeOf(Cell) == BYTES_PER_CELL);
}
```

### error handling

```zig
test "error handling" {
    const error_bad_args = KZGError.BadArgs;
    const error_internal = KZGError.InternalError;
    const error_malloc = KZGError.MallocError;
    const error_unknown = KZGError.UnknownError;

    try testing.expect(error_bad_args == KZGError.BadArgs);
    try testing.expect(error_internal == KZGError.InternalError);
    try testing.expect(error_malloc == KZGError.MallocError);
    try testing.expect(error_unknown == KZGError.UnknownError);
}
```

### embedded trusted setup

```zig
test "embedded trusted setup" {
    try testing.expect(embedded_trusted_setup.len > 800000);
    try testing.expect(std.mem.startsWith(u8, embedded_trusted_setup, "4096\n65\n"));
}
```

### end to end KZG with embedded setup

```zig
test "end to end KZG with embedded setup" {
    try loadTrustedSetupFromText(embedded_trusted_setup, 0);
    defer freeTrustedSetup() catch unreachable;

    var test_blob: Blob = undefined;
    var prng = std.Random.DefaultPrng.init(42);
    const random = prng.random();

    random.bytes(&test_blob);
    for (0..FIELD_ELEMENTS_PER_BLOB) |i| {
        test_blob[i * BYTES_PER_FIELD_ELEMENT] = 0;
    }

    const commitment = try blobToKZGCommitment(&test_blob);
    const proof = try computeBlobKZGProof(&test_blob, &commitment);
    const is_valid = try verifyBlobKZGProof(&test_blob, &commitment, &proof);
    try testing.expect(is_valid);

    var wrong_proof = proof;
    wrong_proof[0] = wrong_proof[0] ^ 1;
    const should_fail = verifyBlobKZGProof(&test_blob, &commitment, &wrong_proof) catch false;
    try testing.expect(!should_fail);
}
```

### end to end KZG functionality with file

```zig
test "end to end KZG functionality with file" {
    try loadTrustedSetupFile("src/trusted_setup.txt", 0);
    defer freeTrustedSetup() catch unreachable;

    var test_blob: Blob = undefined;
    var prng = std.Random.DefaultPrng.init(42);
    const random = prng.random();

    random.bytes(&test_blob);
    for (0..FIELD_ELEMENTS_PER_BLOB) |i| {
        test_blob[i * BYTES_PER_FIELD_ELEMENT] = 0;
    }

    const commitment = try blobToKZGCommitment(&test_blob);
    const proof = try computeBlobKZGProof(&test_blob, &commitment);
    const is_valid = try verifyBlobKZGProof(&test_blob, &commitment, &proof);
    try testing.expect(is_valid);

    var wrong_proof = proof;
    wrong_proof[0] = wrong_proof[0] ^ 1;
    const should_fail = verifyBlobKZGProof(&test_blob, &commitment, &wrong_proof) catch false;
    try testing.expect(!should_fail);
}
```
