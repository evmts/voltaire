---
title: '[Zig] src/primitives/base64.zig'
source: 'src/primitives/base64.zig'
---

> Auto-generated from Zig tests in: src/primitives/base64.zig

### standard encode

```zig
test "standard encode" {
    const data = "Hello";
    const encoded = try encode(testing.allocator, data);
    defer testing.allocator.free(encoded);
    try testing.expectEqualStrings("SGVsbG8=", encoded);
}
```

### standard decode

```zig
test "standard decode" {
    const encoded = "SGVsbG8=";
    const decoded = try decode(testing.allocator, encoded);
    defer testing.allocator.free(decoded);
    try testing.expectEqualStrings("Hello", decoded);
}
```

### standard round-trip

```zig
test "standard round-trip" {
    const data = "The quick brown fox jumps over the lazy dog";
    const encoded = try encode(testing.allocator, data);
    defer testing.allocator.free(encoded);

    const decoded = try decode(testing.allocator, encoded);
    defer testing.allocator.free(decoded);

    try testing.expectEqualStrings(data, decoded);
}
```

### url-safe encode

```zig
test "url-safe encode" {
    const data = &[_]u8{ 0xFF, 0xFE, 0xFD };
    const encoded = try encodeUrlSafe(testing.allocator, data);
    defer testing.allocator.free(encoded);

    // Should not contain + or / or =
    for (encoded) |c| {
        try testing.expect(c != '+');
        try testing.expect(c != '/');
        try testing.expect(c != '=');
    }
}
```

### url-safe round-trip

```zig
test "url-safe round-trip" {
    const data = &[_]u8{ 1, 2, 3, 4, 5, 0xFF, 0xFE };
    const encoded = try encodeUrlSafe(testing.allocator, data);
    defer testing.allocator.free(encoded);

    const decoded = try decodeUrlSafe(testing.allocator, encoded);
    defer testing.allocator.free(decoded);

    try testing.expectEqualSlices(u8, data, decoded);
}
```

### empty input

```zig
test "empty input" {
    const empty = "";
    const encoded = try encode(testing.allocator, empty);
    defer testing.allocator.free(encoded);
    try testing.expectEqualStrings("", encoded);

    const decoded = try decode(testing.allocator, "");
    defer testing.allocator.free(decoded);
    try testing.expectEqualStrings("", decoded);
}
```

### RFC 4648 test vectors

```zig
test "RFC 4648 test vectors" {
    const vectors = [_]struct { input: []const u8, output: []const u8 }{
        .{ .input = "", .output = "" },
        .{ .input = "f", .output = "Zg==" },
        .{ .input = "fo", .output = "Zm8=" },
        .{ .input = "foo", .output = "Zm9v" },
        .{ .input = "foob", .output = "Zm9vYg==" },
        .{ .input = "fooba", .output = "Zm9vYmE=" },
        .{ .input = "foobar", .output = "Zm9vYmFy" },
    };

    for (vectors) |v| {
        const encoded = try encode(testing.allocator, v.input);
        defer testing.allocator.free(encoded);
        try testing.expectEqualStrings(v.output, encoded);

        const decoded = try decode(testing.allocator, v.output);
        defer testing.allocator.free(decoded);
        try testing.expectEqualStrings(v.input, decoded);
    }
}
```

### calcEncodedSize

```zig
test "calcEncodedSize" {
    try testing.expectEqual(@as(usize, 0), calcEncodedSize(0));
    try testing.expectEqual(@as(usize, 4), calcEncodedSize(1));
    try testing.expectEqual(@as(usize, 4), calcEncodedSize(2));
    try testing.expectEqual(@as(usize, 4), calcEncodedSize(3));
    try testing.expectEqual(@as(usize, 8), calcEncodedSize(4));
    try testing.expectEqual(@as(usize, 8), calcEncodedSize(5));
}
```

### encodeString

```zig
test "encodeString" {
    const encoded = try encodeString(testing.allocator, "Hello");
    defer testing.allocator.free(encoded);
    try testing.expectEqualStrings("SGVsbG8=", encoded);

    const encoded2 = try encodeString(testing.allocator, "Hello, world!");
    defer testing.allocator.free(encoded2);
    try testing.expectEqualStrings("SGVsbG8sIHdvcmxkIQ==", encoded2);
}
```

### decodeToString

```zig
test "decodeToString" {
    const decoded = try decodeToString(testing.allocator, "SGVsbG8=");
    defer testing.allocator.free(decoded);
    try testing.expectEqualStrings("Hello", decoded);

    const decoded2 = try decodeToString(testing.allocator, "SGVsbG8sIHdvcmxkIQ==");
    defer testing.allocator.free(decoded2);
    try testing.expectEqualStrings("Hello, world!", decoded2);
}
```

### isValid - valid strings

```zig
test "isValid - valid strings" {
    try testing.expect(isValid(""));
    try testing.expect(isValid("SGVsbG8="));
    try testing.expect(isValid("SGVsbG8sIHdvcmxkIQ=="));
    try testing.expect(isValid("Zm9v"));
    try testing.expect(isValid("Zm9vYg=="));
}
```

### isValid - invalid strings

```zig
test "isValid - invalid strings" {
    try testing.expect(!isValid("!!!"));
    try testing.expect(!isValid("SGVsbG8")); // Missing padding
    try testing.expect(!isValid("SGVs=bG8")); // Padding in middle
    try testing.expect(!isValid("SGVsbG8====")); // Too much padding
    try testing.expect(!isValid("SGVsbG8@")); // Invalid char
}
```

### encodeStringUrlSafe

```zig
test "encodeStringUrlSafe" {
    const encoded = try encodeStringUrlSafe(testing.allocator, "test");
    defer testing.allocator.free(encoded);

    // Should not contain + / or =
    for (encoded) |c| {
        try testing.expect(c != '+');
        try testing.expect(c != '/');
        try testing.expect(c != '=');
    }

    const decoded = try decodeUrlSafeToString(testing.allocator, encoded);
    defer testing.allocator.free(decoded);
    try testing.expectEqualStrings("test", decoded);
}
```

### decodeUrlSafeToString

```zig
test "decodeUrlSafeToString" {
    const data = &[_]u8{ 72, 101, 108, 108, 111 }; // "Hello"
    const encoded = try encodeUrlSafe(testing.allocator, data);
    defer testing.allocator.free(encoded);

    const decoded = try decodeUrlSafeToString(testing.allocator, encoded);
    defer testing.allocator.free(decoded);
    try testing.expectEqualStrings("Hello", decoded);
}
```

### isValidUrlSafe - valid strings

```zig
test "isValidUrlSafe - valid strings" {
    try testing.expect(isValidUrlSafe(""));
    try testing.expect(isValidUrlSafe("SGVsbG8"));
    try testing.expect(isValidUrlSafe("YWJj"));
    try testing.expect(isValidUrlSafe("_-_-"));
}
```

### isValidUrlSafe - invalid strings

```zig
test "isValidUrlSafe - invalid strings" {
    try testing.expect(!isValidUrlSafe("SGVsbG8=")); // Has padding
    try testing.expect(!isValidUrlSafe("+++")); // Has +
    try testing.expect(!isValidUrlSafe("///")); // Has /
    try testing.expect(!isValidUrlSafe("SGVs@bG8")); // Invalid char
}
```

### calcEncodedSizeUrlSafe

```zig
test "calcEncodedSizeUrlSafe" {
    try testing.expectEqual(@as(usize, 0), calcEncodedSizeUrlSafe(0));
    try testing.expectEqual(@as(usize, 2), calcEncodedSizeUrlSafe(1));
    try testing.expectEqual(@as(usize, 3), calcEncodedSizeUrlSafe(2));
    try testing.expectEqual(@as(usize, 4), calcEncodedSizeUrlSafe(3));
    try testing.expectEqual(@as(usize, 6), calcEncodedSizeUrlSafe(4));
}
```

### string round-trip

```zig
test "string round-trip" {
    const strings = [_][]const u8{ "", "a", "Hello", "Hello, world!" };

    for (strings) |str| {
        const encoded = try encodeString(testing.allocator, str);
        defer testing.allocator.free(encoded);

        const decoded = try decodeToString(testing.allocator, encoded);
        defer testing.allocator.free(decoded);

        try testing.expectEqualStrings(str, decoded);
    }
}
```

### url-safe string round-trip

```zig
test "url-safe string round-trip" {
    const strings = [_][]const u8{ "", "test", "Hello", "ðŸš€" };

    for (strings) |str| {
        const encoded = try encodeStringUrlSafe(testing.allocator, str);
        defer testing.allocator.free(encoded);

        const decoded = try decodeUrlSafeToString(testing.allocator, encoded);
        defer testing.allocator.free(decoded);

        try testing.expectEqualStrings(str, decoded);
    }
}
```
