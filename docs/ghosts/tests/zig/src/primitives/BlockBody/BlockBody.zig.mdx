---
title: '[Zig] src/primitives/BlockBody/BlockBody.zig'
source: 'src/primitives/BlockBody/BlockBody.zig'
---

> Auto-generated from Zig tests in: src/primitives/BlockBody/BlockBody.zig

### init - creates empty body

```zig
test "init - creates empty body" {
    const body = init();
    try std.testing.expectEqual(@as(usize, 0), body.transactions.len);
    try std.testing.expectEqual(@as(usize, 0), body.ommers.len);
    try std.testing.expect(body.withdrawals == null);
}
```

### postMerge - creates body without ommers

```zig
test "postMerge - creates body without ommers" {
    const body = postMerge();
    try std.testing.expectEqual(@as(usize, 0), body.ommers.len);
}
```

### postShanghai - creates body with withdrawals field

```zig
test "postShanghai - creates body with withdrawals field" {
    const body = postShanghai();
    try std.testing.expect(body.withdrawals != null);
    try std.testing.expectEqual(@as(usize, 0), body.withdrawals.?.len);
}
```

### isPostMerge - with ommers

```zig
test "isPostMerge - with ommers" {
    var body = init();
    const uncles = [_]UncleHeader{UncleHeader{}};
    body.ommers = &uncles;
    try std.testing.expect(!isPostMerge(&body));
}
```

### isPostMerge - without ommers

```zig
test "isPostMerge - without ommers" {
    const body = init();
    try std.testing.expect(isPostMerge(&body));
}
```

### hasWithdrawals - pre-Shanghai body

```zig
test "hasWithdrawals - pre-Shanghai body" {
    const body = init();
    try std.testing.expect(!hasWithdrawals(&body));
}
```

### hasWithdrawals - Shanghai body

```zig
test "hasWithdrawals - Shanghai body" {
    const body = postShanghai();
    try std.testing.expect(hasWithdrawals(&body));
}
```

### transactionCount - empty body

```zig
test "transactionCount - empty body" {
    const body = init();
    try std.testing.expectEqual(@as(usize, 0), transactionCount(&body));
}
```

### ommerCount - empty body

```zig
test "ommerCount - empty body" {
    const body = init();
    try std.testing.expectEqual(@as(usize, 0), ommerCount(&body));
}
```

### withdrawalCount - pre-Shanghai

```zig
test "withdrawalCount - pre-Shanghai" {
    const body = init();
    try std.testing.expect(withdrawalCount(&body) == null);
}
```

### withdrawalCount - Shanghai empty

```zig
test "withdrawalCount - Shanghai empty" {
    const body = postShanghai();
    try std.testing.expectEqual(@as(usize, 0), withdrawalCount(&body).?);
}
```

### rlpEncode - empty body

```zig
test "rlpEncode - empty body" {
    const allocator = std.testing.allocator;
    const body = init();
    const encoded = try rlpEncode(&body, allocator);
    defer allocator.free(encoded);

    // Should encode as [[],[]] (empty tx list, empty ommer list)
    // 0xc2 0xc0 0xc0
    try std.testing.expectEqual(@as(usize, 3), encoded.len);
    try std.testing.expectEqual(@as(u8, 0xc2), encoded[0]);
    try std.testing.expectEqual(@as(u8, 0xc0), encoded[1]);
    try std.testing.expectEqual(@as(u8, 0xc0), encoded[2]);
}
```

### rlpEncode - post-Shanghai empty body

```zig
test "rlpEncode - post-Shanghai empty body" {
    const allocator = std.testing.allocator;
    const body = postShanghai();
    const encoded = try rlpEncode(&body, allocator);
    defer allocator.free(encoded);

    // Should encode as [[],[],[]] (empty tx list, empty ommer list, empty withdrawals)
    // 0xc3 0xc0 0xc0 0xc0
    try std.testing.expectEqual(@as(usize, 4), encoded.len);
    try std.testing.expectEqual(@as(u8, 0xc3), encoded[0]);
}
```

### ommersHash - empty ommers

```zig
test "ommersHash - empty ommers" {
    const allocator = std.testing.allocator;
    const body = init();
    const hash_result = try ommersHash(&body, allocator);

    // Empty ommers hash: keccak256(0xc0) = 0x1dcc4de8...
    const expected: Hash.Hash = .{
        0x1d, 0xcc, 0x4d, 0xe8, 0xde, 0xc7, 0x5d, 0x7a,
        0xab, 0x85, 0xb5, 0x67, 0xb6, 0xcc, 0xd4, 0x1a,
        0xd3, 0x12, 0x45, 0x1b, 0x94, 0x8a, 0x74, 0x13,
        0xf0, 0xa1, 0x42, 0xfd, 0x40, 0xd4, 0x93, 0x47,
    };
    try std.testing.expectEqualSlices(u8, &expected, &hash_result);
}
```

### equals - same body

```zig
test "equals - same body" {
    const body = init();
    try std.testing.expect(equals(&body, &body));
}
```

### equals - different withdrawals presence

```zig
test "equals - different withdrawals presence" {
    const body1 = init();
    const body2 = postShanghai();
    try std.testing.expect(!equals(&body1, &body2));
}
```

### clone - creates copy

```zig
test "clone - creates copy" {
    const original = postShanghai();
    const copy = clone(&original);
    try std.testing.expect(copy.withdrawals != null);
}
```
