---
title: '[Zig] src/evm/precompiles/bn254_pairing.zig'
source: 'src/evm/precompiles/bn254_pairing.zig'
---

> Auto-generated from Zig tests in: src/evm/precompiles/bn254_pairing.zig

### bn254Pairing - empty input

```zig
test "bn254Pairing - empty input" {
    const testing = std.testing;
    const allocator = testing.allocator;

    // Empty input = pairing of zero points = success
    const input = [_]u8{};
    const result = try execute(allocator, &input, 1000000);
    defer result.deinit(allocator);

    try testing.expectEqual(@as(usize, 32), result.output.len);
    try testing.expectEqual(@as(u8, 1), result.output[31]);
}
```

### bn254Pairing - invalid input not multiple of 192

```zig
test "bn254Pairing - invalid input not multiple of 192" {
    const testing = std.testing;
    const allocator = testing.allocator;

    const input = [_]u8{0} ** 191;
    const result = execute(allocator, &input, 1000000);
    try testing.expectError(error.InvalidInput, result);
}
```

### bn254Pairing - single pair gas cost

```zig
test "bn254Pairing - single pair gas cost" {
    const testing = std.testing;
    const allocator = testing.allocator;

    const input = [_]u8{0} ** 192;
    const expected_gas = BASE_GAS + PER_POINT_GAS * 1;

    const result = try execute(allocator, &input, 1000000);
    defer result.deinit(allocator);

    try testing.expectEqual(expected_gas, result.gas_used);
}
```

### bn254Pairing - two pairs gas cost

```zig
test "bn254Pairing - two pairs gas cost" {
    const testing = std.testing;
    const allocator = testing.allocator;

    const input = [_]u8{0} ** 384;
    const expected_gas = BASE_GAS + PER_POINT_GAS * 2;

    const result = try execute(allocator, &input, 1000000);
    defer result.deinit(allocator);

    try testing.expectEqual(expected_gas, result.gas_used);
}
```

### bn254Pairing - out of gas

```zig
test "bn254Pairing - out of gas" {
    const testing = std.testing;
    const allocator = testing.allocator;

    const input = [_]u8{0} ** 192;
    const required_gas = BASE_GAS + PER_POINT_GAS * 1;

    const result = execute(allocator, &input, required_gas - 1);
    try testing.expectError(error.OutOfGas, result);
}
```

### bn254Pairing - exact gas

```zig
test "bn254Pairing - exact gas" {
    const testing = std.testing;
    const allocator = testing.allocator;

    const input = [_]u8{0} ** 192;
    const required_gas = BASE_GAS + PER_POINT_GAS * 1;

    const result = try execute(allocator, &input, required_gas);
    defer result.deinit(allocator);

    try testing.expectEqual(required_gas, result.gas_used);
}
```

### bn254Pairing - gas constants

```zig
test "bn254Pairing - gas constants" {
    const testing = std.testing;

    try testing.expectEqual(@as(u64, 45000), BASE_GAS);
    try testing.expectEqual(@as(u64, 34000), PER_POINT_GAS);
}
```

### bn254Pairing - output size

```zig
test "bn254Pairing - output size" {
    const testing = std.testing;
    const allocator = testing.allocator;

    const input = [_]u8{0} ** 192;
    const result = try execute(allocator, &input, 1000000);
    defer result.deinit(allocator);

    try testing.expectEqual(@as(usize, 32), result.output.len);
}
```

### bn254Pairing - empty input gas cost

```zig
test "bn254Pairing - empty input gas cost" {
    const testing = std.testing;
    const allocator = testing.allocator;

    const input = [_]u8{};
    const expected_gas = BASE_GAS + PER_POINT_GAS * 0;

    const result = try execute(allocator, &input, 1000000);
    defer result.deinit(allocator);

    try testing.expectEqual(expected_gas, result.gas_used);
}
```

### bn254Pairing - geth jeff1 valid pairing placeholder

```zig
test "bn254Pairing - geth jeff1 valid pairing placeholder" {
    const testing = std.testing;

    const input_hex = "1c76476f4def4bb94541d57ebba1193381ffa7aa76ada664dd31c16024c43f593034dd2920f673e204fee2811c678745fc819b55d3e9d294e45c9b03a76aef41209dd15e723af4f0fca5c8b65b8e5f8cd81cf46bcc3f8e11ba9cb3eff71f1e3aae0fe1a6d60b1fdb2f8ce48e66c9c63f2cf798c66e0f1b68d6e5f1f5dd27a0c9c17f0e5b1e3a8b11c8b1e5e1e5e1e1e5e1e1e5e1e1e5e1e1e5e1e1e5e1";
    _ = input_hex;

    // This test requires actual pairing computation
    // Placeholder for full pairing test vectors
    try testing.expect(true);
}
```

### bn254Pairing - geth empty returns success

```zig
test "bn254Pairing - geth empty returns success" {
    const testing = std.testing;
    const allocator = testing.allocator;

    const input = [_]u8{};
    const result = try execute(allocator, &input, 1000000);
    defer result.deinit(allocator);

    try testing.expectEqual(@as(usize, 32), result.output.len);
    try testing.expectEqual(@as(u8, 1), result.output[31]);
    try testing.expectEqual(BASE_GAS, result.gas_used);
}
```

### bn254Pairing - geth one_point invalid must fail

```zig
test "bn254Pairing - geth one_point invalid must fail" {
    const testing = std.testing;
    const allocator = testing.allocator;

    const input = [_]u8{0} ** 128;
    const result = execute(allocator, &input, 1000000);
    try testing.expectError(error.InvalidInput, result);
}
```

### bn254Pairing - single valid pair gas calculation

```zig
test "bn254Pairing - single valid pair gas calculation" {
    const testing = std.testing;
    const allocator = testing.allocator;

    const input = [_]u8{0} ** 192;
    const expected_gas = BASE_GAS + PER_POINT_GAS;

    // Zero-byte inputs are not valid curve points, so we expect InvalidPairing
    const result = execute(allocator, &input, expected_gas);
    try testing.expectError(error.InvalidPairing, result);
}
```

### bn254Pairing - two pairs gas calculation

```zig
test "bn254Pairing - two pairs gas calculation" {
    const testing = std.testing;
    const allocator = testing.allocator;

    const input = [_]u8{0} ** 384;
    const expected_gas = BASE_GAS + 2 * PER_POINT_GAS;

    // Zero-byte inputs are not valid curve points, so we expect InvalidPairing
    const result = execute(allocator, &input, expected_gas);
    try testing.expectError(error.InvalidPairing, result);
}
```

### bn254Pairing - three pairs gas calculation

```zig
test "bn254Pairing - three pairs gas calculation" {
    const testing = std.testing;
    const allocator = testing.allocator;

    const input = [_]u8{0} ** 576;
    const expected_gas = BASE_GAS + 3 * PER_POINT_GAS;

    // Zero-byte inputs are not valid curve points, so we expect InvalidPairing
    const result = execute(allocator, &input, expected_gas);
    try testing.expectError(error.InvalidPairing, result);
}
```

### bn254Pairing - four pairs gas calculation

```zig
test "bn254Pairing - four pairs gas calculation" {
    const testing = std.testing;
    const allocator = testing.allocator;

    const input = [_]u8{0} ** 768;
    const expected_gas = BASE_GAS + 4 * PER_POINT_GAS;

    // Zero-byte inputs are not valid curve points, so we expect InvalidPairing
    const result = execute(allocator, &input, expected_gas);
    try testing.expectError(error.InvalidPairing, result);
}
```

### bn254Pairing - five pairs gas calculation

```zig
test "bn254Pairing - five pairs gas calculation" {
    const testing = std.testing;
    const allocator = testing.allocator;

    const input = [_]u8{0} ** 960;
    const expected_gas = BASE_GAS + 5 * PER_POINT_GAS;

    // Zero-byte inputs are not valid curve points, so we expect InvalidPairing
    const result = execute(allocator, &input, expected_gas);
    try testing.expectError(error.InvalidPairing, result);
}
```

### bn254Pairing - ten pairs gas calculation

```zig
test "bn254Pairing - ten pairs gas calculation" {
    const testing = std.testing;
    const allocator = testing.allocator;

    const input = [_]u8{0} ** 1920;
    const expected_gas = BASE_GAS + 10 * PER_POINT_GAS;

    // Zero-byte inputs are not valid curve points, so we expect InvalidPairing
    const result = execute(allocator, &input, expected_gas);
    try testing.expectError(error.InvalidPairing, result);
}
```

### bn254Pairing - invalid length 1 byte

```zig
test "bn254Pairing - invalid length 1 byte" {
    const testing = std.testing;
    const allocator = testing.allocator;

    const input = [_]u8{0};
    const result = execute(allocator, &input, 1000000);
    try testing.expectError(error.InvalidInput, result);
}
```

### bn254Pairing - invalid length 191 bytes

```zig
test "bn254Pairing - invalid length 191 bytes" {
    const testing = std.testing;
    const allocator = testing.allocator;

    const input = [_]u8{0} ** 191;
    const result = execute(allocator, &input, 1000000);
    try testing.expectError(error.InvalidInput, result);
}
```

### bn254Pairing - invalid length 193 bytes

```zig
test "bn254Pairing - invalid length 193 bytes" {
    const testing = std.testing;
    const allocator = testing.allocator;

    const input = [_]u8{0} ** 193;
    const result = execute(allocator, &input, 1000000);
    try testing.expectError(error.InvalidInput, result);
}
```

### bn254Pairing - invalid length 383 bytes

```zig
test "bn254Pairing - invalid length 383 bytes" {
    const testing = std.testing;
    const allocator = testing.allocator;

    const input = [_]u8{0} ** 383;
    const result = execute(allocator, &input, 1000000);
    try testing.expectError(error.InvalidInput, result);
}
```

### bn254Pairing - invalid length 385 bytes

```zig
test "bn254Pairing - invalid length 385 bytes" {
    const testing = std.testing;
    const allocator = testing.allocator;

    const input = [_]u8{0} ** 385;
    const result = execute(allocator, &input, 1000000);
    try testing.expectError(error.InvalidInput, result);
}
```

### bn254Pairing - invalid length 575 bytes

```zig
test "bn254Pairing - invalid length 575 bytes" {
    const testing = std.testing;
    const allocator = testing.allocator;

    const input = [_]u8{0} ** 575;
    const result = execute(allocator, &input, 1000000);
    try testing.expectError(error.InvalidInput, result);
}
```

### bn254Pairing - invalid length 577 bytes

```zig
test "bn254Pairing - invalid length 577 bytes" {
    const testing = std.testing;
    const allocator = testing.allocator;

    const input = [_]u8{0} ** 577;
    const result = execute(allocator, &input, 1000000);
    try testing.expectError(error.InvalidInput, result);
}
```

### bn254Pairing - gas scaling property

```zig
test "bn254Pairing - gas scaling property" {
    const testing = std.testing;

    const k_values = [_]u64{ 0, 1, 2, 5, 10, 20 };
    for (k_values) |k| {
        const expected = BASE_GAS + k * PER_POINT_GAS;
        try testing.expectEqual(expected, BASE_GAS + k * PER_POINT_GAS);
    }
}
```

### bn254Pairing - output always 32 bytes for empty input

```zig
test "bn254Pairing - output always 32 bytes for empty input" {
    const testing = std.testing;
    const allocator = testing.allocator;

    // Only empty input produces valid pairing (zero points = success)
    // Non-zero sizes with zero-byte content produce InvalidPairing
    const input = [_]u8{};
    const gas = BASE_GAS;

    const result = try execute(allocator, &input, gas);
    defer result.deinit(allocator);
    try testing.expectEqual(@as(usize, 32), result.output.len);
}
```

### bn254Pairing - out of gas for single pair

```zig
test "bn254Pairing - out of gas for single pair" {
    const testing = std.testing;
    const allocator = testing.allocator;

    const input = [_]u8{0} ** 192;
    const required_gas = BASE_GAS + PER_POINT_GAS;
    const result = execute(allocator, &input, required_gas - 1);
    try testing.expectError(error.OutOfGas, result);
}
```

### bn254Pairing - out of gas for two pairs

```zig
test "bn254Pairing - out of gas for two pairs" {
    const testing = std.testing;
    const allocator = testing.allocator;

    const input = [_]u8{0} ** 384;
    const required_gas = BASE_GAS + 2 * PER_POINT_GAS;
    const result = execute(allocator, &input, required_gas - 1);
    try testing.expectError(error.OutOfGas, result);
}
```

### bn254Pairing - out of gas for ten pairs

```zig
test "bn254Pairing - out of gas for ten pairs" {
    const testing = std.testing;
    const allocator = testing.allocator;

    const input = [_]u8{0} ** 1920;
    const required_gas = BASE_GAS + 10 * PER_POINT_GAS;
    const result = execute(allocator, &input, required_gas - 1);
    try testing.expectError(error.OutOfGas, result);
}
```

### bn254Pairing - exact gas for multiple sizes returns InvalidPairing

```zig
test "bn254Pairing - exact gas for multiple sizes returns InvalidPairing" {
    const testing = std.testing;
    const allocator = testing.allocator;

    // Zero-byte inputs are not valid curve points for any non-zero size
    const pairs = [_]usize{ 1, 2, 3, 5, 10 };
    for (pairs) |k| {
        const input = try allocator.alloc(u8, k * 192);
        defer allocator.free(input);
        @memset(input, 0);

        const required_gas = BASE_GAS + k * PER_POINT_GAS;
        const result = execute(allocator, input, required_gas);
        try testing.expectError(error.InvalidPairing, result);
    }
}
```
