---
title: How to Mine Blocks on Demand
description: Control block production for precise testing scenarios.
---

## Goal

Manually mine blocks to control transaction ordering, test block-dependent logic, or batch transactions.

## Mine Single Block

```typescript
import { createProvider } from '@tevm/voltaire/provider'

const provider = createProvider('http://localhost:8545')

// Mine one block
await provider.request({
  method: 'evm_mine',
  params: []
})
```

## Mine Multiple Blocks (Anvil)

```typescript
// Mine 10 blocks
await provider.request({
  method: 'anvil_mine',
  params: [10]
})

// Mine 10 blocks with 5-second intervals
await provider.request({
  method: 'anvil_mine',
  params: [10, 5]
})
```

## Mine Multiple Blocks (Hardhat)

```typescript
// Mine 100 blocks (hex-encoded)
await provider.request({
  method: 'hardhat_mine',
  params: ['0x64'] // 100 in hex
})

// Mine with interval
await provider.request({
  method: 'hardhat_mine',
  params: ['0x64', '0xc'] // 100 blocks, 12 seconds each
})
```

## Disable Auto-Mining

```typescript
// Disable automine
await provider.request({
  method: 'evm_setAutomine',
  params: [false]
})

// Queue multiple transactions
await provider.request({
  method: 'eth_sendTransaction',
  params: [{ from: addr1, to: addr2, value: '0x1' }]
})
await provider.request({
  method: 'eth_sendTransaction',
  params: [{ from: addr1, to: addr3, value: '0x2' }]
})

// Mine all in one block
await provider.request({
  method: 'evm_mine',
  params: []
})

// Re-enable automine
await provider.request({
  method: 'evm_setAutomine',
  params: [true]
})
```

## Interval Mining

```typescript
// Mine every 12 seconds (like mainnet)
await provider.request({
  method: 'evm_setIntervalMining',
  params: [12]
})

// Disable interval mining
await provider.request({
  method: 'evm_setIntervalMining',
  params: [0]
})
```

## Get Current Block Number

```typescript
const blockNum = await provider.request({
  method: 'eth_blockNumber',
  params: []
})
console.log('Block:', parseInt(blockNum, 16))
```
