---
title: JSONRPCProvider
description: Type-safe Ethereum JSON-RPC provider with branded primitives and async generator events
---

# JSONRPCProvider

Type-safe Ethereum JSON-RPC provider interface with method-based API, branded primitive types, and async generator events. All types auto-generated from the [official OpenRPC specification](https://github.com/ethereum/execution-apis).

<Tip>
New to JSONRPCProvider? Start with [Getting Started](/jsonrpc-provider/getting-started) for installation and your first requests.
</Tip>

## Overview

JSONRPCProvider implements a provider interface for interacting with Ethereum nodes via JSON-RPC. Unlike standard EIP-1193 providers, it provides:

- **Method-based API** - Call methods directly: `provider.eth_blockNumber()`
- **Branded primitives** - Type-safe params using Address, Hash, Hex, Quantity
- **Never throws** - Errors returned as values, not exceptions
- **Async generators** - Events consumed via `for await` loops
- **Auto-generated types** - Generated from ethereum/execution-apis OpenRPC spec

### Provider Interface

```typescript
export interface Provider {
  // 65 JSON-RPC methods (eth, debug, engine)
  eth_blockNumber(): Promise<Response<Quantity>>;
  eth_getBalance(address: Address, block: BlockTag): Promise<Response<Quantity>>;
  eth_call(params: CallParams): Promise<Response<Hex>>;
  // ... 62 more methods

  // Event subscriptions
  events: {
    newHeads(): AsyncGenerator<Block>;
    logs(params?: LogFilter): AsyncGenerator<Log>;
    newPendingTransactions(): AsyncGenerator<Hash>;
    syncing(): AsyncGenerator<SyncStatus>;
  };
}
```

### Response Type

All methods return `Response<T>` containing either result or error:

```typescript
type Response<T> =
  | { result: T; error?: never }
  | { result?: never; error: RpcError };
```

## Key Features

<CardGroup cols={2}>
  <Card title="Method-Based API" icon="code" href="/jsonrpc-provider/method-api">
    Direct method calls instead of generic request(). Type-safe parameters and return values.
  </Card>

  <Card title="Branded Primitives" icon="shield-check" href="/jsonrpc-provider/type-system">
    Compile-time type safety with Address, Hash, Hex, and Quantity branded types.
  </Card>

  <Card title="Async Generator Events" icon="bolt" href="/jsonrpc-provider/events">
    Subscribe to blockchain events using `for await` loops. Automatic backpressure and cleanup.
  </Card>

  <Card title="Auto-Generated Types" icon="code-branch" href="/jsonrpc-provider/type-system">
    All types generated from ethereum/execution-apis OpenRPC specification. Always in sync.
  </Card>

  <Card title="Never Throws" icon="circle-exclamation" href="/jsonrpc-provider/error-handling">
    Errors returned as values in Response type. No try/catch needed for RPC errors.
  </Card>

  <Card title="Adapters" icon="arrows-rotate" href="/jsonrpc-provider/adapters">
    Convert to EIP-1193, HTTP handler, or create custom providers for any transport.
  </Card>
</CardGroup>

## Architecture

```
OpenRPC Specification (ethereum/execution-apis)
           ↓
  JSON-RPC Type Definitions
    (eth, debug, engine)
           ↓
   Provider Interface
   (65 method signatures)
           ↓
    Transport Layer
 (HTTP, WebSocket, IPC, Custom)
```

**Type generation**: `zig build generate-jsonrpc` regenerates types from latest OpenRPC spec.

## API Methods

### Method Namespaces

<CardGroup cols={3}>
  <Card title="eth Methods" icon="ethereum" href="/jsonrpc-provider/eth-methods">
    40 standard Ethereum methods for blocks, transactions, state, logs, and gas estimation.
  </Card>

  <Card title="debug Methods" icon="bug" href="/jsonrpc-provider/debug-methods">
    5 debugging methods for transaction tracing and block analysis.
  </Card>

  <Card title="engine Methods" icon="gears" href="/jsonrpc-provider/engine-methods">
    20 consensus layer methods for Engine API integration.
  </Card>
</CardGroup>

### Core Concepts

<CardGroup cols={3}>
  <Card title="Method API" icon="function" href="/jsonrpc-provider/method-api">
    Direct method calls, parameters, response handling, and request options.
  </Card>

  <Card title="Type System" icon="shield" href="/jsonrpc-provider/type-system">
    Auto-generated types, branded primitives, and type hierarchy.
  </Card>

  <Card title="Events" icon="rss" href="/jsonrpc-provider/events">
    Async generator subscriptions for newHeads, logs, pending transactions.
  </Card>
</CardGroup>

### Advanced Topics

<CardGroup cols={3}>
  <Card title="Adapters" icon="plug" href="/jsonrpc-provider/adapters">
    EIP-1193 adapter, HTTP handler, and creating custom providers.
  </Card>

  <Card title="Error Handling" icon="triangle-exclamation" href="/jsonrpc-provider/error-handling">
    Response structure, error codes, and retry strategies.
  </Card>

  <Card title="Performance" icon="gauge-high" href="/jsonrpc-provider/performance">
    Batching, caching, connection pooling, and optimization.
  </Card>
</CardGroup>

## Types

<Tabs>
<Tab title="Provider">

```typescript
export interface Provider {
  // eth namespace (40 methods)
  eth_blockNumber(): Promise<Response<Quantity>>;
  eth_getBalance(address: Address, block: BlockTag): Promise<Response<Quantity>>;
  eth_getTransactionCount(address: Address, block: BlockTag): Promise<Response<Quantity>>;
  eth_getCode(address: Address, block: BlockTag): Promise<Response<Hex>>;
  eth_getStorageAt(address: Address, slot: Quantity, block: BlockTag): Promise<Response<Hex>>;
  eth_call(params: CallParams, block?: BlockTag): Promise<Response<Hex>>;
  eth_estimateGas(params: CallParams): Promise<Response<Quantity>>;
  eth_sendRawTransaction(signedTx: Hex): Promise<Response<Hash>>;
  eth_getTransactionByHash(hash: Hash): Promise<Response<Transaction>>;
  eth_getTransactionReceipt(hash: Hash): Promise<Response<TransactionReceipt>>;
  eth_getLogs(filter: LogFilter): Promise<Response<Log[]>>;
  // ... 29 more eth methods

  // debug namespace (5 methods)
  debug_traceTransaction(hash: Hash, options?: TraceOptions): Promise<Response<Trace>>;
  // ... 4 more debug methods

  // engine namespace (20 methods)
  engine_newPayloadV3(payload: ExecutionPayload): Promise<Response<PayloadStatus>>;
  // ... 19 more engine methods

  // Events
  events: {
    newHeads(): AsyncGenerator<Block>;
    logs(params?: LogFilter): AsyncGenerator<Log>;
    newPendingTransactions(): AsyncGenerator<Hash>;
    syncing(): AsyncGenerator<SyncStatus>;
  };
}
```

</Tab>
<Tab title="Response<T>">

```typescript
type Response<T> =
  | { result: T; error?: never }
  | { result?: never; error: RpcError };

interface RpcError {
  code: number;
  message: string;
  data?: unknown;
}
```

All provider methods return `Response<T>`. Always check for errors before using result:

```typescript
const response = await provider.eth_blockNumber();

if (response.error) {
  console.error('RPC error:', response.error.code, response.error.message);
} else {
  console.log('Block number:', response.result);
}
```

</Tab>
<Tab title="Common Types">

```typescript
// Block tags
type BlockTag = 'latest' | 'earliest' | 'pending' | 'safe' | 'finalized' | Quantity;

// Branded primitives
type Address = Uint8Array & { readonly __tag: "Address" };
type Hash = Uint8Array & { readonly __tag: "Hash" };
type Hex = string & { readonly __tag: "Hex" };
type Quantity = string & { readonly __tag: "Quantity" };  // Hex-encoded numbers

// Request types
interface CallParams {
  from?: Address;
  to: Address;
  gas?: Quantity;
  gasPrice?: Quantity;
  value?: Quantity;
  data?: Hex;
}

interface LogFilter {
  fromBlock?: BlockTag;
  toBlock?: BlockTag;
  address?: Address | Address[];
  topics?: (Hash | Hash[] | null)[];
}
```

</Tab>
</Tabs>

## Usage Patterns

### Check Balance and Nonce

```typescript
import * as Address from '@tevm/voltaire/Address';

const address = Address('0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb0');

const [balanceRes, nonceRes] = await Promise.all([
  provider.eth_getBalance(address, 'latest'),
  provider.eth_getTransactionCount(address, 'latest')
]);

if (!balanceRes.error && !nonceRes.error) {
  console.log('Balance:', balanceRes.result);
  console.log('Nonce:', nonceRes.result);
}
```

### Query Contract State

```typescript
import * as Address from '@tevm/voltaire/Address';
import * as Hex from '@tevm/voltaire/Hex';

const contractAddress = Address('0x...');

// Check if contract exists
const codeRes = await provider.eth_getCode(contractAddress, 'latest');

if (!codeRes.error && codeRes.result !== '0x') {
  // Contract exists, call totalSupply()
  const result = await provider.eth_call({
    to: contractAddress,
    data: Hex('0x18160ddd')  // totalSupply() selector
  }, 'latest');

  if (!result.error) {
    console.log('Total supply:', result.result);
  }
}
```

### Monitor Contract Events

```typescript
import * as Address from '@tevm/voltaire/Address';
import * as Hash from '@tevm/voltaire/Hash';

const contractAddress = Address('0x...');
const transferSignature = Hash(
  '0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef'
);

for await (const log of provider.events.logs({
  address: contractAddress,
  topics: [transferSignature]
})) {
  console.log('Transfer event:');
  console.log('  Block:', log.blockNumber);
  console.log('  Transaction:', log.transactionHash);
  console.log('  From:', log.topics[1]);
  console.log('  To:', log.topics[2]);
}
```

### Wait for Transaction Confirmation

```typescript
import * as Hash from '@tevm/voltaire/Hash';

async function waitForConfirmation(
  txHash: Hash,
  confirmations: number = 3
): Promise<void> {
  const receiptRes = await provider.eth_getTransactionReceipt(txHash);
  if (receiptRes.error || !receiptRes.result) {
    throw new Error('Transaction not found');
  }

  const targetBlock = BigInt(receiptRes.result.blockNumber) + BigInt(confirmations);

  for await (const block of provider.events.newHeads()) {
    if (BigInt(block.number) >= targetBlock) {
      console.log(`Transaction confirmed with ${confirmations} confirmations`);
      break;
    }
  }
}
```

## Tree-Shaking

Import only what you need for optimal bundle size:

```typescript
// Import Provider interface (no implementations)
import type { Provider } from '@tevm/voltaire/provider';

// Import specific primitives used
import * as Address from '@tevm/voltaire/Address';
import * as Hash from '@tevm/voltaire/Hash';

// Only these primitives included in bundle
// Unused primitives (Bytecode, Transaction, etc.) excluded
```

<Tip>
Importing primitives individually enables tree-shaking. Unused methods and types are excluded from your bundle.
</Tip>

## Key Differences from EIP-1193

| Feature | EIP-1193 | JSONRPCProvider |
|---------|----------|-----------------|
| Method calls | `request({ method, params })` | `provider.method(params)` |
| Parameters | Plain strings/objects | Branded primitive types |
| Events | `on(event, listener)` | `events.event()` async generator |
| Errors | Throws exceptions | Returns error values |
| Type safety | Basic inference | Full inference with brands |
| Response format | Direct result | `Response<T>` union |

See [Comparison](/jsonrpc-provider/comparison) for detailed differences and migration guides.

## Related

### Primitives
- [Address](/primitives/address) - 20-byte Ethereum addresses with EIP-55 checksumming
- [Hash](/primitives/hash) - 32-byte keccak256 hashes
- [Hex](/primitives/hex) - Hex-encoded byte strings
- [Transaction](/primitives/transaction) - Transaction types and encoding

### Cryptography
- [Keccak256](/crypto/keccak256) - Hashing for address derivation
- [Secp256k1](/crypto/secp256k1) - Signature verification

### Guides
- [Usage Patterns](/jsonrpc-provider/usage-patterns) - Recipe collection for common tasks
- [Comparison](/jsonrpc-provider/comparison) - vs EIP-1193, ethers, viem

## Specifications

- [EIP-1193](https://eips.ethereum.org/EIPS/eip-1193) - Ethereum Provider JavaScript API
- [ethereum/execution-apis](https://github.com/ethereum/execution-apis) - JSON-RPC specification
- [OpenRPC](https://open-rpc.org/) - JSON-RPC API description format
- [EIP-3675](https://eips.ethereum.org/EIPS/eip-3675) - Upgrade consensus to Proof-of-Stake (Engine API)
- [EIP-4844](https://eips.ethereum.org/EIPS/eip-4844) - Shard Blob Transactions
