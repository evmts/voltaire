---
title: Blob.toVersionedHash
description: Compute versioned hash (0x01 + SHA256 of commitment)
---

<Tabs>
<Tab title="Class API">

## Signature

```typescript
blob.toVersionedHash(): VersionedHash
```

Compute versioned hash from blob's commitment. Format: version byte (0x01) + SHA256(commitment)[1:32]. This is the hash included in EIP-4844 transactions.

### Returns

`VersionedHash` - 32-byte versioned hash

### Throws

- If blob size is invalid
- If KZG library not available

### Example

```typescript
import { Blob } from '@tevm/voltaire';

const blob = Blob.fromData(data);
const versionedHash = blob.toVersionedHash();

console.log(versionedHash.length); // 32 bytes
console.log(versionedHash[0]); // 0x01 (KZG version)

// Use in transaction
const tx = {
  type: '0x03',
  blobVersionedHashes: [versionedHash],
  // ... other fields
};
```

### Defined in

[src/primitives/Blob/BrandedBlob/toVersionedHash.js](https://github.com/tevm/voltaire/blob/main/src/primitives/Blob/BrandedBlob/toVersionedHash.js)

</Tab>
<Tab title="Namespace API">

## Signature

```typescript
toVersionedHash(blob: BrandedBlob): VersionedHash
```

Compute versioned hash from blob's commitment. Format: version byte (0x01) + SHA256(commitment)[1:32].

### Parameters

- **blob** `BrandedBlob` - Blob to hash

### Returns

`VersionedHash` - 32-byte versioned hash

### Example

```typescript
import * as Blob from '@tevm/voltaire/Blob';

const blob = Blob.fromData(data);
const versionedHash = Blob.toVersionedHash(blob);

console.log(versionedHash.length); // 32 bytes
console.log(versionedHash[0]); // 0x01
```

### Defined in

[src/primitives/Blob/BrandedBlob/toVersionedHash.js](https://github.com/tevm/voltaire/blob/main/src/primitives/Blob/BrandedBlob/toVersionedHash.js)

</Tab>
<Tab title="Zig">

## Signature

```zig
pub fn toVersionedHash(self: Blob, allocator: std.mem.Allocator) !VersionedHash
```

Compute versioned hash from blob's commitment.

### Parameters

- **allocator** `std.mem.Allocator` - Memory allocator

### Returns

`VersionedHash` - Allocated 32-byte hash (caller owns memory)

### Example

```zig
const Blob = @import("primitives").Blob;

const blob = try Blob.fromData(allocator, data);
defer blob.deinit(allocator);

const versioned_hash = try blob.toVersionedHash(allocator);
defer versioned_hash.deinit(allocator);

std.debug.print("Version: 0x{x}\n", .{versioned_hash[0]});
```

</Tab>
</Tabs>

## Versioned Hash Format

```
┌─────────────┬──────────────────────────────────────┐
│  Version    │  SHA256(commitment)[1:32]            │
├─────────────┼──────────────────────────────────────┤
│  0x01       │  31 bytes from hash                  │
│  (1 byte)   │                                      │
└─────────────┴──────────────────────────────────────┘
  Byte 0        Bytes 1-31

Total: 32 bytes
```

### Manual Computation

```typescript
import { Blob } from '@tevm/voltaire';
import { sha256 } from '@noble/hashes/sha256';

const blob = Blob.fromData(data);
const commitment = blob.toCommitment();

// Compute SHA256 of commitment
const hash = sha256(commitment);

// Create versioned hash: 0x01 + hash[1:32]
const versionedHash = new Uint8Array(32);
versionedHash[0] = 0x01; // KZG version
versionedHash.set(hash.slice(1), 1);

// Equivalent to:
const auto = blob.toVersionedHash();
console.log(Blob.equals(versionedHash, auto)); // true
```

## From Commitment

Compute versioned hash directly from commitment:

```typescript
import { Blob } from '@tevm/voltaire';

const commitment = blob.toCommitment();

// Using Commitment namespace
const versionedHash = Blob.Commitment.toVersionedHash(commitment);

console.log(versionedHash[0]); // 0x01
console.log(versionedHash.length); // 32
```

## Version Validation

```typescript
import { Blob } from '@tevm/voltaire';

const versionedHash = blob.toVersionedHash();

// Validate format
console.log(Blob.isValidVersion(versionedHash)); // true

// Check version byte
const version = Blob.VersionedHash.getVersion(versionedHash);
console.log(version); // 1 (KZG)

// Manual validation
if (versionedHash[0] !== 0x01) {
  throw new Error('Unsupported blob version');
}
```

## Transaction Usage

```typescript
import { Blob } from '@tevm/voltaire';

// Create blobs
const blobs = [blob1, blob2, blob3];

// Generate commitments and versioned hashes
const commitments = blobs.map(b => b.toCommitment());
const versionedHashes = blobs.map(b => b.toVersionedHash());

// Create EIP-4844 transaction
const tx = {
  type: '0x03',
  blobVersionedHashes: versionedHashes, // Only hashes on-chain
  maxFeePerBlobGas: 100_000_000n,
  // ... other fields

  // Blob sidecar (mempool only, not on-chain)
  blobs: blobs,
  commitments: commitments,
  proofs: blobs.map(b => b.toProof()),
};
```

## See Also

- [toCommitment](./toCommitment) - Generate KZG commitment
- [isValidVersion](./isValidVersion) - Validate versioned hash
- [versioned-hash](./versioned-hash) - VersionedHash namespace utilities
