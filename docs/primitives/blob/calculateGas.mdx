---
title: Blob.calculateGas
description: Calculate blob gas cost for number of blobs
---

<Tabs>
<Tab title="Class API">

## Signature

```typescript
Blob.calculateGas(blobCount: number, blobBaseFee?: bigint): bigint
```

Calculate total blob gas cost. Each blob costs 131,072 gas (2^17). Optionally multiply by blob base fee for wei cost.

### Parameters

- **blobCount** `number` - Number of blobs (0-6)
- **blobBaseFee** `bigint` (optional) - Blob base fee in wei per gas

### Returns

`bigint` - Total blob gas (or wei if base fee provided)

### Throws

- If blob count < 0 or > 6 (MAX_PER_TRANSACTION)

### Example

```typescript
import { Blob } from '@tevm/voltaire';

// Gas units only
const gas = Blob.calculateGas(3);
console.log(gas); // 393,216 (3 * 131,072)

// Wei cost with base fee
const blobBaseFee = 50_000_000n; // 50 gwei
const cost = Blob.calculateGas(3, blobBaseFee);
console.log(cost); // 19,660,800,000,000 wei
console.log(cost / 10n**9n); // 19,660 gwei
```

### Example: Cost Estimation

```typescript
import { Blob } from '@tevm/voltaire';

const data = new Uint8Array(300_000);
const blobCount = Blob.estimateBlobCount(data);

// Current blob base fee (from provider)
const blobBaseFee = 50_000_000n;

// Calculate cost
const blobGasCost = Blob.calculateGas(blobCount, blobBaseFee);

// Compare with calldata
const calldataBytes = data.length;
const calldataGas = BigInt(calldataBytes) * 16n; // 16 gas per byte
const executionBaseFee = 30_000_000_000n; // 30 gwei
const calldataCost = calldataGas * executionBaseFee;

console.log(`Blob cost: ${blobGasCost / 10n**9n} gwei`);
console.log(`Calldata cost: ${calldataCost / 10n**9n} gwei`);

const savings = ((1 - Number(blobGasCost) / Number(calldataCost)) * 100).toFixed(1);
console.log(`Savings: ${savings}%`);
```

### Defined in

[src/primitives/Blob/BrandedBlob/calculateGas.js](https://github.com/tevm/voltaire/blob/main/src/primitives/Blob/BrandedBlob/calculateGas.js)

</Tab>
<Tab title="Namespace API">

## Signature

```typescript
calculateGas(blobCount: number, blobBaseFee?: bigint): bigint
```

Calculate total blob gas cost. Each blob costs 131,072 gas (2^17). Optionally multiply by blob base fee for wei cost.

### Parameters

- **blobCount** `number` - Number of blobs (0-6)
- **blobBaseFee** `bigint` (optional) - Blob base fee in wei per gas

### Returns

`bigint` - Total blob gas (or wei if base fee provided)

### Throws

- If blob count < 0 or > 6 (MAX_PER_TRANSACTION)

### Example

```typescript
import * as Blob from '@tevm/voltaire/Blob';

// Gas units only
const gas = Blob.calculateGas(3);
console.log(gas); // 393,216

// Wei cost with base fee
const cost = Blob.calculateGas(3, 50_000_000n);
console.log(cost / 10n**9n); // gwei
```

### Defined in

[src/primitives/Blob/BrandedBlob/calculateGas.js](https://github.com/tevm/voltaire/blob/main/src/primitives/Blob/BrandedBlob/calculateGas.js)

</Tab>
<Tab title="Zig">

## Signature

```zig
pub fn calculateGas(blob_count: u8, blob_base_fee: ?u64) u64
```

Calculate blob gas cost.

### Parameters

- **blob_count** `u8` - Number of blobs (0-6)
- **blob_base_fee** `?u64` (optional) - Base fee in wei

### Returns

`u64` - Total cost in gas or wei

### Example

```zig
const Blob = @import("primitives").Blob;

const gas = Blob.calculateGas(3, null);
std.debug.print("Gas: {}\n", .{gas}); // 393,216

const cost = Blob.calculateGas(3, 50_000_000);
std.debug.print("Cost: {} wei\n", .{cost});
```

</Tab>
</Tabs>

## Gas Constants

```typescript
import { Blob } from '@tevm/voltaire';

console.log(Blob.GAS_PER_BLOB);        // 131,072 (2^17)
console.log(Blob.TARGET_GAS_PER_BLOCK); // 393,216 (3 blobs)
console.log(Blob.MAX_PER_TRANSACTION);  // 6 blobs

// Maximum gas per transaction
const maxGas = Blob.GAS_PER_BLOB * Blob.MAX_PER_TRANSACTION;
console.log(maxGas); // 786,432
```

## Fee Market

Blob base fee adjusts based on block usage:

```typescript
import { Blob } from '@tevm/voltaire';

// Target: 3 blobs per block
const target = Blob.TARGET_GAS_PER_BLOCK;
console.log(`Target: ${target} gas`); // 393,216

// If usage > target, fee increases
// If usage < target, fee decreases
```

### Example: Fee Adjustment

```typescript
// Block used 2 blobs (below target)
const usedGas = Blob.calculateGas(2);
const targetGas = Blob.TARGET_GAS_PER_BLOCK;

if (usedGas < targetGas) {
  console.log('Fee will decrease next block');
}

// Block used 5 blobs (above target)
const highUsage = Blob.calculateGas(5);

if (highUsage > targetGas) {
  console.log('Fee will increase next block');
}
```

## Complete Transaction Cost

```typescript
import { Blob } from '@tevm/voltaire';

// Transaction costs
const executionGas = 21000n; // Base transaction
const executionBaseFee = 30_000_000_000n; // 30 gwei
const executionCost = executionGas * executionBaseFee;

// Blob costs
const blobCount = 2;
const blobBaseFee = 50_000_000n; // 50 gwei
const blobCost = Blob.calculateGas(blobCount, blobBaseFee);

// Total
const totalCost = executionCost + blobCost;

console.log(`Execution: ${executionCost / 10n**9n} gwei`);
console.log(`Blobs: ${blobCost / 10n**9n} gwei`);
console.log(`Total: ${totalCost / 10n**9n} gwei`);
```

## See Also

- [estimateBlobCount](./estimateBlobCount) - Estimate blobs needed
- [splitData](./splitData) - Split data into blobs
- [EIP-4844](/primitives/blob/eip4844) - Blob gas market details
