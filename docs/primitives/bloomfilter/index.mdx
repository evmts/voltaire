---
title: BloomFilter
description: Probabilistic data structure for efficient set membership testing
---

<Tip>
New to bloom filters? Start with [Fundamentals](/primitives/bloomfilter/fundamentals) for guided examples and concepts.
</Tip>

## Type Definition

[Branded](/concepts/branded-types) `Uint8Array` representing a bloom filter with `m` bits and `k` hash functions. Zero-overhead design supports both tree-shakeable namespace methods and class instances. Used extensively in Ethereum for log filtering.

## Quick Start

<Tabs>
<Tab title="Class API">
```typescript
import { BloomFilter } from '@tevm/voltaire'

// Create with standard Ethereum parameters (2048 bits, 3 hash functions)
const filter = BloomFilter.create(2048, 3)

// Add items (see Operations)
const item = new TextEncoder().encode("Transfer")
filter.add(item)

// Query membership (see Queries)
if (filter.contains(item)) {
  console.log("Item might be in set")
}

// Convert to/from hex (see Conversions)
const hex = filter.toHex()
const restored = BloomFilter.fromHex(hex, 2048, 3)

// Merge filters (see Operations)
const filter2 = BloomFilter.create(2048, 3)
const merged = filter.merge(filter2)

// Check if empty
if (filter.isEmpty()) {
  console.log("Filter is empty")
}
```
</Tab>
<Tab title="Namespace API (Tree-shakeable)">
```typescript
import { BloomFilter } from '@tevm/voltaire'

// Tree-shakeable imports minimize bundle size
const filter = BloomFilter.create(2048, 3)

// Each function imported independently
const item = new TextEncoder().encode("Transfer")
BloomFilter.add(filter, item)
BloomFilter.contains(filter, item)  // boolean

// See BrandedBloomFilter for complete functional API
```
</Tab>
</Tabs>

## Types

<Tabs>
<Tab title="class BloomFilter">
```typescript
class BloomFilter extends Uint8Array {
  readonly k: number      // Number of hash functions
  readonly m: number      // Number of bits

  // Constructors (→ /primitives/bloomfilter/constructors)
  static create(m: number, k: number): BloomFilter
  static fromHex(hex: string, m: number, k: number): BloomFilter

  // Operations (→ /primitives/bloomfilter/operations)
  add(item: Uint8Array): void
  merge(other: BloomFilter): BloomFilter

  // Queries (→ /primitives/bloomfilter/queries)
  contains(item: Uint8Array): boolean
  isEmpty(): boolean

  // Conversions (→ /primitives/bloomfilter/conversions)
  toHex(): string
  static hash(item: Uint8Array, seed: number, m: number): number

  // Uint8Array methods (inherited)
  slice(start?: number, end?: number): BloomFilter
  subarray(start?: number, end?: number): BloomFilter
  // ... and all other Uint8Array methods
}
```

Source: [BloomFilter/index.ts:12-66](https://github.com/evmts/voltaire/blob/main/src/primitives/BloomFilter/index.ts#L12-L66)
</Tab>
<Tab title="type BrandedBloomFilter">
```typescript
export type BrandedBloomFilter = Uint8Array & {
  readonly __tag: "BloomFilter"
  readonly k: number      // Number of hash functions
  readonly m: number      // Number of bits
}
```

[Branded type](/concepts/branded-types) wrapping `Uint8Array` with bloom filter parameters. Used as underlying type for BloomFilter class and tree-shakeable functions.

Source: [BrandedBloomFilter/BrandedBloomFilter.ts:1-6](https://github.com/evmts/voltaire/blob/main/src/primitives/BloomFilter/BrandedBloomFilter/BrandedBloomFilter.ts#L1-L6)
</Tab>
</Tabs>

## Constants

BloomFilter module exports standard Ethereum bloom filter constants:

```typescript
import { BloomFilter, SIZE, BITS, DEFAULT_HASH_COUNT } from '@tevm/voltaire'

// Standard Ethereum bloom filter parameters
SIZE                 // 256 (bytes)
BITS                 // 2048 (bits)
DEFAULT_HASH_COUNT   // 3 (hash functions)

// Usage examples
const filter = BloomFilter.create(BITS, DEFAULT_HASH_COUNT)
const buffer = new Uint8Array(SIZE)  // 256-byte buffer
```

**Available constants:**
- `SIZE = 256` - Standard Ethereum bloom filter size in bytes
- `BITS = 2048` - Number of bits in Ethereum bloom filter (256 * 8)
- `DEFAULT_HASH_COUNT = 3` - Standard number of hash functions for Ethereum

Source: [BrandedBloomFilter/constants.js](https://github.com/evmts/voltaire/blob/main/src/primitives/BloomFilter/BrandedBloomFilter/constants.js)

## API Documentation

### Constructors

Creating BloomFilter instances with custom parameters or from hex strings.

    [View constructors →](/primitives/bloomfilter/constructors)

### Operations

Add items and merge filters using bitwise operations.

    [View operations →](/primitives/bloomfilter/operations)

### Queries

Check membership and test filter state.

    [View queries →](/primitives/bloomfilter/queries)

### Conversions

Convert to hex format and hash item data.

    [View conversions →](/primitives/bloomfilter/conversions)

### Fundamentals

Learn bloom filter theory, Ethereum log filtering, and probabilistic data structures.

    [View fundamentals →](/primitives/bloomfilter/fundamentals)

### Algorithm

Understanding bloom filter theory, false positives, and hash functions.

    [View algorithm →](/primitives/bloomfilter/algorithm)

### Log Filtering

Ethereum log filtering and event matching patterns.

    [View log filtering →](/primitives/bloomfilter/log-filtering)

### BrandedBloomFilter

Tree-shakeable functional API for minimal bundle size.

    [View BrandedBloomFilter →](/primitives/bloomfilter/branded-bloomfilter)

### Usage Patterns

Common patterns for log filtering, event indexing, and optimization.

    [View usage patterns →](/primitives/bloomfilter/usage-patterns)


## Performance Characteristics

| Operation | Time Complexity | Space Complexity |
|-----------|----------------|------------------|
| `create`  | O(1)           | O(m/8) bytes     |
| `add`     | O(k)           | O(1)             |
| `contains`| O(k)           | O(1)             |
| `merge`   | O(m/8)         | O(m/8) bytes     |
| `isEmpty` | O(m/8)         | O(1)             |

Where:
- `m` = number of bits (2048 for Ethereum)
- `k` = number of hash functions (3 for Ethereum)

## Related

- [Fundamentals](/primitives/bloomfilter/fundamentals) - Learn bloom filter theory and Ethereum usage
- [Hex](/primitives/hex) - Hex string utilities for serialization
- [Hash](/primitives/hash) - Keccak256 hashing for log topics
- [Branded Types](/concepts/branded-types) - Zero-overhead type branding pattern

## Specification

- [Ethereum Yellow Paper](https://ethereum.github.io/yellowpaper/paper.pdf) - Section 4.3.1 (Bloom Filter)
- [Wikipedia: Bloom Filter](https://en.wikipedia.org/wiki/Bloom_filter) - Mathematical analysis
- [EIP-234](https://eips.ethereum.org/EIPS/eip-234) - JSON-RPC filter API specification

