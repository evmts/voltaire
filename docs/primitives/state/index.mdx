---
title: "State"
description: "EVM storage key representation for contract state tracking"
---

# State

Composite key primitive for uniquely identifying storage locations in the Ethereum Virtual Machine.

## Overview

StorageKey combines a 20-byte contract address with a 256-bit storage slot number, enabling efficient tracking of contract state across multiple contracts in a single VM instance.

## Quick Start

<Tabs>
<Tab title="Basic Usage">
```typescript
import * as State from '@tevm/primitives/State'
import * as Address from '@tevm/primitives/Address'

// Create storage key
const key = State.StorageKey(
  Address.from("0x742d35Cc6634C0532925a3b844Bc9e7595f51e3e"),
  0n  // First storage slot
)

// Use in storage maps
const storage = new Map<string, bigint>()
storage.set(State.StorageKey.toString(key), 1000n)

// Retrieve value
const value = storage.get(State.StorageKey.toString(key))  // 1000n
```
</Tab>
<Tab title="String Serialization">
```typescript
import * as State from '@tevm/primitives/State'

const key = State.StorageKey(contractAddress, 42n)

// Convert to string for map keys
const keyStr = State.StorageKey.toString(key)
// "0x742d35cc6634c0532925a3b844bc9e7595f51e3e:42"

// Parse from string
const parsed = State.StorageKey.fromString(keyStr)
// { address: BrandedAddress(...), slot: 42n }

// Round-trip conversion
State.StorageKey.equals(key, parsed)  // true
```
</Tab>
</Tabs>

## API

### StorageKey(address, slot)
```typescript
StorageKey(address: Address, slot: bigint): BrandedStorageKey
```

Create storage key from address and slot.

### StorageKey.from(input)
```typescript
from(input: StorageKeyInput): BrandedStorageKey
```

Universal constructor from various inputs.

### StorageKey.toString(key)
```typescript
toString(key: BrandedStorageKey): string
```

Convert to string format for map keys.

### StorageKey.fromString(str)
```typescript
fromString(str: string): BrandedStorageKey
```

Parse from string format.

### StorageKey.equals(a, b)
```typescript
equals(a: BrandedStorageKey, b: BrandedStorageKey): boolean
```

Compare two storage keys for equality.

### StorageKey.is(value)
```typescript
is(value: unknown): value is BrandedStorageKey
```

Type guard for storage keys.

## Types

```typescript
type BrandedStorageKey = {
  address: BrandedAddress;
  slot: bigint;
}
```

## See Also

- [Address](/primitives/address) - Contract address type
- [State Utilities](/primitives/state/utilities) - Helper functions
- [Storage Examples](/primitives/state/storage-examples) - Real-world usage
