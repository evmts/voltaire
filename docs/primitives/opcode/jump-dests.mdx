---
title: jumpDests()
description: Find all valid JUMPDEST positions in EVM bytecode
---

## Opcode.jumpDests()

Find all valid JUMPDEST positions in bytecode.

<Tabs>
<Tab title="Namespace API">
```typescript
import * as Opcode from '@tevm/voltaire/Opcode'

const bytecode = new Uint8Array([
  0x60, 0x04,     // PUSH1 0x04
  0x56,           // JUMP
  0x5B,           // JUMPDEST (offset 3)
  0x60, 0x01,     // PUSH1 0x01
  0x60, 0x02,     // PUSH1 0x02
  0x01,           // ADD
  0x00            // STOP
])

const dests = Opcode.jumpDests(bytecode)
// Set([3]) - JUMPDEST at offset 3
```
</Tab>
<Tab title="Functional API">
```typescript
import { jumpDests } from '@tevm/voltaire/Opcode'

const dests = jumpDests(bytecode)
console.log(Array.from(dests))  // [3]
```
</Tab>
<Tab title="Zig">
```zig
const std = @import("std");
const primitives = @import("primitives");
const Opcode = primitives.opcode;

pub fn main() !void {
    var gpa = std.heap.GeneralPurposeAllocator(.{}){};
    defer _ = gpa.deinit();
    const allocator = gpa.allocator();

    const bytecode = [_]u8{
        0x60, 0x04,  // PUSH1 0x04
        0x56,        // JUMP
        0x5B,        // JUMPDEST
    };

    var dests = try Opcode.jumpDests(allocator, &bytecode);
    defer dests.deinit();

    var it = dests.iterator();
    while (it.next()) |offset| {
        std.debug.print("JUMPDEST at: {}\n", .{offset});
    }
}
```
</Tab>
</Tabs>

## Parameters

- `bytecode: Uint8Array` - Contract bytecode

## Returns

`Set<number>` - Set of valid JUMPDEST offsets

## Behavior

- **Correctly skips PUSH data**: JUMPDEST inside PUSH immediate bytes is NOT valid
- **Only JUMPDEST opcodes**: Only returns positions where opcode is 0x5B
- **Empty if none found**: Returns empty Set if no JUMPDESTs

## Use Cases

### Build Jump Table

```typescript
function buildJumpTable(bytecode: Uint8Array): Map<number, string> {
  const dests = Opcode.jumpDests(bytecode)
  const table = new Map<number, string>()

  for (const offset of dests) {
    table.set(offset, `JUMPDEST_${offset.toString(16)}`)
  }

  return table
}
```

### Validate Jump Target

```typescript
function isValidJumpTarget(bytecode: Uint8Array, target: number): boolean {
  const validDests = Opcode.jumpDests(bytecode)
  return validDests.has(target)
}
```

### Count Jump Destinations

```typescript
function countJumpDests(bytecode: Uint8Array): number {
  return Opcode.jumpDests(bytecode).size
}
```

## Related

- [isValidJumpDest()](/primitives/opcode/is-valid-jump-dest) - Check specific offset
- [parse()](/primitives/opcode/parse) - Parse bytecode
- [isJump()](/primitives/opcode/is-jump) - Check if JUMP/JUMPI
