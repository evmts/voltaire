---
title: '[Zig] src/primitives/TraceConfig/trace_config.zig'
source: 'src/primitives/TraceConfig/trace_config.zig'
---

> Auto-generated from Zig tests in: src/primitives/TraceConfig/trace_config.zig

### TraceConfig: default creation

```zig
test "TraceConfig: default creation" {
    const config = TraceConfig.from();

    try testing.expect(!config.disable_storage);
    try testing.expect(!config.disable_stack);
    try testing.expect(!config.disable_memory);
    try testing.expect(!config.enable_memory);
    try testing.expect(!config.enable_return_data);
    try testing.expect(config.tracer == null);
    try testing.expect(config.timeout == null);
}
```

### TraceConfig: enableAll

```zig
test "TraceConfig: enableAll" {
    const config = TraceConfig.enableAll();

    try testing.expect(!config.disable_storage);
    try testing.expect(!config.disable_stack);
    try testing.expect(!config.disable_memory);
    try testing.expect(config.enable_memory);
    try testing.expect(config.enable_return_data);
}
```

### TraceConfig: disableAll

```zig
test "TraceConfig: disableAll" {
    const config = TraceConfig.disableAll();

    try testing.expect(config.disable_storage);
    try testing.expect(config.disable_stack);
    try testing.expect(config.disable_memory);
    try testing.expect(!config.enable_memory);
    try testing.expect(!config.enable_return_data);
}
```

### TraceConfig: withTracer

```zig
test "TraceConfig: withTracer" {
    const config = TraceConfig.withTracer("callTracer");

    try testing.expect(config.tracer != null);
    try testing.expectEqualStrings("callTracer", config.tracer.?);
}
```

### TraceConfig: preset tracers

```zig
test "TraceConfig: preset tracers" {
    const call = TraceConfig.callTracer();
    try testing.expectEqualStrings("callTracer", call.tracer.?);

    const prestate = TraceConfig.prestateTracer();
    try testing.expectEqualStrings("prestateTracer", prestate.tracer.?);

    const four_byte = TraceConfig.fourByteTracer();
    try testing.expectEqualStrings("4byteTracer", four_byte.tracer.?);
}
```

### TraceConfig: equality

```zig
test "TraceConfig: equality" {
    const config1 = TraceConfig.from();
    const config2 = TraceConfig.from();
    const config3 = TraceConfig.disableAll();

    try testing.expect(config1.equals(config2));
    try testing.expect(!config1.equals(config3));
}
```

### TraceConfig: tracking checks

```zig
test "TraceConfig: tracking checks" {
    const default_config = TraceConfig.from();
    try testing.expect(default_config.tracksStorage());
    try testing.expect(default_config.tracksStack());
    try testing.expect(!default_config.tracksMemory()); // false by default

    const disabled = TraceConfig.disableAll();
    try testing.expect(!disabled.tracksStorage());
    try testing.expect(!disabled.tracksStack());
    try testing.expect(!disabled.tracksMemory());

    const enabled = TraceConfig.enableAll();
    try testing.expect(enabled.tracksStorage());
    try testing.expect(enabled.tracksStack());
    try testing.expect(enabled.tracksMemory());
}
```

### TraceConfig: hasTracer

```zig
test "TraceConfig: hasTracer" {
    const default_config = TraceConfig.from();
    try testing.expect(!default_config.hasTracer());

    const with_tracer = TraceConfig.callTracer();
    try testing.expect(with_tracer.hasTracer());
}
```

### TraceConfig: JSON encode default

```zig
test "TraceConfig: JSON encode default" {
    const allocator = testing.allocator;
    const config = TraceConfig.from();

    const json_str = try config.toJson(allocator);
    defer allocator.free(json_str);

    try testing.expectEqualStrings("{}", json_str);
}
```

### TraceConfig: JSON encode with options

```zig
test "TraceConfig: JSON encode with options" {
    const allocator = testing.allocator;
    const config = TraceConfig.disableAll();

    const json_str = try config.toJson(allocator);
    defer allocator.free(json_str);

    try testing.expect(std.mem.indexOf(u8, json_str, "\"disableStorage\":true") != null);
    try testing.expect(std.mem.indexOf(u8, json_str, "\"disableStack\":true") != null);
    try testing.expect(std.mem.indexOf(u8, json_str, "\"disableMemory\":true") != null);
}
```

### TraceConfig: JSON encode with tracer

```zig
test "TraceConfig: JSON encode with tracer" {
    const allocator = testing.allocator;
    const config = TraceConfig.callTracer();

    const json_str = try config.toJson(allocator);
    defer allocator.free(json_str);

    try testing.expect(std.mem.indexOf(u8, json_str, "\"tracer\":\"callTracer\"") != null);
}
```

### TraceConfig: JSON roundtrip

```zig
test "TraceConfig: JSON roundtrip" {
    const allocator = testing.allocator;

    var config = TraceConfig.disableAll();
    config.tracer = "callTracer";
    config.timeout = "30s";

    const json_str = try config.toJson(allocator);
    defer allocator.free(json_str);

    const decoded = try TraceConfig.fromJson(allocator, json_str);
    defer if (decoded.tracer) |t| allocator.free(t);
    defer if (decoded.timeout) |t| allocator.free(t);

    try testing.expectEqual(config.disable_storage, decoded.disable_storage);
    try testing.expectEqual(config.disable_stack, decoded.disable_stack);
    try testing.expectEqual(config.disable_memory, decoded.disable_memory);
    try testing.expectEqualStrings("callTracer", decoded.tracer.?);
    try testing.expectEqualStrings("30s", decoded.timeout.?);
}
```
