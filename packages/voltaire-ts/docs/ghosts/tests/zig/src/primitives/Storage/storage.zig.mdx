---
title: '[Zig] src/primitives/Storage/storage.zig'
source: 'src/primitives/Storage/storage.zig'
---

> Auto-generated from Zig tests in: src/primitives/Storage/storage.zig

### calculateErc7201 - basic functionality

```zig
test "calculateErc7201 - basic functionality" {
    const id = "example.main";
    const slot = calculateErc7201(id);

    // Should be 32 bytes
    try std.testing.expectEqual(@as(usize, 32), slot.len);

    // Last byte should be 0x00
    try std.testing.expectEqual(@as(u8, 0), slot[31]);
}
```

### calculateErc7201 - deterministic

```zig
test "calculateErc7201 - deterministic" {
    const id = "determinism.test";
    const slot1 = calculateErc7201(id);
    const slot2 = calculateErc7201(id);

    try std.testing.expectEqual(slot1, slot2);
}
```

### calculateErc7201 - different namespaces produce different slots

```zig
test "calculateErc7201 - different namespaces produce different slots" {
    const slot1 = calculateErc7201("namespace.one");
    const slot2 = calculateErc7201("namespace.two");

    // Should not be equal
    var equal = true;
    for (slot1, slot2) |a, b| {
        if (a != b) {
            equal = false;
            break;
        }
    }
    try std.testing.expect(!equal);

    // Both should have last byte cleared
    try std.testing.expectEqual(@as(u8, 0), slot1[31]);
    try std.testing.expectEqual(@as(u8, 0), slot2[31]);
}
```

### calculateErc7201 - empty string

```zig
test "calculateErc7201 - empty string" {
    const slot = calculateErc7201("");

    try std.testing.expectEqual(@as(usize, 32), slot.len);
    try std.testing.expectEqual(@as(u8, 0), slot[31]);
}
```

### calculateErc7201 - long namespace

```zig
test "calculateErc7201 - long namespace" {
    const id = "org.example.very.long.namespace.identifier.with.many.parts";
    const slot = calculateErc7201(id);

    try std.testing.expectEqual(@as(usize, 32), slot.len);
    try std.testing.expectEqual(@as(u8, 0), slot[31]);
}
```

### calculateErc8042 - basic functionality

```zig
test "calculateErc8042 - basic functionality" {
    const id = "diamond.storage.example";
    const slot = calculateErc8042(id);

    try std.testing.expectEqual(@as(usize, 32), slot.len);
}
```

### calculateErc8042 - deterministic

```zig
test "calculateErc8042 - deterministic" {
    const id = "diamond.determinism.test";
    const slot1 = calculateErc8042(id);
    const slot2 = calculateErc8042(id);

    try std.testing.expectEqual(slot1, slot2);
}
```

### calculateErc8042 - different identifiers

```zig
test "calculateErc8042 - different identifiers" {
    const slot1 = calculateErc8042("diamond.one");
    const slot2 = calculateErc8042("diamond.two");

    // Should not be equal
    var equal = true;
    for (slot1, slot2) |a, b| {
        if (a != b) {
            equal = false;
            break;
        }
    }
    try std.testing.expect(!equal);
}
```

### calculateErc8042 - empty string

```zig
test "calculateErc8042 - empty string" {
    const slot = calculateErc8042("");

    try std.testing.expectEqual(@as(usize, 32), slot.len);
}
```

### calculateErc8042 - matches direct keccak256

```zig
test "calculateErc8042 - matches direct keccak256" {
    const id = "test.namespace";
    const slot = calculateErc8042(id);
    const direct_hash = crypto.Keccak256.hash(id);

    try std.testing.expectEqual(direct_hash, slot);
}
```

### ERC-7201 vs ERC-8042 - different results

```zig
test "ERC-7201 vs ERC-8042 - different results" {
    const id = "same.namespace";
    const erc7201_slot = calculateErc7201(id);
    const erc8042_slot = calculateErc8042(id);

    // Should be different
    var equal = true;
    for (erc7201_slot, erc8042_slot) |a, b| {
        if (a != b) {
            equal = false;
            break;
        }
    }
    try std.testing.expect(!equal);
}
```
