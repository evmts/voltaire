---
title: '[Zig] src/primitives/RevertReason/revert_reason.zig'
source: 'src/primitives/RevertReason/revert_reason.zig'
---

> Auto-generated from Zig tests in: src/primitives/RevertReason/revert_reason.zig

### decode - empty data

```zig
test "decode - empty data" {
    const data = [_]u8{};
    const reason = decode(&data);

    try std.testing.expect(reason.isUnknown());
}
```

### decode - too short for selector

```zig
test "decode - too short for selector" {
    const data = [_]u8{ 0x08, 0xc3, 0x79 };
    const reason = decode(&data);

    try std.testing.expect(reason.isUnknown());
}
```

### decode - Error(string) basic

```zig
test "decode - Error(string) basic" {
    // Error("hello") ABI encoded
    const data = [_]u8{
        // Selector
        0x08, 0xc3, 0x79, 0xa0,
        // Offset to string (32)
        0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x20,
        // String length (5)
        0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x05,
        // "hello"
        0x68, 0x65, 0x6c, 0x6c,
        0x6f,
    };

    const reason = decode(&data);

    try std.testing.expect(reason.isError());
    try std.testing.expectEqualStrings("hello", reason.getMessage().?);
}
```

### decode - Panic(uint256) assertion failed

```zig
test "decode - Panic(uint256) assertion failed" {
    // Panic(1) - assertion failed
    const data = [_]u8{
        // Selector
        0x4e, 0x48, 0x7b, 0x71,
        // Code = 1
        0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x01,
    };

    const reason = decode(&data);

    try std.testing.expect(reason.isPanic());
    try std.testing.expectEqual(@as(u256, 1), reason.getPanicCode().?);

    switch (reason) {
        .Panic => |p| try std.testing.expectEqualStrings("Assertion failed", p.description),
        else => unreachable,
    }
}
```

### decode - Panic(uint256) arithmetic overflow

```zig
test "decode - Panic(uint256) arithmetic overflow" {
    // Panic(17) - arithmetic overflow
    const data = [_]u8{
        // Selector
        0x4e, 0x48, 0x7b, 0x71,
        // Code = 17
        0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x11,
    };

    const reason = decode(&data);

    try std.testing.expect(reason.isPanic());
    try std.testing.expectEqual(@as(u256, 17), reason.getPanicCode().?);

    switch (reason) {
        .Panic => |p| try std.testing.expectEqualStrings("Arithmetic overflow/underflow", p.description),
        else => unreachable,
    }
}
```

### decode - Custom error

```zig
test "decode - Custom error" {
    const data = [_]u8{
        // Custom selector
        0xaa, 0xbb, 0xcc, 0xdd,
        // Some data
        0x01, 0x02, 0x03, 0x04,
    };

    const reason = decode(&data);

    try std.testing.expect(reason.isCustom());

    switch (reason) {
        .Custom => |c| {
            try std.testing.expectEqual([_]u8{ 0xaa, 0xbb, 0xcc, 0xdd }, c.selector);
            try std.testing.expectEqual(@as(usize, 4), c.data.len);
        },
        else => unreachable,
    }
}
```

### PanicCode.description - known codes

```zig
test "PanicCode.description - known codes" {
    try std.testing.expectEqualStrings("Generic panic", PanicCode.generic.description());
    try std.testing.expectEqualStrings("Assertion failed", PanicCode.assertion_failed.description());
    try std.testing.expectEqualStrings("Division by zero", PanicCode.division_by_zero.description());
    try std.testing.expectEqualStrings("Array out of bounds", PanicCode.array_out_of_bounds.description());
}
```

### PanicCode.description - unknown code

```zig
test "PanicCode.description - unknown code" {
    const unknown_code: PanicCode = @enumFromInt(255);
    try std.testing.expectEqualStrings("Unknown panic code", unknown_code.description());
}
```

### RevertReason.err - creates error reason

```zig
test "RevertReason.err - creates error reason" {
    const reason = RevertReason.err("test message");

    try std.testing.expect(reason.isError());
    try std.testing.expectEqualStrings("test message", reason.getMessage().?);
}
```

### RevertReason.panic - creates panic reason

```zig
test "RevertReason.panic - creates panic reason" {
    const reason = RevertReason.panic(18);

    try std.testing.expect(reason.isPanic());
    try std.testing.expectEqual(@as(u256, 18), reason.getPanicCode().?);
}
```

### RevertReason.custom - creates custom reason

```zig
test "RevertReason.custom - creates custom reason" {
    const selector = [_]u8{ 0x01, 0x02, 0x03, 0x04 };
    const data = [_]u8{ 0xaa, 0xbb };
    const reason = RevertReason.custom(selector, &data);

    try std.testing.expect(reason.isCustom());
}
```

### RevertReason.unknown - creates unknown reason

```zig
test "RevertReason.unknown - creates unknown reason" {
    const data = [_]u8{ 0x01, 0x02 };
    const reason = RevertReason.unknown(&data);

    try std.testing.expect(reason.isUnknown());
}
```

### toString - Error

```zig
test "toString - Error" {
    const reason = RevertReason.err("test error");
    const str = try toString(std.testing.allocator, reason);
    defer std.testing.allocator.free(str);

    try std.testing.expectEqualStrings("Error: test error", str);
}
```

### toString - Panic

```zig
test "toString - Panic" {
    const reason = RevertReason.panic(1);
    const str = try toString(std.testing.allocator, reason);
    defer std.testing.allocator.free(str);

    try std.testing.expectEqualStrings("Panic(1): Assertion failed", str);
}
```

### toString - Unknown

```zig
test "toString - Unknown" {
    const data = [_]u8{ 0x01, 0x02, 0x03 };
    const reason = RevertReason.unknown(&data);
    const str = try toString(std.testing.allocator, reason);
    defer std.testing.allocator.free(str);

    try std.testing.expectEqualStrings("Unknown: 3 bytes", str);
}
```

### ERROR_SELECTOR constant

```zig
test "ERROR_SELECTOR constant" {
    try std.testing.expectEqual([_]u8{ 0x08, 0xc3, 0x79, 0xa0 }, ERROR_SELECTOR);
}
```

### PANIC_SELECTOR constant

```zig
test "PANIC_SELECTOR constant" {
    try std.testing.expectEqual([_]u8{ 0x4e, 0x48, 0x7b, 0x71 }, PANIC_SELECTOR);
}
```
