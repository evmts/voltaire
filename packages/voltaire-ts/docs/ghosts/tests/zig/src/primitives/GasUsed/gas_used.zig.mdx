---
title: '[Zig] src/primitives/GasUsed/gas_used.zig'
source: 'src/primitives/GasUsed/gas_used.zig'
---

> Auto-generated from Zig tests in: src/primitives/GasUsed/gas_used.zig

### GasUsed: from and toNumber

```zig
test "GasUsed: from and toNumber" {
    const used = GasUsed.from(51234);
    try testing.expectEqual(@as(u64, 51234), used.toNumber());

    const used2 = GasUsed.from(0);
    try testing.expectEqual(@as(u64, 0), used2.toNumber());
}
```

### GasUsed: constants

```zig
test "GasUsed: constants" {
    try testing.expectEqual(@as(u64, 21000), GasUsed.SIMPLE_TRANSFER.toNumber());
}
```

### GasUsed: add

```zig
test "GasUsed: add" {
    const a = GasUsed.from(100000);
    const b = GasUsed.from(50000);
    const result = a.add(b);
    try testing.expectEqual(@as(u64, 150000), result.toNumber());
}
```

### GasUsed: sub

```zig
test "GasUsed: sub" {
    const a = GasUsed.from(100000);
    const b = GasUsed.from(30000);
    const result = a.sub(b);
    try testing.expectEqual(@as(u64, 70000), result.toNumber());

    // Saturating subtraction
    const c = GasUsed.from(10000);
    const d = GasUsed.from(50000);
    const result2 = c.sub(d);
    try testing.expectEqual(@as(u64, 0), result2.toNumber());
}
```

### GasUsed: equals

```zig
test "GasUsed: equals" {
    const a = GasUsed.from(100000);
    const b = GasUsed.from(100000);
    const c = GasUsed.from(200000);

    try testing.expect(a.equals(b));
    try testing.expect(!a.equals(c));
}
```

### GasUsed: compare

```zig
test "GasUsed: compare" {
    const a = GasUsed.from(100000);
    const b = GasUsed.from(200000);
    const c = GasUsed.from(100000);

    try testing.expectEqual(@as(i8, -1), a.compare(b));
    try testing.expectEqual(@as(i8, 1), b.compare(a));
    try testing.expectEqual(@as(i8, 0), a.compare(c));
}
```

### GasUsed: calculateCost

```zig
test "GasUsed: calculateCost" {
    const gas_used = GasUsed.from(51234);
    const gas_price: u64 = 20_000_000_000; // 20 gwei

    const cost = gas_used.calculateCost(gas_price);
    try testing.expectEqual(@as(u128, 1024680000000000), cost);
}
```

### GasUsed: calculateCostU128

```zig
test "GasUsed: calculateCostU128" {
    const gas_used = GasUsed.from(100000);
    const gas_price: u128 = 100_000_000_000; // 100 gwei

    const cost = gas_used.calculateCostU128(gas_price);
    try testing.expectEqual(@as(u128, 10_000_000_000_000_000), cost);
}
```

### GasUsed: toHex and fromHex

```zig
test "GasUsed: toHex and fromHex" {
    const used = GasUsed.from(0x5208); // 21000

    const hex = try used.toHex(testing.allocator);
    defer testing.allocator.free(hex);
    try testing.expectEqualStrings("0x5208", hex);

    const parsed = try GasUsed.fromHex("0x5208");
    try testing.expectEqual(@as(u64, 21000), parsed.toNumber());
}
```

### GasUsed: utilizationPercent

```zig
test "GasUsed: utilizationPercent" {
    // 50% utilization
    const used = GasUsed.from(50000);
    try testing.expectEqual(@as(u8, 50), used.utilizationPercent(100000));

    // 100% utilization
    const full = GasUsed.from(100000);
    try testing.expectEqual(@as(u8, 100), full.utilizationPercent(100000));

    // Edge case: zero limit
    try testing.expectEqual(@as(u8, 0), used.utilizationPercent(0));

    // Typical mainnet block
    const block_used = GasUsed.from(15_000_000);
    try testing.expectEqual(@as(u8, 50), block_used.utilizationPercent(30_000_000));
}
```

### GasUsed: typical receipt values

```zig
test "GasUsed: typical receipt values" {
    // Simple ETH transfer
    const transfer = GasUsed.from(21000);
    try testing.expect(transfer.equals(GasUsed.SIMPLE_TRANSFER));

    // ERC20 transfer
    const erc20 = GasUsed.from(46109);
    try testing.expectEqual(@as(u64, 46109), erc20.toNumber());

    // Uniswap swap
    const swap = GasUsed.from(152847);
    try testing.expectEqual(@as(u64, 152847), swap.toNumber());

    // Calculate cost for swap at 30 gwei
    const cost = swap.calculateCost(30_000_000_000);
    try testing.expectEqual(@as(u128, 4585410000000000), cost);
}
```
