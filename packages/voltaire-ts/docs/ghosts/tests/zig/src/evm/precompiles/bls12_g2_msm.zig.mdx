---
title: '[Zig] src/evm/precompiles/bls12_g2_msm.zig'
source: 'src/evm/precompiles/bls12_g2_msm.zig'
---

> Auto-generated from Zig tests in: src/evm/precompiles/bls12_g2_msm.zig

### bls12_g2_msm - empty input

```zig
test "bls12_g2_msm - empty input" {
    const testing = std.testing;
    const allocator = testing.allocator;

    const input = [_]u8{};
    const result = execute(allocator, &input, 1000000);

    try testing.expectError(error.InvalidInput, result);
}
```

### bls12_g2_msm - invalid input length not multiple of 288

```zig
test "bls12_g2_msm - invalid input length not multiple of 288" {
    const testing = std.testing;
    const allocator = testing.allocator;

    const input = [_]u8{0} ** 300;
    const result = execute(allocator, &input, 1000000);

    try testing.expectError(error.InvalidInput, result);
}
```

### bls12_g2_msm - single pair gas cost with discount

```zig
test "bls12_g2_msm - single pair gas cost with discount" {
    const testing = std.testing;
    const allocator = testing.allocator;

    const input = [_]u8{0} ** 288;
    const k = 1;
    const discount = msmDiscount(k);
    const expected_gas = (BASE_GAS * k * discount) / 1000;

    const result = execute(allocator, &input, 1000000);

    if (result) |res| {
        defer res.deinit(allocator);
        try testing.expectEqual(expected_gas, res.gas_used);
    } else |err| {
        if (err != error.InvalidPoint) {
            return err;
        }
    }
}
```

### bls12_g2_msm - two pairs discount tier

```zig
test "bls12_g2_msm - two pairs discount tier" {
    const testing = std.testing;
    const allocator = testing.allocator;

    const input = [_]u8{0} ** (288 * 2);
    const k = 2;
    const discount = msmDiscount(k);
    const expected_gas = (BASE_GAS * k * discount) / 1000;

    try testing.expectEqual(@as(u64, 820), discount);

    const result = execute(allocator, &input, 1000000);

    if (result) |res| {
        defer res.deinit(allocator);
        try testing.expectEqual(expected_gas, res.gas_used);
    } else |err| {
        if (err != error.InvalidPoint) {
            return err;
        }
    }
}
```

### bls12_g2_msm - four pairs discount tier

```zig
test "bls12_g2_msm - four pairs discount tier" {
    const testing = std.testing;
    const allocator = testing.allocator;

    const input = [_]u8{0} ** (288 * 4);
    const k = 4;
    const discount = msmDiscount(k);
    const expected_gas = (BASE_GAS * k * discount) / 1000;

    try testing.expectEqual(@as(u64, 580), discount);

    const result = execute(allocator, &input, 1000000);

    if (result) |res| {
        defer res.deinit(allocator);
        try testing.expectEqual(expected_gas, res.gas_used);
    } else |err| {
        if (err != error.InvalidPoint) {
            return err;
        }
    }
}
```

### bls12_g2_msm - eight pairs discount tier

```zig
test "bls12_g2_msm - eight pairs discount tier" {
    const testing = std.testing;
    const allocator = testing.allocator;

    const input = [_]u8{0} ** (288 * 8);
    const k = 8;
    const discount = msmDiscount(k);
    const expected_gas = (BASE_GAS * k * discount) / 1000;

    try testing.expectEqual(@as(u64, 430), discount);

    const result = execute(allocator, &input, 1000000);

    if (result) |res| {
        defer res.deinit(allocator);
        try testing.expectEqual(expected_gas, res.gas_used);
    } else |err| {
        if (err != error.InvalidPoint) {
            return err;
        }
    }
}
```

### bls12_g2_msm - sixteen pairs discount tier

```zig
test "bls12_g2_msm - sixteen pairs discount tier" {
    const testing = std.testing;
    const allocator = testing.allocator;

    const input = [_]u8{0} ** (288 * 16);
    const k = 16;
    const discount = msmDiscount(k);
    const expected_gas = (BASE_GAS * k * discount) / 1000;

    try testing.expectEqual(@as(u64, 320), discount);

    const result = execute(allocator, &input, 1000000);

    if (result) |res| {
        defer res.deinit(allocator);
        try testing.expectEqual(expected_gas, res.gas_used);
    } else |err| {
        if (err != error.InvalidPoint) {
            return err;
        }
    }
}
```

### bls12_g2_msm - thirty-two pairs discount tier

```zig
test "bls12_g2_msm - thirty-two pairs discount tier" {
    const testing = std.testing;
    const allocator = testing.allocator;

    const input = [_]u8{0} ** (288 * 32);
    const k = 32;
    const discount = msmDiscount(k);
    const expected_gas = (BASE_GAS * k * discount) / 1000;

    try testing.expectEqual(@as(u64, 250), discount);

    const result = execute(allocator, &input, 1000000);

    if (result) |res| {
        defer res.deinit(allocator);
        try testing.expectEqual(expected_gas, res.gas_used);
    } else |err| {
        if (err != error.InvalidPoint) {
            return err;
        }
    }
}
```

### bls12_g2_msm - sixty-four pairs discount tier

```zig
test "bls12_g2_msm - sixty-four pairs discount tier" {
    const testing = std.testing;
    const allocator = testing.allocator;

    const input = [_]u8{0} ** (288 * 64);
    const k = 64;
    const discount = msmDiscount(k);
    const expected_gas = (BASE_GAS * k * discount) / 1000;

    try testing.expectEqual(@as(u64, 200), discount);

    const result = execute(allocator, &input, 1000000);

    if (result) |res| {
        defer res.deinit(allocator);
        try testing.expectEqual(expected_gas, res.gas_used);
    } else |err| {
        if (err != error.InvalidPoint) {
            return err;
        }
    }
}
```

### bls12_g2_msm - one hundred twenty-eight pairs discount tier

```zig
test "bls12_g2_msm - one hundred twenty-eight pairs discount tier" {
    const testing = std.testing;
    const allocator = testing.allocator;

    const input = [_]u8{0} ** (288 * 128);
    const k = 128;
    const discount = msmDiscount(k);
    const expected_gas = (BASE_GAS * k * discount) / 1000;

    try testing.expectEqual(@as(u64, 174), discount);

    const result = execute(allocator, &input, 1000000);

    if (result) |res| {
        defer res.deinit(allocator);
        try testing.expectEqual(expected_gas, res.gas_used);
    } else |err| {
        if (err != error.InvalidPoint) {
            return err;
        }
    }
}
```

### bls12_g2_msm - out of gas

```zig
test "bls12_g2_msm - out of gas" {
    const testing = std.testing;
    const allocator = testing.allocator;

    const input = [_]u8{0} ** 288;
    const k = 1;
    const discount = msmDiscount(k);
    const gas_cost = (BASE_GAS * k * discount) / 1000;

    const result = execute(allocator, &input, gas_cost - 1);

    try testing.expectError(error.OutOfGas, result);
}
```

### bls12_g2_msm - output length

```zig
test "bls12_g2_msm - output length" {
    const testing = std.testing;
    const allocator = testing.allocator;

    const input = [_]u8{0} ** 288;
    const result = execute(allocator, &input, 1000000);

    if (result) |res| {
        defer res.deinit(allocator);
        try testing.expectEqual(@as(usize, 256), res.output.len);
    } else |err| {
        if (err != error.InvalidPoint) {
            return err;
        }
    }
}
```
