---
title: '[TS/JS] docs/primitives/bytecode/extractRuntime.test.ts'
source: 'docs/primitives/bytecode/extractRuntime.test.ts'
---

> Auto-generated from test file: docs/primitives/bytecode/extractRuntime.test.ts

```typescript
import { describe, expect, it } from "vitest";

describe("Bytecode.extractRuntime (docs/primitives/bytecode/extractRuntime.mdx)", () => {
	describe("Basic Extraction", () => {
		it("should extract runtime code from deployment bytecode", async () => {
			const { Bytecode } = await import(
				"../../../src/primitives/Bytecode/index.js"
			);

			// Constructor pattern that copies runtime code:
			// PUSH1 0x03, PUSH1 0x0c, PUSH1 0x00, CODECOPY, PUSH1 0x03, PUSH1 0x00, RETURN
			// Followed by runtime: PUSH1 0x01, STOP
			const deploymentCode = Bytecode(
				new Uint8Array([
					0x60, 0x03, 0x60, 0x0c, 0x60, 0x00, 0x39, 0x60, 0x03, 0x60, 0x00,
					0xf3, 0x60, 0x01, 0x00,
				]),
			);

			const runtime = deploymentCode.extractRuntime();

			expect(runtime).toBeInstanceOf(Uint8Array);
		});

		it("should return Uint8Array", async () => {
			const { Bytecode } = await import(
				"../../../src/primitives/Bytecode/index.js"
			);

			const code = Bytecode("0x600100");
			const runtime = code.extractRuntime();

			expect(runtime).toBeInstanceOf(Uint8Array);
		});
	});

	describe("Simple Bytecode", () => {
		it("should handle bytecode without clear constructor/runtime split", async () => {
			const { Bytecode } = await import(
				"../../../src/primitives/Bytecode/index.js"
			);

			// Simple bytecode without constructor pattern
			const code = Bytecode("0x60016002015050");
			const runtime = code.extractRuntime();

			expect(runtime).toBeInstanceOf(Uint8Array);
		});
	});

	describe("Empty Bytecode", () => {
		it("should handle empty bytecode", async () => {
			const { Bytecode } = await import(
				"../../../src/primitives/Bytecode/index.js"
			);

			const code = Bytecode("0x");
			const runtime = code.extractRuntime();

			expect(runtime).toBeInstanceOf(Uint8Array);
		});
	});
});

```
