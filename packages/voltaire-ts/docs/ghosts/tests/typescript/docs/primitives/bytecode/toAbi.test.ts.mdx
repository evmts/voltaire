---
title: '[TS/JS] docs/primitives/bytecode/toAbi.test.ts'
source: 'docs/primitives/bytecode/toAbi.test.ts'
---

> Auto-generated from test file: docs/primitives/bytecode/toAbi.test.ts

```typescript
import { describe, expect, it } from "vitest";

describe("Bytecode.toAbi (docs/primitives/bytecode/toAbi.mdx)", () => {
	describe("Basic ABI Extraction", () => {
		it("should extract ABI from bytecode", async () => {
			const { Bytecode } = await import(
				"../../../src/primitives/Bytecode/index.js"
			);

			// Simple bytecode with function selector pattern
			const code = Bytecode(
				new Uint8Array([
					0x60,
					0x04,
					0x35, // PUSH1 4, CALLDATALOAD (load selector)
					0x63,
					0x12,
					0x34,
					0x56,
					0x78, // PUSH4 0x12345678 (selector)
					0x14, // EQ
					0x00, // STOP
				]),
			);
			const abi = code.toAbi();

			expect(Array.isArray(abi)).toBe(true);
		});

		it("should return empty array for simple bytecode", async () => {
			const { Bytecode } = await import(
				"../../../src/primitives/Bytecode/index.js"
			);

			// Simple bytecode without function dispatchers
			const code = Bytecode("0x600100");
			const abi = code.toAbi();

			expect(Array.isArray(abi)).toBe(true);
		});
	});

	describe("Function Detection", () => {
		it("should detect function selectors", async () => {
			const { Bytecode } = await import(
				"../../../src/primitives/Bytecode/index.js"
			);

			// Bytecode with PUSH4 selector pattern
			// PUSH4 0x70a08231 (balanceOf selector), EQ, ...
			const code = Bytecode("0x6370a0823114600857");
			const abi = code.toAbi();

			expect(Array.isArray(abi)).toBe(true);
		});
	});

	describe("Return Type", () => {
		it("should return array of ABI items", async () => {
			const { Bytecode } = await import(
				"../../../src/primitives/Bytecode/index.js"
			);

			const code = Bytecode("0x600100");
			const abi = code.toAbi();

			expect(Array.isArray(abi)).toBe(true);

			for (const item of abi) {
				expect(typeof item).toBe("object");
				expect(item.type).toBeDefined();
			}
		});
	});

	describe("Empty Bytecode", () => {
		it("should handle empty bytecode", async () => {
			const { Bytecode } = await import(
				"../../../src/primitives/Bytecode/index.js"
			);

			const code = Bytecode("0x");
			const abi = code.toAbi();

			expect(Array.isArray(abi)).toBe(true);
		});
	});
});

```
