---
title: '[TS/JS] docs/jsonrpc-provider/eip6963.test.ts'
source: 'docs/jsonrpc-provider/eip6963.test.ts'
---

> Auto-generated from test file: docs/jsonrpc-provider/eip6963.test.ts

```typescript
/**
 * Tests for docs/jsonrpc-provider/eip6963.mdx
 *
 * Tests the EIP-6963 Multi Injected Provider Discovery documentation.
 * Note: EIP-6963 only works in browsers, so tests focus on type definitions
 * and documented patterns.
 */
import { describe, expect, it } from "vitest";

describe("EIP-6963 Documentation", () => {
	describe("ProviderInfo Type from Docs", () => {
		it("documents ProviderInfo structure", () => {
			// From docs type definition
			const providerInfo = {
				uuid: "350670db-19fa-4704-a166-e52e178b59d2",
				name: "Example Wallet",
				icon: "data:image/svg+xml;base64,PHN2Zy...",
				rdns: "com.example.wallet",
			};

			expect(providerInfo).toHaveProperty("uuid");
			expect(providerInfo).toHaveProperty("name");
			expect(providerInfo).toHaveProperty("icon");
			expect(providerInfo).toHaveProperty("rdns");
		});

		it("validates UUID v4 format", () => {
			// UUID v4 pattern from docs
			const uuidV4Regex =
				/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;

			const validUuid = "350670db-19fa-4704-a166-e52e178b59d2";
			expect(validUuid).toMatch(uuidV4Regex);
		});

		it("documents rdns format requirements", () => {
			// Valid RDNS examples from docs
			const validRdns = [
				"io.metamask",
				"com.coinbase.wallet",
				"me.rainbow",
				"com.trustwallet.app",
				"io.rabby",
			];

			for (const rdns of validRdns) {
				expect(rdns).toMatch(/^[a-z]+\.[a-z]+(\.[a-z]+)*$/);
			}
		});
	});

	describe("ProviderDetail Type from Docs", () => {
		it("documents ProviderDetail structure", () => {
			// From docs type definition
			const providerDetail = {
				info: {
					uuid: "350670db-19fa-4704-a166-e52e178b59d2",
					name: "Example Wallet",
					icon: "data:image/svg+xml;base64,PHN2Zy...",
					rdns: "com.example.wallet",
				},
				provider: {
					request: async () => {},
				},
			};

			expect(providerDetail).toHaveProperty("info");
			expect(providerDetail).toHaveProperty("provider");
			expect(providerDetail.info).toHaveProperty("rdns");
			expect(providerDetail.provider).toHaveProperty("request");
		});
	});

	describe("Common RDNS Values from Docs", () => {
		it("documents common wallet RDNS values", () => {
			// From docs table
			const commonRdns: Record<string, string> = {
				MetaMask: "io.metamask",
				"Coinbase Wallet": "com.coinbase.wallet",
				Rainbow: "me.rainbow",
				"Trust Wallet": "com.trustwallet.app",
				Rabby: "io.rabby",
			};

			expect(commonRdns.MetaMask).toBe("io.metamask");
			expect(commonRdns["Coinbase Wallet"]).toBe("com.coinbase.wallet");
			expect(commonRdns.Rainbow).toBe("me.rainbow");
		});
	});

	describe("Error Types from Docs", () => {
		it("documents EIP-6963 error types", () => {
			// From docs error table
			const errorTypes = {
				UnsupportedEnvironmentError: "UNSUPPORTED_ENVIRONMENT",
				InvalidUuidError: "INVALID_UUID",
				InvalidRdnsError: "INVALID_RDNS",
				InvalidIconError: "INVALID_ICON",
				InvalidProviderError: "INVALID_PROVIDER",
				MissingFieldError: "MISSING_FIELD",
				InvalidArgumentError: "INVALID_ARGUMENT",
			};

			expect(errorTypes.UnsupportedEnvironmentError).toBe(
				"UNSUPPORTED_ENVIRONMENT",
			);
			expect(errorTypes.InvalidUuidError).toBe("INVALID_UUID");
			expect(errorTypes.InvalidRdnsError).toBe("INVALID_RDNS");
		});
	});

	describe("API Functions from Docs", () => {
		it("documents dapp functions", () => {
			// From docs API Reference table
			const dappFunctions = {
				subscribe: "Subscribe to announcements, returns unsubscribe",
				getProviders: "Get current providers snapshot",
				findProvider: "Find provider by RDNS",
			};

			expect(dappFunctions.subscribe).toContain("unsubscribe");
			expect(dappFunctions.getProviders).toContain("snapshot");
			expect(dappFunctions.findProvider).toContain("RDNS");
		});

		it("documents wallet functions", () => {
			// From docs API Reference table
			const walletFunctions = {
				announce: "Announce provider, returns unsubscribe",
			};

			expect(walletFunctions.announce).toContain("unsubscribe");
		});

		it("documents utility functions", () => {
			// From docs API Reference table
			const utilFunctions = {
				getPlatform: "Detect runtime environment",
				ProviderInfo: "Create validated ProviderInfo",
				ProviderDetail: "Create validated ProviderDetail",
			};

			expect(utilFunctions.getPlatform).toContain("environment");
		});
	});

	describe("Environment Detection from Docs", () => {
		it("documents platform return values", () => {
			// From docs: getPlatform() returns
			const platforms = ["browser", "node", "bun", "worker", "unknown"];

			expect(platforms).toContain("browser");
			expect(platforms).toContain("node");
			expect(platforms).toContain("bun");
		});
	});

	describe("Security from Docs", () => {
		it("documents icon XSS prevention", () => {
			// From docs Warning
			const securityNote =
				"Always render wallet icons via <img src={icon}> elements. Never inject icon content directly into the DOM, as malicious SVG icons could contain scripts.";

			expect(securityNote).toContain("<img src=");
			expect(securityNote).toContain("malicious SVG");
		});
	});

	describe("Usage Patterns from Docs", () => {
		it("documents dapp subscription pattern", () => {
			// Pattern from docs
			const subscriptionPattern = `
        const unsubscribe = EIP6963.subscribe((providers) => {
          console.log(\`Found \${providers.length} wallets\`);
          for (const { info, provider } of providers) {
            console.log(\`- \${info.name} (\${info.rdns})\`);
          }
        });
        // Cleanup when done
        unsubscribe();
      `;

			expect(subscriptionPattern).toContain("subscribe");
			expect(subscriptionPattern).toContain("unsubscribe");
			expect(subscriptionPattern).toContain("providers");
		});

		it("documents find provider pattern", () => {
			// Pattern from docs
			const findProviderPattern = `
        const metamask = EIP6963.findProvider({ rdns: 'io.metamask' });
        if (metamask) {
          const accounts = await metamask.provider.request({
            method: 'eth_requestAccounts'
          });
        }
      `;

			expect(findProviderPattern).toContain("findProvider");
			expect(findProviderPattern).toContain("rdns");
			expect(findProviderPattern).toContain("eth_requestAccounts");
		});

		it("documents wallet announce pattern", () => {
			// Pattern from docs
			const announcePattern = `
        const unsubscribe = EIP6963.announce({
          info: {
            uuid: crypto.randomUUID(),
            name: "My Wallet",
            icon: "data:image/svg+xml;base64,PHN2Zy...",
            rdns: "com.mywallet"
          },
          provider: myEIP1193Provider
        });
      `;

			expect(announcePattern).toContain("announce");
			expect(announcePattern).toContain("uuid");
			expect(announcePattern).toContain("rdns");
		});
	});
});

```
