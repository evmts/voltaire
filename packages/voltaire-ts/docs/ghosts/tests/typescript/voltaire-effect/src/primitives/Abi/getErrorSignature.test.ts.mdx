---
title: '[TS/JS] voltaire-effect/src/primitives/Abi/getErrorSignature.test.ts'
source: 'voltaire-effect/src/primitives/Abi/getErrorSignature.test.ts'
---

> Auto-generated from test file: voltaire-effect/src/primitives/Abi/getErrorSignature.test.ts

```typescript
import { describe, expect, it } from "@effect/vitest";
import * as Effect from "effect/Effect";
import * as S from "effect/Schema";
import { ErrorSchema } from "./AbiSchema.js";
import { getErrorSignature } from "./getErrorSignature.js";

describe("getErrorSignature", () => {
	describe("success cases", () => {
		it.effect("gets InsufficientBalance error signature", () =>
			Effect.gen(function* () {
				const err = S.decodeUnknownSync(ErrorSchema)({
					type: "error",
					name: "InsufficientBalance",
					inputs: [
						{ name: "available", type: "uint256" },
						{ name: "required", type: "uint256" },
					],
				});
				const sig = yield* getErrorSignature(err as any);
				expect(sig).toBe("InsufficientBalance(uint256,uint256)");
			}),
		);

		it.effect("gets Unauthorized error signature", () =>
			Effect.gen(function* () {
				const err = S.decodeUnknownSync(ErrorSchema)({
					type: "error",
					name: "Unauthorized",
					inputs: [{ name: "caller", type: "address" }],
				});
				const sig = yield* getErrorSignature(err as any);
				expect(sig).toBe("Unauthorized(address)");
			}),
		);

		it.effect("gets error with no inputs", () =>
			Effect.gen(function* () {
				const err = S.decodeUnknownSync(ErrorSchema)({
					type: "error",
					name: "InvalidAmount",
					inputs: [],
				});
				const sig = yield* getErrorSignature(err as any);
				expect(sig).toBe("InvalidAmount()");
			}),
		);

		it.effect("gets error with multiple complex types", () =>
			Effect.gen(function* () {
				const err = S.decodeUnknownSync(ErrorSchema)({
					type: "error",
					name: "TransferFailed",
					inputs: [
						{ name: "from", type: "address" },
						{ name: "to", type: "address" },
						{ name: "amount", type: "uint256" },
					],
				});
				const sig = yield* getErrorSignature(err as any);
				expect(sig).toBe("TransferFailed(address,address,uint256)");
			}),
		);
	});

	describe("is infallible", () => {
		it.effect("never fails", () =>
			Effect.gen(function* () {
				const err = S.decodeUnknownSync(ErrorSchema)({
					type: "error",
					name: "Test",
					inputs: [],
				});
				const sig = yield* getErrorSignature(err as any);
				expect(sig).toBe("Test()");
			}),
		);
	});
});

```
