---
title: '[TS/JS] voltaire-effect/src/primitives/Abi/formatWithArgs.test.ts'
source: 'voltaire-effect/src/primitives/Abi/formatWithArgs.test.ts'
---

> Auto-generated from test file: voltaire-effect/src/primitives/Abi/formatWithArgs.test.ts

```typescript
import { describe, expect, it } from "@effect/vitest";
import * as Effect from "effect/Effect";
import * as S from "effect/Schema";
import { EventSchema, FunctionSchema } from "./AbiSchema.js";
import { formatWithArgs } from "./formatWithArgs.js";

describe("formatWithArgs", () => {
	describe("function formatting with args", () => {
		it.effect("formats transfer with args", () =>
			Effect.gen(function* () {
				const fn = S.decodeUnknownSync(FunctionSchema)({
					type: "function",
					name: "transfer",
					stateMutability: "nonpayable",
					inputs: [
						{ name: "to", type: "address" },
						{ name: "amount", type: "uint256" },
					],
					outputs: [{ type: "bool" }],
				});
				const formatted = yield* formatWithArgs(fn as any, [
					"0x742d35Cc6634C0532925a3b844Bc9e7595f251e3",
					1000n,
				]);
				expect(formatted).toContain("transfer");
				expect(formatted).toContain(
					"0x742d35Cc6634C0532925a3b844Bc9e7595f251e3",
				);
				expect(formatted).toContain("1000");
			}),
		);

		it.effect("formats function with no args", () =>
			Effect.gen(function* () {
				const fn = S.decodeUnknownSync(FunctionSchema)({
					type: "function",
					name: "totalSupply",
					stateMutability: "view",
					inputs: [],
					outputs: [{ type: "uint256" }],
				});
				const formatted = yield* formatWithArgs(fn as any, []);
				expect(formatted).toContain("totalSupply");
			}),
		);

		it.effect("formats with bigint args", () =>
			Effect.gen(function* () {
				const fn = S.decodeUnknownSync(FunctionSchema)({
					type: "function",
					name: "transfer",
					stateMutability: "nonpayable",
					inputs: [
						{ name: "to", type: "address" },
						{ name: "amount", type: "uint256" },
					],
					outputs: [{ type: "bool" }],
				});
				const formatted = yield* formatWithArgs(fn as any, [
					"0x1234567890123456789012345678901234567890",
					1000000000000000000n,
				]);
				expect(formatted).toContain("1000000000000000000");
			}),
		);
	});

	describe("event formatting with args", () => {
		it.effect("formats event with args", () =>
			Effect.gen(function* () {
				const evt = S.decodeUnknownSync(EventSchema)({
					type: "event",
					name: "Transfer",
					inputs: [
						{ name: "from", type: "address", indexed: true },
						{ name: "to", type: "address", indexed: true },
						{ name: "value", type: "uint256", indexed: false },
					],
				});
				const formatted = yield* formatWithArgs(evt as any, [
					"0x1111111111111111111111111111111111111111",
					"0x2222222222222222222222222222222222222222",
					500n,
				]);
				expect(formatted).toContain("Transfer");
			}),
		);
	});

	describe("is infallible", () => {
		it.effect("never fails", () =>
			Effect.gen(function* () {
				const fn = S.decodeUnknownSync(FunctionSchema)({
					type: "function",
					name: "test",
					stateMutability: "nonpayable",
					inputs: [],
					outputs: [],
				});
				const formatted = yield* formatWithArgs(fn as any, []);
				expect(formatted).toContain("test");
			}),
		);
	});
});

```
