---
title: '[TS/JS] src/jsonrpc/eth/feeHistory/eth_feeHistory.test.ts'
source: 'src/jsonrpc/eth/feeHistory/eth_feeHistory.test.ts'
---

> Auto-generated from test file: src/jsonrpc/eth/feeHistory/eth_feeHistory.test.ts

```typescript
import { describe, expect, test } from "vitest";
import { FeeHistoryRequest, method } from "./eth_feeHistory.js";

describe("eth_feeHistory", () => {
	describe("Request Creation", () => {
		test("creates request with block count, newest block and reward percentiles", () => {
			const blockCount = "0x5";
			const newestBlock = "latest";
			const rewardPercentiles = [25, 50, 75];
			const req = FeeHistoryRequest(blockCount, newestBlock, rewardPercentiles);
			expect(req).toEqual({
				method: "eth_feeHistory",
				params: [blockCount, newestBlock, rewardPercentiles],
			});
		});

		test("creates request with hex block number", () => {
			const blockCount = "0xa";
			const newestBlock = "0x1234";
			const rewardPercentiles = [50];
			const req = FeeHistoryRequest(blockCount, newestBlock, rewardPercentiles);
			expect(req).toEqual({
				method: "eth_feeHistory",
				params: [blockCount, newestBlock, rewardPercentiles],
			});
		});

		test("creates request with empty reward percentiles", () => {
			const blockCount = "0x5";
			const newestBlock = "latest";
			const rewardPercentiles: number[] = [];
			const req = FeeHistoryRequest(blockCount, newestBlock, rewardPercentiles);
			expect(req).toEqual({
				method: "eth_feeHistory",
				params: [blockCount, newestBlock, rewardPercentiles],
			});
		});

		test("method constant is correct", () => {
			expect(method).toBe("eth_feeHistory");
		});
	});

	describe("Request Structure", () => {
		test("returns RequestArguments type with params", () => {
			const req = FeeHistoryRequest("0x5", "latest", [25, 50, 75]);
			expect(req).toHaveProperty("method");
			expect(req).toHaveProperty("params");
			expect(Array.isArray(req.params)).toBe(true);
			expect(req.params).toHaveLength(3);
		});

		test("method matches constant", () => {
			const req = FeeHistoryRequest("0x5", "latest", [25, 50, 75]);
			expect(req.method).toBe(method);
		});
	});

	describe("Edge Cases", () => {
		test("handles single block count", () => {
			const req = FeeHistoryRequest("0x1", "latest", [50]);
			expect(req.params?.[0]).toBe("0x1");
		});

		test("handles large block count", () => {
			const req = FeeHistoryRequest("0x400", "latest", [50]);
			expect(req.params?.[0]).toBe("0x400");
		});

		test("handles earliest block tag", () => {
			const req = FeeHistoryRequest("0x5", "earliest", [50]);
			expect(req.params?.[1]).toBe("earliest");
		});

		test("handles pending block tag", () => {
			const req = FeeHistoryRequest("0x5", "pending", [50]);
			expect(req.params?.[1]).toBe("pending");
		});

		test("handles multiple reward percentiles", () => {
			const rewardPercentiles = [10, 25, 50, 75, 90];
			const req = FeeHistoryRequest("0x5", "latest", rewardPercentiles);
			expect(req.params?.[2]).toEqual(rewardPercentiles);
		});

		test("handles extreme percentiles", () => {
			const rewardPercentiles = [0, 100];
			const req = FeeHistoryRequest("0x5", "latest", rewardPercentiles);
			expect(req.params?.[2]).toEqual(rewardPercentiles);
		});
	});
});

```
