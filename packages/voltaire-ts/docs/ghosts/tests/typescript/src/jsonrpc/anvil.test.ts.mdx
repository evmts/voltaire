---
title: '[TS/JS] src/jsonrpc/anvil.test.ts'
source: 'src/jsonrpc/anvil.test.ts'
---

> Auto-generated from test file: src/jsonrpc/anvil.test.ts

```typescript
import { describe, expect, it } from "vitest";
import * as Anvil from "./anvil/methods.js";

describe("Anvil RPC Methods", () => {
	describe("Snapshot/Revert", () => {
		it("evm_snapshot", () => {
			const req = Anvil.evm_snapshot();
			expect(req.method).toBe("evm_snapshot");
			expect(req.params).toEqual([]);
		});

		it("evm_revert", () => {
			const req = Anvil.evm_revert("0x1");
			expect(req.method).toBe("evm_revert");
			expect(req.params).toEqual(["0x1"]);
		});
	});

	describe("Time Manipulation", () => {
		it("evm_mine with no params", () => {
			const req = Anvil.evm_mine();
			expect(req.method).toBe("evm_mine");
			expect(req.params).toEqual([]);
		});

		it("evm_mine with blocks", () => {
			const req = Anvil.evm_mine(10);
			expect(req.method).toBe("evm_mine");
			expect(req.params).toEqual([10]);
		});

		it("evm_mine with blocks and interval", () => {
			const req = Anvil.evm_mine(10, 5);
			expect(req.method).toBe("evm_mine");
			expect(req.params).toEqual([10, 5]);
		});

		it("evm_increaseTime", () => {
			const req = Anvil.evm_increaseTime(3600);
			expect(req.method).toBe("evm_increaseTime");
			expect(req.params).toEqual([3600]);
		});

		it("evm_setNextBlockTimestamp", () => {
			const req = Anvil.evm_setNextBlockTimestamp(1700000000);
			expect(req.method).toBe("evm_setNextBlockTimestamp");
			expect(req.params).toEqual([1700000000]);
		});

		it("evm_setBlockGasLimit", () => {
			const req = Anvil.evm_setBlockGasLimit("0x1c9c380");
			expect(req.method).toBe("evm_setBlockGasLimit");
			expect(req.params).toEqual(["0x1c9c380"]);
		});
	});

	describe("Account Impersonation", () => {
		it("anvil_impersonateAccount", () => {
			const req = Anvil.anvil_impersonateAccount(
				"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266",
			);
			expect(req.method).toBe("anvil_impersonateAccount");
			expect(req.params).toEqual([
				"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266",
			]);
		});

		it("anvil_stopImpersonatingAccount", () => {
			const req = Anvil.anvil_stopImpersonatingAccount(
				"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266",
			);
			expect(req.method).toBe("anvil_stopImpersonatingAccount");
			expect(req.params).toEqual([
				"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266",
			]);
		});
	});

	describe("State Manipulation", () => {
		it("anvil_setBalance", () => {
			const req = Anvil.anvil_setBalance(
				"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266",
				"0xde0b6b3a7640000",
			);
			expect(req.method).toBe("anvil_setBalance");
			expect(req.params).toEqual([
				"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266",
				"0xde0b6b3a7640000",
			]);
		});

		it("anvil_setCode", () => {
			const req = Anvil.anvil_setCode(
				"0x5FbDB2315678afecb367f032d93F642f64180aa3",
				"0x6080604052",
			);
			expect(req.method).toBe("anvil_setCode");
			expect(req.params).toEqual([
				"0x5FbDB2315678afecb367f032d93F642f64180aa3",
				"0x6080604052",
			]);
		});

		it("anvil_setNonce", () => {
			const req = Anvil.anvil_setNonce(
				"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266",
				"0x10",
			);
			expect(req.method).toBe("anvil_setNonce");
			expect(req.params).toEqual([
				"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266",
				"0x10",
			]);
		});

		it("anvil_setStorageAt", () => {
			const req = Anvil.anvil_setStorageAt(
				"0x5FbDB2315678afecb367f032d93F642f64180aa3",
				"0x0",
				"0x0000000000000000000000000000000000000000000000000000000000000001",
			);
			expect(req.method).toBe("anvil_setStorageAt");
			expect(req.params).toEqual([
				"0x5FbDB2315678afecb367f032d93F642f64180aa3",
				"0x0",
				"0x0000000000000000000000000000000000000000000000000000000000000001",
			]);
		});
	});

	describe("Mining Control", () => {
		it("evm_setAutomine enables automine", () => {
			const req = Anvil.evm_setAutomine(true);
			expect(req.method).toBe("evm_setAutomine");
			expect(req.params).toEqual([true]);
		});

		it("evm_setAutomine disables automine", () => {
			const req = Anvil.evm_setAutomine(false);
			expect(req.method).toBe("evm_setAutomine");
			expect(req.params).toEqual([false]);
		});

		it("evm_setIntervalMining", () => {
			const req = Anvil.evm_setIntervalMining(5);
			expect(req.method).toBe("evm_setIntervalMining");
			expect(req.params).toEqual([5]);
		});

		it("evm_setIntervalMining disables with 0", () => {
			const req = Anvil.evm_setIntervalMining(0);
			expect(req.method).toBe("evm_setIntervalMining");
			expect(req.params).toEqual([0]);
		});
	});
});

```
