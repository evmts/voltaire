---
title: '[TS/JS] src/primitives/Abi/Item/formatWithArgs.test.ts'
source: 'src/primitives/Abi/Item/formatWithArgs.test.ts'
---

> Auto-generated from test file: src/primitives/Abi/Item/formatWithArgs.test.ts

```typescript
/**
 * Unit tests for formatWithArgs function
 */

import { describe, expect, it } from "vitest";
import { formatWithArgs } from "./formatWithArgs.js";

describe("formatWithArgs", () => {
	describe("items without names or inputs", () => {
		it("falls back to format for fallback items", () => {
			const item = {
				type: "fallback",
				stateMutability: "payable",
			} as const;

			expect(formatWithArgs(item, [])).toBe("fallback");
		});

		it("falls back to format for receive items", () => {
			const item = {
				type: "receive",
				stateMutability: "payable",
			} as const;

			expect(formatWithArgs(item, [])).toBe("receive");
		});
	});

	describe("function formatting with args", () => {
		it("formats function with no args", () => {
			const item = {
				type: "function",
				name: "totalSupply",
				stateMutability: "view",
				inputs: [],
				outputs: [{ type: "uint256", name: "" }],
			} as const;

			expect(formatWithArgs(item, [])).toBe("totalSupply()");
		});

		it("formats function with single arg", () => {
			const item = {
				type: "function",
				name: "balanceOf",
				stateMutability: "view",
				inputs: [{ type: "address", name: "account" }],
				outputs: [{ type: "uint256", name: "" }],
			} as const;

			const result = formatWithArgs(item, [
				"0x742d35Cc6634C0532925a3b844Bc9e7595f251e3",
			]);
			expect(result).toBe(
				"balanceOf(0x742d35Cc6634C0532925a3b844Bc9e7595f251e3)",
			);
		});

		it("formats function with multiple args", () => {
			const item = {
				type: "function",
				name: "transfer",
				stateMutability: "nonpayable",
				inputs: [
					{ type: "address", name: "to" },
					{ type: "uint256", name: "amount" },
				],
				outputs: [{ type: "bool", name: "" }],
			} as const;

			const result = formatWithArgs(item, [
				"0x742d35Cc6634C0532925a3b844Bc9e7595f251e3",
				1000000000000000000n,
			]);
			expect(result).toBe(
				"transfer(0x742d35Cc6634C0532925a3b844Bc9e7595f251e3, 1000000000000000000)",
			);
		});

		it("converts args to strings", () => {
			const item = {
				type: "function",
				name: "setValue",
				stateMutability: "nonpayable",
				inputs: [
					{ type: "uint256", name: "value" },
					{ type: "bool", name: "flag" },
				],
				outputs: [],
			} as const;

			const result = formatWithArgs(item, [42n, true]);
			expect(result).toBe("setValue(42, true)");
		});

		it("handles complex objects in args", () => {
			const item = {
				type: "function",
				name: "setData",
				stateMutability: "nonpayable",
				inputs: [{ type: "tuple", name: "data" }],
				outputs: [],
			} as const;

			const data = { a: 1, b: 2 };
			const result = formatWithArgs(item, [data]);
			expect(result).toContain("setData(");
			expect(result).toContain("[object Object]");
		});

		it("handles null and undefined", () => {
			const item = {
				type: "function",
				name: "test",
				stateMutability: "pure",
				inputs: [
					{ type: "address", name: "addr" },
					{ type: "uint256", name: "value" },
				],
				outputs: [],
			} as const;

			const result = formatWithArgs(item, [null, undefined]);
			expect(result).toBe("test(null, undefined)");
		});

		it("handles array args", () => {
			const item = {
				type: "function",
				name: "batchTransfer",
				stateMutability: "nonpayable",
				inputs: [
					{ type: "address[]", name: "recipients" },
					{ type: "uint256[]", name: "amounts" },
				],
				outputs: [],
			} as const;

			const result = formatWithArgs(item, [
				[
					"0x0000000000000000000000000000000000000001",
					"0x0000000000000000000000000000000000000002",
				],
				[100n, 200n],
			]);
			expect(result).toContain("batchTransfer(");
			expect(result).toContain("100,200");
		});

		it("handles empty string args", () => {
			const item = {
				type: "function",
				name: "setName",
				stateMutability: "nonpayable",
				inputs: [{ type: "string", name: "name" }],
				outputs: [],
			} as const;

			const result = formatWithArgs(item, [""]);
			expect(result).toBe("setName()");
		});

		it("handles number zero", () => {
			const item = {
				type: "function",
				name: "setValue",
				stateMutability: "nonpayable",
				inputs: [{ type: "uint256", name: "value" }],
				outputs: [],
			} as const;

			const result = formatWithArgs(item, [0n]);
			expect(result).toBe("setValue(0)");
		});
	});

	describe("event formatting with args", () => {
		it("formats event with args", () => {
			const item = {
				type: "event",
				name: "Transfer",
				inputs: [
					{ type: "address", name: "from", indexed: true },
					{ type: "address", name: "to", indexed: true },
					{ type: "uint256", name: "value", indexed: false },
				],
			} as const;

			const result = formatWithArgs(item, [
				"0x0000000000000000000000000000000000000000",
				"0x742d35Cc6634C0532925a3b844Bc9e7595f251e3",
				1000n,
			]);
			expect(result).toBe(
				"Transfer(0x0000000000000000000000000000000000000000, 0x742d35Cc6634C0532925a3b844Bc9e7595f251e3, 1000)",
			);
		});

		it("formats event with no args", () => {
			const item = {
				type: "event",
				name: "Empty",
				inputs: [],
			} as const;

			expect(formatWithArgs(item, [])).toBe("Empty()");
		});
	});

	describe("error formatting with args", () => {
		it("formats error with args", () => {
			const item = {
				type: "error",
				name: "InsufficientBalance",
				inputs: [
					{ type: "uint256", name: "available" },
					{ type: "uint256", name: "required" },
				],
			} as const;

			const result = formatWithArgs(item, [100n, 200n]);
			expect(result).toBe("InsufficientBalance(100, 200)");
		});

		it("formats error with no args", () => {
			const item = {
				type: "error",
				name: "Unauthorized",
				inputs: [],
			} as const;

			expect(formatWithArgs(item, [])).toBe("Unauthorized()");
		});
	});

	describe("constructor formatting with args", () => {
		it("formats constructor with args", () => {
			const item = {
				type: "constructor",
				stateMutability: "nonpayable",
				inputs: [
					{ type: "string", name: "name" },
					{ type: "string", name: "symbol" },
				],
			} as const;

			// Constructor has no name, so falls back to format()
			const result = formatWithArgs(item, ["MyToken", "MTK"]);
			expect(result).toBe("constructor");
		});

		it("formats constructor with no args", () => {
			const item = {
				type: "constructor",
				stateMutability: "nonpayable",
				inputs: [],
			} as const;

			// Constructor has no name, so falls back to format()
			expect(formatWithArgs(item, [])).toBe("constructor");
		});
	});

	describe("edge cases", () => {
		it("handles mismatched arg count (more args than params)", () => {
			const item = {
				type: "function",
				name: "test",
				stateMutability: "pure",
				inputs: [{ type: "uint256", name: "x" }],
				outputs: [],
			} as const;

			const result = formatWithArgs(item, [1n, 2n, 3n]);
			expect(result).toBe("test(1, 2, 3)");
		});

		it("handles special characters in string args", () => {
			const item = {
				type: "function",
				name: "setMessage",
				stateMutability: "nonpayable",
				inputs: [{ type: "string", name: "message" }],
				outputs: [],
			} as const;

			const result = formatWithArgs(item, ["Hello, World!"]);
			expect(result).toBe("setMessage(Hello, World!)");
		});

		it("handles hex string args", () => {
			const item = {
				type: "function",
				name: "setBytes",
				stateMutability: "nonpayable",
				inputs: [{ type: "bytes", name: "data" }],
				outputs: [],
			} as const;

			const result = formatWithArgs(item, ["0x123456"]);
			expect(result).toBe("setBytes(0x123456)");
		});
	});
});

```
