---
title: How to Impersonate an Account
description: Send transactions as any address without its private key.
---

## Goal

Impersonate a whale or contract owner to test interactions without needing their private key.

## Using Anvil

```typescript
import { createProvider } from '@tevm/voltaire/provider'

const provider = createProvider('http://localhost:8545')
const whale = '0xd8dA6BF26964aF9D7eEd9e03E53415D37aA96045' // vitalik.eth

// Start impersonation
await provider.request({
  method: 'anvil_impersonateAccount',
  params: [whale]
})

// Send tx as whale (no signature needed)
await provider.request({
  method: 'eth_sendTransaction',
  params: [{
    from: whale,
    to: '0x1234567890123456789012345678901234567890',
    value: '0xde0b6b3a7640000' // 1 ETH
  }]
})

// Stop impersonation
await provider.request({
  method: 'anvil_stopImpersonatingAccount',
  params: [whale]
})
```

## Using Hardhat

```typescript
// Start impersonation
await provider.request({
  method: 'hardhat_impersonateAccount',
  params: [whale]
})

// Fund the impersonated account if needed
await provider.request({
  method: 'hardhat_setBalance',
  params: [whale, '0x56bc75e2d63100000'] // 100 ETH
})

// Send tx as whale
await provider.request({
  method: 'eth_sendTransaction',
  params: [{
    from: whale,
    to: tokenContract,
    data: '0xa9059cbb...' // transfer()
  }]
})

// Stop impersonation
await provider.request({
  method: 'hardhat_stopImpersonatingAccount',
  params: [whale]
})
```

## Common Pattern: Fork + Impersonate

```typescript
// Fork mainnet
await provider.request({
  method: 'hardhat_reset',
  params: [{ forking: { jsonRpcUrl: process.env.MAINNET_RPC } }]
})

// Impersonate USDC whale
const usdcWhale = '0x47ac0fb4f2d84898e4d9e7b4dab3c24507a6d503'
await provider.request({
  method: 'hardhat_impersonateAccount',
  params: [usdcWhale]
})

// Transfer USDC to test account
await provider.request({
  method: 'eth_sendTransaction',
  params: [{
    from: usdcWhale,
    to: '0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48', // USDC
    data: '0xa9059cbb000000000000000000000000YOUR_ADDRESS00000000000000000000000000000000000000000000000000000000000f4240' // transfer 1 USDC
  }]
})
```
