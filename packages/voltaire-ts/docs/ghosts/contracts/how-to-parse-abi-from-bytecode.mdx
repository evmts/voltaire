---
title: How to Parse ABI from Bytecode
description: Extract function selectors and event signatures from deployed bytecode
---

## Goal

Recover ABI information from bytecode when source code or ABI is unavailable.

## Using Bytecode.toAbi

```typescript
import * as Bytecode from '@voltaire/primitives/Bytecode';

const codeHex = await provider.request({
  method: 'eth_getCode',
  params: ['0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48', 'latest']
});

const bytecode = Bytecode.fromHex(codeHex);
const abi = Bytecode.toAbi(bytecode);

// Returns detected functions and events
// [
//   { type: 'function', selector: '0xa9059cbb', stateMutability: 'nonpayable', payable: false },
//   { type: 'function', selector: '0x70a08231', stateMutability: 'view', payable: false },
//   { type: 'event', hash: '0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef' }
// ]
```

## What toAbi Detects

- **Function selectors**: 4-byte selectors from `PUSH4 + EQ` dispatcher patterns
- **Event hashes**: 32-byte hashes from `PUSH32 + LOG` patterns
- **State mutability**: Inferred from `SLOAD`/`SSTORE` usage
- **Payability**: Detected from `CALLVALUE` checks

## Limitations

```typescript
// toAbi returns selectors/hashes only - no names or param types
const abi = Bytecode.toAbi(bytecode);

// For full ABI with names, use signature databases or whatsabi:
import { whatsabi } from '@shazow/whatsabi';

const fullAbi = await whatsabi.autoload(address, { provider });
```

<Warning>
Bytecode analysis can only extract selectors and hashes. Parameter names and types require either:
- Contract source code
- Verified contract on Etherscan
- Signature database lookup (4byte.directory, openchain.xyz)
</Warning>

## Match Selectors to Known Functions

```typescript
import * as Abi from '@voltaire/primitives/Abi';

// If you have a known ABI, find function by selector
const knownAbi = Abi.from([...]);

const selector = new Uint8Array([0xa9, 0x05, 0x9c, 0xbb]); // transfer
const fn = Abi.getFunctionBySelector(knownAbi, selector);
// { type: 'function', name: 'transfer', ... }
```
