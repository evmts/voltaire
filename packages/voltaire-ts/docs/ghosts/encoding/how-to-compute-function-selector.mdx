---
title: Compute Function Selector
description: Calculate 4-byte function selectors from Solidity function signatures.
---

## Using Keccak256

```ts
import { Keccak256 } from '@voltaire/crypto/Keccak256'

const selector = Keccak256.selector('transfer(address,uint256)')
// Uint8Array(4) [0xa9, 0x05, 0x9c, 0xbb]
```

## Using Selector Primitive

```ts
import * as Selector from '@voltaire/primitives/Selector'

const sel = Selector.fromSignature('transfer(address,uint256)')
const hex = Selector.toHex(sel)
// '0xa9059cbb'
```

## Convert to Hex

```ts
import { Keccak256 } from '@voltaire/crypto/Keccak256'
import * as Hex from '@voltaire/primitives/Hex'

const selector = Keccak256.selector('balanceOf(address)')
const selectorHex = Hex.fromBytes(selector)
// '0x70a08231'
```

## Common ERC20 Selectors

```ts
import { Keccak256 } from '@voltaire/crypto/Keccak256'
import * as Hex from '@voltaire/primitives/Hex'

const selectors = {
  transfer: Keccak256.selector('transfer(address,uint256)'),
  approve: Keccak256.selector('approve(address,uint256)'),
  transferFrom: Keccak256.selector('transferFrom(address,address,uint256)'),
  balanceOf: Keccak256.selector('balanceOf(address)'),
}

// As hex strings
Object.entries(selectors).forEach(([name, sel]) => {
  console.log(`${name}: ${Hex.fromBytes(sel)}`)
})
```

## Signature Format

Use canonical Solidity types without spaces:

```ts
import { Keccak256 } from '@voltaire/crypto/Keccak256'

// Correct
Keccak256.selector('transfer(address,uint256)')

// Wrong - no spaces, no param names
// Keccak256.selector('transfer(address to, uint256 amount)')

// Tuples
Keccak256.selector('swap((address,uint256),(address,uint256))')

// Arrays
Keccak256.selector('batchTransfer(address[],uint256[])')
```

## Match Selector in Calldata

```ts
import { Keccak256 } from '@voltaire/crypto/Keccak256'

const calldata = new Uint8Array([0xa9, 0x05, 0x9c, 0xbb, ...])
const transferSelector = Keccak256.selector('transfer(address,uint256)')

const isTransfer = calldata.slice(0, 4).every(
  (b, i) => b === transferSelector[i]
)
```
