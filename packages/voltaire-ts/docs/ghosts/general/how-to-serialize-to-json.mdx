---
title: Serialize Ethereum Data to JSON
description: Convert Ethereum primitives to JSON-safe formats and back.
---

## The Problem

Ethereum data contains types that `JSON.stringify` cannot handle:
- `BigInt` values throw `TypeError`
- `Uint8Array` serializes as object with numeric keys
- Branded types need proper conversion

## Solution

Convert primitives to hex strings before JSON serialization:

```typescript
import { Uint256 } from '@voltaire/primitives/Uint'
import { Address } from '@voltaire/primitives/Address'
import { Hex } from '@voltaire/primitives/Hex'

// Serialize
const txData = {
  to: Address.toHex(Address.from('0x1234567890123456789012345678901234567890')),
  value: Uint256.toHex(Uint256.from(1000000000000000000n)),
  data: Hex.toString(someBytes)
}
const json = JSON.stringify(txData)

// Deserialize
const parsed = JSON.parse(json)
const address = Address.from(parsed.to)
const value = Uint256.from(parsed.value)
const data = Hex.toBytes(parsed.data)
```

## Custom Serializer Pattern

```typescript
import { Uint256 } from '@voltaire/primitives/Uint'

// Replacer for BigInt-like values
function toJson(key: string, value: unknown) {
  if (typeof value === 'bigint') {
    return { __type: 'bigint', value: value.toString() }
  }
  return value
}

// Reviver for deserialization
function fromJson(key: string, value: unknown) {
  if (value && typeof value === 'object' && '__type' in value) {
    if (value.__type === 'bigint') {
      return Uint256.from(value.value as string)
    }
  }
  return value
}

const data = { balance: 1000000000000000000n }
const json = JSON.stringify(data, toJson)
const restored = JSON.parse(json, fromJson)
```

## Transaction Receipt Example

```typescript
import { Uint256 } from '@voltaire/primitives/Uint'
import { Address } from '@voltaire/primitives/Address'

interface JsonReceipt {
  blockNumber: string
  gasUsed: string
  from: string
  to: string | null
}

function serializeReceipt(receipt: {
  blockNumber: Uint256Type
  gasUsed: Uint256Type
  from: AddressType
  to: AddressType | null
}): JsonReceipt {
  return {
    blockNumber: Uint256.toHex(receipt.blockNumber),
    gasUsed: Uint256.toHex(receipt.gasUsed),
    from: Address.toHex(receipt.from),
    to: receipt.to ? Address.toHex(receipt.to) : null
  }
}

function deserializeReceipt(json: JsonReceipt) {
  return {
    blockNumber: Uint256.from(json.blockNumber),
    gasUsed: Uint256.from(json.gasUsed),
    from: Address.from(json.from),
    to: json.to ? Address.from(json.to) : null
  }
}
```
