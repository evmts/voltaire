---
title: How to Build and Sign Offline
description: Build and sign transactions without network access
---

## Create Transaction Object

```typescript
import * as Transaction from 'voltaire/primitives/Transaction';
import * as Address from 'voltaire/primitives/Address';

// Build EIP-1559 transaction
const tx: Transaction.EIP1559 = {
  type: 2,
  chainId: 1n, // Mainnet
  nonce: 0n, // Get from network before going offline
  maxFeePerGas: 30000000000n, // 30 gwei
  maxPriorityFeePerGas: 2000000000n, // 2 gwei
  gasLimit: 21000n,
  to: Address.from('0xRecipientAddress'),
  value: 1000000000000000000n, // 1 ETH
  data: new Uint8Array(),
  accessList: []
};
```

## Sign with Private Key

```typescript
import { PrivateKeySignerImpl } from 'voltaire/crypto/signers/private-key-signer';

// Create signer (keep private key secure!)
const signer = PrivateKeySignerImpl.fromPrivateKey({
  privateKey: '0xYourPrivateKey'
});

// Sign transaction
const signedTx = await signer.signTransaction(tx);
// Returns tx with yParity, r, s fields
```

## Serialize for Broadcasting

```typescript
import * as Hex from 'voltaire/primitives/Hex';

const serialized = Transaction.serialize(signedTx);
const rawTxHex = Hex.fromBytes(serialized);

console.log(rawTxHex); // 0x02f8... ready for eth_sendRawTransaction
```

## Complete Offline Flow

```typescript
// Step 1: Gather network data BEFORE going offline
const nonce = await provider.request({
  method: 'eth_getTransactionCount',
  params: [myAddress, 'pending']
});
const gasPrice = await provider.request({ method: 'eth_gasPrice', params: [] });
const chainId = await provider.request({ method: 'eth_chainId', params: [] });

// Step 2: Go offline, build and sign
const tx: Transaction.EIP1559 = {
  type: 2,
  chainId: BigInt(chainId),
  nonce: BigInt(nonce),
  maxFeePerGas: BigInt(gasPrice) * 2n,
  maxPriorityFeePerGas: 2000000000n,
  gasLimit: 21000n,
  to: Address.from(recipient),
  value: amount,
  data: new Uint8Array(),
  accessList: []
};

const signedTx = await signer.signTransaction(tx);
const rawTxHex = Hex.fromBytes(Transaction.serialize(signedTx));

// Step 3: Go online and broadcast
await provider.request({
  method: 'eth_sendRawTransaction',
  params: [rawTxHex]
});
```

## Verify Before Broadcasting

```typescript
// Verify signature
const isValid = Transaction.verifySignature(signedTx);

// Recover sender address
const sender = Transaction.getSender(signedTx);
console.log('Will send from:', sender);
```

## Key Points

- Fetch `nonce`, `chainId`, and gas prices before going offline
- Private key never leaves your machine
- Serialize produces RLP-encoded bytes ready for broadcast
- Verify signature before broadcasting to catch errors
