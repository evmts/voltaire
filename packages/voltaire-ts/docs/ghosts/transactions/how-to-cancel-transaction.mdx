---
title: How to Cancel a Transaction
description: Cancel a pending transaction by sending a zero-value replacement
---

## Cancel Strategy

Send 0 ETH to yourself with the **same nonce** and **higher gas**:

```typescript
import * as Transaction from 'voltaire/primitives/Transaction';

// The pending transaction you want to cancel
const pendingNonce = 5n;
const myAddress = '0xYourAddress';

// Create cancellation tx (send 0 to self)
const cancelTx: Transaction.EIP1559 = {
  type: 2,
  chainId: 1n,
  nonce: pendingNonce, // SAME nonce as pending tx
  maxFeePerGas: originalMaxFee * 2n, // Higher fees
  maxPriorityFeePerGas: originalPriorityFee * 2n,
  gasLimit: 21000n, // Simple transfer
  to: myAddress, // Send to yourself
  value: 0n, // Zero value
  data: new Uint8Array(),
  accessList: []
};

// Sign and broadcast
const signedCancel = await signer.signTransaction(cancelTx);
const serialized = Transaction.serialize(signedCancel);
await provider.request({
  method: 'eth_sendRawTransaction',
  params: [`0x${Buffer.from(serialized).toString('hex')}`]
});
```

## Using replaceWith Helper

```typescript
// Create cancel tx from pending tx
const cancelTx = {
  ...Transaction.replaceWith(pendingTx, { bumpPercentage: 100 }), // 2x fees
  to: myAddress, // Override to send to self
  value: 0n,
  data: new Uint8Array()
};
```

## Get Pending Transaction Nonce

```typescript
// Get next nonce (includes pending)
const pendingNonce = await provider.request({
  method: 'eth_getTransactionCount',
  params: [myAddress, 'pending']
});

// Get confirmed nonce only
const confirmedNonce = await provider.request({
  method: 'eth_getTransactionCount',
  params: [myAddress, 'latest']
});

// Pending tx nonce = any nonce between confirmed and pending
```

## Key Points

- **Same nonce** - must match pending tx exactly
- **Higher gas** - at least 10% more, often need 2x+ during congestion
- **Send to self** - minimizes value at risk
- **21000 gas limit** - simple transfer uses minimal gas
- **Race condition** - original may still confirm if miner picks it first
