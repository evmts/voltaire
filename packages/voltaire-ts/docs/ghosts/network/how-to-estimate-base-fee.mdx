---
title: How to Estimate Base Fee for Next Block
description: Predict the base fee for upcoming blocks
---

# Estimate Base Fee for Next Block

The base fee adjusts by up to 12.5% per block based on gas utilization.

```typescript
import { createJsonRpcProvider } from '@tevm/voltaire/jsonrpc';
import * as Rpc from '@tevm/voltaire/jsonrpc';

const provider = createJsonRpcProvider('https://eth.llamarpc.com');

// Get latest block
const block = await provider.request(
  Rpc.Eth.GetBlockByNumberRequest('latest', false)
);

const baseFee = BigInt(block.baseFeePerGas);
const gasUsed = BigInt(block.gasUsed);
const gasLimit = BigInt(block.gasLimit);

// Target is 50% utilization
const gasTarget = gasLimit / 2n;

// Calculate next base fee
let nextBaseFee: bigint;
if (gasUsed > gasTarget) {
  // Block was more than 50% full - fee increases
  const delta = (baseFee * (gasUsed - gasTarget)) / gasTarget / 8n;
  nextBaseFee = baseFee + delta;
} else {
  // Block was less than 50% full - fee decreases
  const delta = (baseFee * (gasTarget - gasUsed)) / gasTarget / 8n;
  nextBaseFee = baseFee - delta;
}

console.log('Current base fee:', Number(baseFee) / 1e9, 'gwei');
console.log('Estimated next:', Number(nextBaseFee) / 1e9, 'gwei');
```

## Use Fee History for Better Estimates

```typescript
import { createJsonRpcProvider } from '@tevm/voltaire/jsonrpc';
import * as Rpc from '@tevm/voltaire/jsonrpc';

const provider = createJsonRpcProvider('https://eth.llamarpc.com');

const history = await provider.request(
  Rpc.Eth.FeeHistoryRequest('0xA', 'latest', [])  // Last 10 blocks
);

// Next block's base fee is already included (length = blocks + 1)
const nextBaseFee = BigInt(history.baseFeePerGas[history.baseFeePerGas.length - 1]);

console.log('Next base fee:', Number(nextBaseFee) / 1e9, 'gwei');

// Analyze trend
const fees = history.baseFeePerGas.map(f => BigInt(f));
const avgFee = fees.reduce((a, b) => a + b) / BigInt(fees.length);
console.log('Average over 10 blocks:', Number(avgFee) / 1e9, 'gwei');
```

<Tip>
`eth_feeHistory` returns `baseFeePerGas` with length = blockCount + 1. The last element is the predicted next block base fee.
</Tip>

## Related

- [How to Get Gas Prices](/ghosts/network/how-to-get-gas-prices)
- [Fee Methods](/jsonrpc-provider/eth-methods/fees)
