---
title: How to Subscribe to New Blocks
description: Monitor new blocks using filters or polling
---

# Subscribe to New Blocks

## Using Block Filter

Create a filter and poll for new block hashes:

```typescript
import { createJsonRpcProvider } from '@tevm/voltaire/jsonrpc';
import * as Rpc from '@tevm/voltaire/jsonrpc';

const provider = createJsonRpcProvider('https://eth.llamarpc.com');

// Create block filter
const filterId = await provider.request(Rpc.Eth.NewBlockFilterRequest());

// Poll for new blocks
const pollInterval = setInterval(async () => {
  const blockHashes = await provider.request(
    Rpc.Eth.GetFilterChangesRequest(filterId)
  );

  for (const hash of blockHashes) {
    const block = await provider.request(
      Rpc.Eth.GetBlockByHashRequest(hash, false)
    );
    console.log('New block:', block.number);
  }
}, 12000); // ~12 seconds per block

// Cleanup
const cleanup = async () => {
  clearInterval(pollInterval);
  await provider.request(Rpc.Eth.UninstallFilterRequest(filterId));
};
```

## Simple Polling

Poll `eth_blockNumber` directly:

```typescript
import { createJsonRpcProvider } from '@tevm/voltaire/jsonrpc';
import * as Rpc from '@tevm/voltaire/jsonrpc';

const provider = createJsonRpcProvider('https://eth.llamarpc.com');

let lastBlock = 0n;

setInterval(async () => {
  const blockNumber = await provider.request(Rpc.Eth.BlockNumberRequest());
  const currentBlock = BigInt(blockNumber);

  if (currentBlock > lastBlock) {
    console.log('New block:', currentBlock);
    lastBlock = currentBlock;
  }
}, 5000);
```

<Note>
Filters expire after ~5 minutes of inactivity on most nodes. Poll regularly.
</Note>

## Related

- [Logs & Filters](/jsonrpc-provider/eth-methods/logs-filters) - Filter methods
- [Events](/jsonrpc-provider/events) - EIP-1193 events
