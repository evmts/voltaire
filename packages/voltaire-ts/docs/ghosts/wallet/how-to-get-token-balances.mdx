---
title: Get Token Balances
description: Query ERC-20, ERC-721, and ERC-1155 token balances
---

## ERC-20 Token Balance

```typescript
import type { TypedProvider, VoltaireRpcSchema } from '@voltaire/provider';
import * as ERC20 from '@voltaire/standards/ERC20';
import * as Address from '@voltaire/primitives/Address';

declare const provider: TypedProvider<VoltaireRpcSchema>;

const tokenAddress = '0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48'; // USDC
const walletAddress = '0xd8dA6BF26964aF9D7eEd9e03E53415D37aA96045';

// Encode balanceOf call
const calldata = ERC20.encodeBalanceOf(Address.from(walletAddress));

// Execute eth_call
const result = await provider.request({
  method: 'eth_call',
  params: [
    { to: tokenAddress, data: calldata },
    'latest'
  ]
});

// Decode result
const balance = ERC20.decodeUint256(result);
console.log(`USDC Balance: ${balance}`); // Raw units (6 decimals for USDC)

// Format with decimals
const decimals = 6n; // USDC has 6 decimals
const formatted = Number(balance) / Number(10n ** decimals);
console.log(`USDC Balance: ${formatted}`);
```

## ERC-20 Token Metadata

```typescript
// Get token name
const nameData = await provider.request({
  method: 'eth_call',
  params: [{ to: tokenAddress, data: ERC20.SELECTORS.name }, 'latest']
});
const name = ERC20.decodeString(nameData);

// Get token symbol
const symbolData = await provider.request({
  method: 'eth_call',
  params: [{ to: tokenAddress, data: ERC20.SELECTORS.symbol }, 'latest']
});
const symbol = ERC20.decodeString(symbolData);

// Get decimals
const decimalsData = await provider.request({
  method: 'eth_call',
  params: [{ to: tokenAddress, data: ERC20.SELECTORS.decimals }, 'latest']
});
const decimals = Number(BigInt(decimalsData));

console.log(`${name} (${symbol}): ${decimals} decimals`);
```

## ERC-721 NFT Balance

```typescript
import * as ERC721 from '@voltaire/standards/ERC721';
import * as Address from '@voltaire/primitives/Address';

const nftAddress = '0xBC4CA0EdA7647A8aB7C2061c2E118A18a936f13D'; // BAYC
const wallet = Address.from('0xd8dA6BF26964aF9D7eEd9e03E53415D37aA96045');

// Get NFT count
const calldata = `${ERC721.SELECTORS.balanceOf}${
  Array.from(wallet, b => b.toString(16).padStart(2, '0')).join('').padStart(64, '0')
}`;

const result = await provider.request({
  method: 'eth_call',
  params: [{ to: nftAddress, data: calldata }, 'latest']
});

const nftCount = BigInt(result);
console.log(`Owns ${nftCount} BAYC NFTs`);
```

## ERC-721 Token Ownership

```typescript
import * as ERC721 from '@voltaire/standards/ERC721';

// Check who owns a specific token
const tokenId = 1234n;
const ownerOfData = ERC721.encodeOwnerOf(tokenId);

const ownerResult = await provider.request({
  method: 'eth_call',
  params: [{ to: nftAddress, data: ownerOfData }, 'latest']
});

const owner = `0x${ownerResult.slice(-40)}`;
console.log(`Token #${tokenId} owned by: ${owner}`);

// Get token URI (metadata)
const tokenURIData = ERC721.encodeTokenURI(tokenId);
const uriResult = await provider.request({
  method: 'eth_call',
  params: [{ to: nftAddress, data: tokenURIData }, 'latest']
});
// Decode string from ABI-encoded result
```

## ERC-1155 Multi-Token Balance

```typescript
import * as ERC1155 from '@voltaire/standards/ERC1155';
import * as Address from '@voltaire/primitives/Address';

const multiTokenAddress = '0x...'; // ERC-1155 contract
const wallet = Address.from('0xd8dA6BF26964aF9D7eEd9e03E53415D37aA96045');
const tokenId = 1n; // Token ID to check

// Get balance for specific token ID
const calldata = ERC1155.encodeBalanceOf(wallet, tokenId);

const result = await provider.request({
  method: 'eth_call',
  params: [{ to: multiTokenAddress, data: calldata }, 'latest']
});

const balance = BigInt(result);
console.log(`Token #${tokenId} balance: ${balance}`);
```

## Multiple Token Balances

```typescript
interface TokenInfo {
  address: string;
  decimals: number;
  symbol: string;
}

async function getTokenBalances(
  provider: TypedProvider<VoltaireRpcSchema>,
  wallet: string,
  tokens: TokenInfo[]
): Promise<Map<string, { raw: bigint; formatted: string }>> {
  const balances = new Map();

  const results = await Promise.all(
    tokens.map(token => {
      const calldata = ERC20.encodeBalanceOf(Address.from(wallet));
      return provider.request({
        method: 'eth_call',
        params: [{ to: token.address, data: calldata }, 'latest']
      });
    })
  );

  for (let i = 0; i < tokens.length; i++) {
    const raw = BigInt(results[i]);
    const formatted = (Number(raw) / 10 ** tokens[i].decimals).toFixed(4);
    balances.set(tokens[i].symbol, { raw, formatted });
  }

  return balances;
}

// Usage
const tokens: TokenInfo[] = [
  { address: '0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48', decimals: 6, symbol: 'USDC' },
  { address: '0xdAC17F958D2ee523a2206206994597C13D831ec7', decimals: 6, symbol: 'USDT' },
  { address: '0x6B175474E89094C44Da98b954EescdeCB5BE3830', decimals: 18, symbol: 'DAI' },
];

const balances = await getTokenBalances(provider, wallet, tokens);
for (const [symbol, { formatted }] of balances) {
  console.log(`${symbol}: ${formatted}`);
}
```

## Watch Token Transfers

```typescript
// Subscribe to ERC-20 Transfer events for an address
const filter = await provider.request({
  method: 'eth_newFilter',
  params: [{
    address: tokenAddress,
    topics: [
      ERC20.EVENTS.Transfer,
      null, // from (any)
      `0x000000000000000000000000${walletAddress.slice(2)}` // to (padded)
    ]
  }]
});

// Poll for new transfers
setInterval(async () => {
  const logs = await provider.request({
    method: 'eth_getFilterChanges',
    params: [filter]
  });

  for (const log of logs) {
    const { from, to, value } = ERC20.decodeTransferEvent(log);
    console.log(`Received ${value} tokens from ${from}`);
  }
}, 12000);
```

## Related

- [ERC-20 Standard](/standards/erc20) - Full ERC-20 API
- [ERC-721 Standard](/standards/erc721) - Full ERC-721 API
- [ERC-1155 Standard](/standards/erc1155) - Full ERC-1155 API
- [Check ETH Balance](/ghosts/wallet/how-to-check-eth-balance) - Native ETH balance
