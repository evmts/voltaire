---
title: "Blob Constants"
---

# Blob Constants

EIP-4844 blob constants defining sizes, limits, and gas parameters.

## SIZE

Blob size in bytes.

```typescript
SIZE = 131072
```

### Value

- **Decimal**: 131,072 bytes
- **Binary**: 2^17 bytes
- **Readable**: 128 KB

### Composition

```typescript
SIZE = FIELD_ELEMENTS_PER_BLOB × BYTES_PER_FIELD_ELEMENT
SIZE = 4096 × 32
SIZE = 131072
```

### Usage

```typescript
// Validate blob size
if (blob.length !== Blob.SIZE) {
  throw new Error("Invalid blob size");
}

// Allocate blob
const blob = new Uint8Array(Blob.SIZE);

// Max data per blob (accounting for length prefix)
const maxData = Blob.SIZE - 8; // 131064 bytes
```

### See Also

- [FIELD_ELEMENTS_PER_BLOB](#field_elements_per_blob)
- [BYTES_PER_FIELD_ELEMENT](#bytes_per_field_element)

---

## FIELD_ELEMENTS_PER_BLOB

Number of field elements per blob.

```typescript
FIELD_ELEMENTS_PER_BLOB = 4096
```

### Value

- **Decimal**: 4,096 elements
- **Binary**: 2^12 elements

### Context

Each blob is a polynomial with 4096 coefficients in BLS12-381 scalar field.

### Field

BLS12-381 scalar field:
- Modulus: `52435875175126190479447740508185965837690552500527637822603658699938581184513`
- ~255 bits per element

### Usage

```typescript
// Iterate field elements
for (let i = 0; i < Blob.FIELD_ELEMENTS_PER_BLOB; i++) {
  const start = i * Blob.BYTES_PER_FIELD_ELEMENT;
  const end = start + Blob.BYTES_PER_FIELD_ELEMENT;
  const element = blob.slice(start, end);
  // Process element...
}
```

### See Also

- [BYTES_PER_FIELD_ELEMENT](#bytes_per_field_element)
- [SIZE](#size)

---

## BYTES_PER_FIELD_ELEMENT

Bytes per field element.

```typescript
BYTES_PER_FIELD_ELEMENT = 32
```

### Value

- **Decimal**: 32 bytes
- **Binary**: 2^5 bytes
- **Bits**: 256 bits

### Encoding

Field elements encoded as 32-byte big-endian integers, but values must be < field modulus (~255 bits).

### Usage

```typescript
// Access nth field element
function getFieldElement(blob: BrandedBlob, n: number): Uint8Array {
  const start = n * Blob.BYTES_PER_FIELD_ELEMENT;
  const end = start + Blob.BYTES_PER_FIELD_ELEMENT;
  return blob.slice(start, end);
}

// Set nth field element
function setFieldElement(blob: BrandedBlob, n: number, element: Uint8Array): void {
  const offset = n * Blob.BYTES_PER_FIELD_ELEMENT;
  blob.set(element, offset);
}
```

### See Also

- [FIELD_ELEMENTS_PER_BLOB](#field_elements_per_blob)
- [SIZE](#size)

---

## MAX_PER_TRANSACTION

Maximum blobs per transaction.

```typescript
MAX_PER_TRANSACTION = 6
```

### Limit

- **Per transaction**: 6 blobs
- **Total data**: ~768 KB (6 × 128 KB)
- **Blob gas**: 786,432 (6 × 131,072)

### Rationale

Limit prevents:
- Block size explosion
- Network congestion
- Excessive resource usage

### Usage

```typescript
// Validate blob count
if (blobs.length > Blob.MAX_PER_TRANSACTION) {
  throw new Error(`Too many blobs: ${blobs.length}`);
}

// Calculate maximum data per transaction
const maxDataPerBlob = Blob.SIZE - 8;
const maxTotalData = maxDataPerBlob * Blob.MAX_PER_TRANSACTION;
// maxTotalData = 786384 bytes

// Pre-flight check
const blobCount = Blob.estimateBlobCount(data.length);
if (blobCount > Blob.MAX_PER_TRANSACTION) {
  throw new Error("Data too large for single transaction");
}
```

### See Also

- [TARGET_GAS_PER_BLOCK](#target_gas_per_block)
- [splitData](./utilities.mdx#splitdata)

---

## COMMITMENT_VERSION_KZG

Blob commitment version byte for KZG commitments.

```typescript
COMMITMENT_VERSION_KZG = 0x01
```

### Value

- **Hex**: 0x01
- **Decimal**: 1
- **Binary**: 0b00000001

### Purpose

First byte of versioned hash identifies commitment scheme:
- `0x01`: KZG commitments (current)
- Future: Other schemes

### Usage

```typescript
// Create versioned hash
const hash = Blob.toVersionedHash(commitment);
console.assert(hash[0] === Blob.COMMITMENT_VERSION_KZG);

// Validate version
if (hash[0] !== Blob.COMMITMENT_VERSION_KZG) {
  throw new Error("Invalid commitment version");
}

// Check versioned hash
if (Blob.isValidVersion(hash)) {
  console.log("Valid KZG versioned hash");
}
```

### Versioned Hash Format

```
Byte 0:      COMMITMENT_VERSION_KZG (0x01)
Bytes 1-31:  SHA-256(commitment)[1:32]
```

### See Also

- [toVersionedHash](./conversions.mdx#toversionedhash)
- [isValidVersion](./validation.mdx#isvalidversion)
- [VersionedHash namespace](./versioned-hash.mdx)

---

## GAS_PER_BLOB

Blob gas per blob.

```typescript
GAS_PER_BLOB = 131072
```

### Value

- **Decimal**: 131,072
- **Binary**: 2^17
- **Equal to**: SIZE

### Rationale

Each blob costs exactly its size in gas. Simplifies calculations and pricing.

### Usage

```typescript
// Calculate gas for N blobs
const blobCount = 3;
const totalGas = blobCount * Blob.GAS_PER_BLOB;
// totalGas = 393216

// Or use utility
const gas = Blob.calculateGas(blobCount);

// Single blob cost
console.log(`Single blob: ${Blob.GAS_PER_BLOB} gas`);
```

### Gas Pricing

Blob gas has separate pricing mechanism from execution gas:
- Base fee (execution gas): EIP-1559 pricing
- Blob base fee: EIP-4844 pricing (separate market)

### See Also

- [TARGET_GAS_PER_BLOCK](#target_gas_per_block)
- [calculateGas](./utilities.mdx#calculategas)

---

## TARGET_GAS_PER_BLOCK

Target blob gas per block.

```typescript
TARGET_GAS_PER_BLOCK = 393216
```

### Value

- **Decimal**: 393,216
- **Binary**: 3 × 2^17
- **Blobs**: 3 blobs

### Calculation

```typescript
TARGET_GAS_PER_BLOCK = 3 × GAS_PER_BLOB
TARGET_GAS_PER_BLOCK = 3 × 131072
TARGET_GAS_PER_BLOCK = 393216
```

### Target

Network targets 3 blobs per block on average:
- **Below target**: Blob base fee decreases
- **Above target**: Blob base fee increases

### Gas Market

EIP-4844 introduces separate gas market for blobs:
- Independent pricing from execution gas
- Separate base fee adjustment
- Targets 3 blobs/block, allows up to 6

### Usage

```typescript
// Check if transaction within target
const blobCount = Blob.estimateBlobCount(data.length);
const gas = Blob.calculateGas(blobCount);

if (gas <= Blob.TARGET_GAS_PER_BLOCK) {
  console.log("Within target gas");
} else {
  console.log("Exceeds target (but may be valid)");
}

// Max vs target
const maxGas = Blob.calculateGas(Blob.MAX_PER_TRANSACTION);
console.log(`Target: ${Blob.TARGET_GAS_PER_BLOCK}`); // 393216
console.log(`Max: ${maxGas}`);                       // 786432
```

### Block Limits

```
Target per block:  3 blobs (393,216 gas)
Max per block:     6 blobs (786,432 gas) [if single tx]
Max per tx:        6 blobs (786,432 gas)
```

### See Also

- [GAS_PER_BLOB](#gas_per_blob)
- [MAX_PER_TRANSACTION](#max_per_transaction)
- [EIP-4844 Specification](https://eips.ethereum.org/EIPS/eip-4844)

---

## Summary Table

| Constant | Value | Unit | Description |
|----------|-------|------|-------------|
| SIZE | 131,072 | bytes | Blob size |
| FIELD_ELEMENTS_PER_BLOB | 4,096 | elements | Field elements per blob |
| BYTES_PER_FIELD_ELEMENT | 32 | bytes | Bytes per field element |
| MAX_PER_TRANSACTION | 6 | blobs | Max blobs per transaction |
| COMMITMENT_VERSION_KZG | 0x01 | - | KZG version byte |
| GAS_PER_BLOB | 131,072 | gas | Gas per blob |
| TARGET_GAS_PER_BLOCK | 393,216 | gas | Target blob gas per block |

## Calculations

### Blob Structure

```typescript
SIZE = FIELD_ELEMENTS_PER_BLOB × BYTES_PER_FIELD_ELEMENT
131072 = 4096 × 32
```

### Gas

```typescript
GAS_PER_BLOB = SIZE = 131072
TARGET_GAS_PER_BLOCK = 3 × GAS_PER_BLOB = 393216
MAX_GAS_PER_TRANSACTION = 6 × GAS_PER_BLOB = 786432
```

### Data Capacity

```typescript
// Per blob (with encoding)
maxDataPerBlob = SIZE - 8 = 131064 bytes

// Per transaction (max 6 blobs)
maxDataPerTx = maxDataPerBlob × MAX_PER_TRANSACTION
maxDataPerTx = 131064 × 6 = 786384 bytes ≈ 768 KB
```

### Field Elements

```typescript
// Total field elements per blob
FIELD_ELEMENTS_PER_BLOB = 4096

// Total bytes = field elements × bytes per element
SIZE = 4096 × 32 = 131072

// Bits per blob
bits = SIZE × 8 = 1048576 bits = 1 Mb
```

## Reference

All constants from [EIP-4844 Specification](https://eips.ethereum.org/EIPS/eip-4844).
