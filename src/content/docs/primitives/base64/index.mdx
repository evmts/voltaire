---
title: Base64
description: Standard and URL-safe base64 encoding/decoding built on Web APIs
---

import { Tabs, TabItem, Card, CardGrid, Aside } from '@astrojs/starlight/components';

# Base64

Base64 encoding and decoding for binary data with standard and URL-safe variants.

## Overview

Namespace providing standard (RFC 4648) and URL-safe base64 encoding/decoding. Built on Web APIs (`btoa`/`atob`) for maximum performance and compatibility. Zero-overhead design with tree-shakeable function exports.

## Quick Start

<Tabs>
<TabItem label="Basic Usage">
```typescript
import { Base64 } from '@tevm/voltaire'

// Encode bytes to base64
const data = new Uint8Array([72, 101, 108, 108, 111])
const encoded = Base64.encode(data)
// "SGVsbG8="

// Decode base64 to bytes
const decoded = Base64.decode(encoded)
// Uint8Array([72, 101, 108, 108, 111])

// String encoding/decoding
const str = "Hello, world!"
const strEncoded = Base64.encodeString(str)
// "SGVsbG8sIHdvcmxkIQ=="
const strDecoded = Base64.decodeToString(strEncoded)
// "Hello, world!"
```
</TabItem>
<TabItem label="URL-Safe">
```typescript
import { Base64 } from '@tevm/voltaire'

// URL-safe encoding (no padding, uses - and _ instead of + and /)
const data = new Uint8Array([255, 254, 253])
const encoded = Base64.encodeUrlSafe(data)
// No padding, URL-safe characters

// Decode URL-safe base64
const decoded = Base64.decodeUrlSafe(encoded)

// String encoding/decoding
const urlSafe = Base64.encodeStringUrlSafe("foo@bar.com")
const original = Base64.decodeUrlSafeToString(urlSafe)
```
</TabItem>
<TabItem label="Validation">
```typescript
import { Base64 } from '@tevm/voltaire'

// Validate standard base64
Base64.isValid("SGVsbG8=")     // true
Base64.isValid("SGVsbG8")      // false (invalid padding)
Base64.isValid("SGVs!G8=")     // false (invalid char)

// Validate URL-safe base64
Base64.isValidUrlSafe("SGVsbG8")  // true (no padding required)
Base64.isValidUrlSafe("SGVs-G8_")  // true (URL-safe chars)
Base64.isValidUrlSafe("SGVs+G8/")  // false (standard chars)
```
</TabItem>
<TabItem label="Utilities">
```typescript
import { Base64 } from '@tevm/voltaire'

// Calculate sizes before encoding/decoding
const dataLength = 100
const encodedSize = Base64.calcEncodedSize(dataLength)
// 136 (bytes needed for base64 output)

const encodedLength = 136
const decodedSize = Base64.calcDecodedSize(encodedLength)
// 100 (maximum bytes needed for decoded output)
```
</TabItem>
</Tabs>

## Types

```typescript
/**
 * Base64-encoded string (standard alphabet: A-Z, a-z, 0-9, +, /)
 */
export type Base64String = string

/**
 * URL-safe base64-encoded string (alphabet: A-Z, a-z, 0-9, -, _)
 * No padding characters
 */
export type Base64UrlString = string
```

Source: [types.ts](https://github.com/evmts/primitives/blob/main/src/primitives/Base64/types.ts)

## Namespace API

```typescript
export const Base64 = {
  // Standard base64 encoding
  encode(data: Uint8Array): Base64String
  decode(encoded: string): Uint8Array
  encodeString(str: string): Base64String
  decodeToString(encoded: string): string

  // URL-safe encoding
  encodeUrlSafe(data: Uint8Array): Base64UrlString
  decodeUrlSafe(encoded: string): Uint8Array
  encodeStringUrlSafe(str: string): Base64UrlString
  decodeUrlSafeToString(encoded: string): string

  // Validation
  isValid(str: string): boolean
  isValidUrlSafe(str: string): boolean

  // Utilities
  calcEncodedSize(dataLength: number): number
  calcDecodedSize(encodedLength: number): number
}
```

Source: [Base64.js](https://github.com/evmts/primitives/blob/main/src/primitives/Base64/Base64.js)

## API Documentation

<CardGrid>
  <Card title="Encoding" icon="pencil">
    Standard and URL-safe base64 encoding for bytes and strings.

    [View encoding →](/primitives/base64/encoding)
  </Card>

  <Card title="Decoding" icon="document">
    Standard and URL-safe base64 decoding to bytes and strings.

    [View decoding →](/primitives/base64/decoding)
  </Card>

  <Card title="Validation" icon="warning">
    Validate base64 format for standard and URL-safe variants.

    [View validation →](/primitives/base64/validation)
  </Card>

  <Card title="Utilities" icon="setting">
    Calculate encoded/decoded sizes for buffer allocation.

    [View utilities →](/primitives/base64/utilities)
  </Card>

  <Card title="BrandedBase64" icon="seti:config">
    Tree-shakeable functional API for minimal bundle size.

    [View BrandedBase64 →](/primitives/base64/branded-base64)
  </Card>
</CardGrid>

## Base64 Variants

### Standard Base64 (RFC 4648)

- **Alphabet:** `A-Z`, `a-z`, `0-9`, `+`, `/`
- **Padding:** Uses `=` character
- **Length:** Always multiple of 4 characters
- **Use cases:** Email, JSON, general data encoding

```typescript
const data = new Uint8Array([255, 254, 253])
Base64.encode(data) // "/v79" (with padding if needed)
```

### URL-Safe Base64 (RFC 4648 Section 5)

- **Alphabet:** `A-Z`, `a-z`, `0-9`, `-`, `_`
- **Padding:** None (removed)
- **Length:** Variable length
- **Use cases:** URLs, filenames, tokens, identifiers

```typescript
const data = new Uint8Array([255, 254, 253])
Base64.encodeUrlSafe(data) // "_v79" (no padding, URL-safe chars)
```

<Aside type="tip" title="When to use URL-safe encoding">
Use URL-safe encoding when base64 output will appear in URLs, filenames, or anywhere `+`, `/`, or `=` characters could cause issues. Standard encoding is more common for general data serialization.
</Aside>

## Usage Patterns

### Encoding Binary Data

```typescript
// Encode arbitrary binary data
const bytes = new Uint8Array([0x48, 0x65, 0x6c, 0x6c, 0x6f])
const b64 = Base64.encode(bytes)
console.log(b64) // "SGVsbG8="
```

### Encoding Strings

```typescript
// UTF-8 string encoding
const message = "Hello, 世界!"
const encoded = Base64.encodeString(message)
const decoded = Base64.decodeToString(encoded)
console.log(decoded === message) // true
```

### Safe Decoding

```typescript
function safeDecodeBase64(input: string): Uint8Array | null {
  if (!Base64.isValid(input)) {
    return null
  }
  try {
    return Base64.decode(input)
  } catch {
    return null
  }
}
```

### Pre-allocating Buffers

```typescript
// Calculate buffer size before encoding
const dataSize = 1024
const bufferSize = Base64.calcEncodedSize(dataSize)
const buffer = new Uint8Array(bufferSize)

// Calculate decoded size
const encodedLength = 1368
const decodedSize = Base64.calcDecodedSize(encodedLength)
```

## Performance Characteristics

- **Web API based:** Uses native `btoa`/`atob` for optimal performance
- **Zero-copy:** Minimal intermediate allocations
- **Tree-shakeable:** Individual functions imported independently
- **TypeScript:** Full type safety with branded string types

## Standards Compliance

Implements [RFC 4648](https://tools.ietf.org/html/rfc4648):
- Section 4: Standard base64 encoding
- Section 5: URL-safe base64 encoding

<Aside type="note">
This implementation uses browser/Node.js Web APIs (`btoa`/`atob`) for encoding/decoding. For Deno, Bun, and modern Node.js, these APIs are available globally.
</Aside>

## Related Types

<CardGrid stagger>
  <Card title="Hex" icon="seti:text">
    Hex string utilities for binary data encoding.

    [View Hex →](/primitives/hex)
  </Card>

  <Card title="Bytes" icon="document">
    Byte array operations and fixed-size types.

    [View Bytes →](/primitives/bytes)
  </Card>

  <Card title="Branded Types" icon="open-book">
    Zero-overhead type branding pattern used throughout primitives.

    [View Branded Types →](/primitives/branded-types)
  </Card>
</CardGrid>
