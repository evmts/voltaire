---
title: Hash Constructors
description: Creating Hash instances from various input types
---

# Constructors

Methods for creating Hash instances from different input formats.

## Universal Constructor

### `new Hash(value)`

Universal constructor dispatches to appropriate method based on input type.

```typescript
const hash1 = new Hash("0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef")
const hash2 = new Hash(new Uint8Array(32))
```

**Parameters:**
- `value: string | Uint8Array` - Input to convert

**Returns:** `Hash`

**Throws:**
- `Error` - Invalid hex format or wrong length
- `Error` - Invalid bytes length

Defined in: [primitives/Hash/Hash.js:14](https://github.com/evmts/primitives/blob/main/src/primitives/Hash/Hash.js#L14)

## Static Constructors

### `Hash.from(value)`

Alias for universal constructor. Preferred for explicit type conversion.

```typescript
const hash = Hash.from("0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef")
const hash2 = Hash.from(new Uint8Array(32))
```

**Parameters:**
- `value: string | Uint8Array` - Hex string or byte array

**Returns:** `Hash`

**Throws:**
- `Error` - Invalid hex format or wrong length

Defined in: [primitives/Hash/BrandedHash/from.js:16](https://github.com/evmts/primitives/blob/main/src/primitives/Hash/BrandedHash/from.js#L16)

### `Hash.fromHex(hex)`

Creates hash from hex string. Requires exactly 64 hex characters (66 total with `0x` prefix).

```typescript
const hash = Hash.fromHex("0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef")

// 0x prefix is optional
const hash2 = Hash.fromHex("1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef")

// Works with any casing
const hash3 = Hash.fromHex("0x1234567890ABCDEF1234567890ABCDEF1234567890ABCDEF1234567890ABCDEF")
```

**Parameters:**
- `hex: string` - Hex string with optional `0x` prefix

**Returns:** `Hash`

**Throws:**
- `Error` - Missing hex characters or wrong length (must be 64 chars)
- `Error` - Invalid hex characters

Defined in: [primitives/Hash/BrandedHash/fromHex.js:16](https://github.com/evmts/primitives/blob/main/src/primitives/Hash/BrandedHash/fromHex.js#L16)

### `Hash.fromBytes(bytes)`

Creates hash from raw 32-byte array.

```typescript
const bytes = new Uint8Array(32)
const hash = Hash.fromBytes(bytes)

// Works with any 32-byte Uint8Array
const randomBytes = crypto.getRandomValues(new Uint8Array(32))
const hash2 = Hash.fromBytes(randomBytes)
```

**Parameters:**
- `bytes: Uint8Array` - Raw byte array (must be 32 bytes)

**Returns:** `Hash`

**Throws:**
- `Error` - If bytes length â‰  32

Defined in: [primitives/Hash/BrandedHash/fromBytes.js:15](https://github.com/evmts/primitives/blob/main/src/primitives/Hash/BrandedHash/fromBytes.js#L15)

## Hashing Constructors

These constructors compute hashes from input data using Keccak-256.

### `Hash.keccak256(data)`

Computes Keccak-256 hash of byte data.

```typescript
const data = new Uint8Array([1, 2, 3, 4])
const hash = Hash.keccak256(data)

// Hash arbitrary binary data
const file = await fetch('/data.bin').then(r => r.arrayBuffer())
const fileHash = Hash.keccak256(new Uint8Array(file))
```

**Parameters:**
- `data: Uint8Array` - Data to hash

**Returns:** `Hash` - 32-byte Keccak-256 hash

Defined in: [primitives/Hash/BrandedHash/keccak256.js:14](https://github.com/evmts/primitives/blob/main/src/primitives/Hash/BrandedHash/keccak256.js#L14)

**Note:** Uses `@noble/hashes` for Keccak-256. When using tree-shakeable imports, this includes the keccak256 implementation in bundle.

### `Hash.keccak256String(str)`

Computes Keccak-256 hash of UTF-8 encoded string.

```typescript
const hash = Hash.keccak256String("hello")
const hash2 = Hash.keccak256String("Hello, World!")

// Common use: function selectors
const selector = Hash.keccak256String("transfer(address,uint256)")
console.log(selector.slice(0, 4)) // First 4 bytes = function selector
```

**Parameters:**
- `str: string` - String to hash (UTF-8 encoded)

**Returns:** `Hash` - 32-byte Keccak-256 hash

Defined in: [primitives/Hash/BrandedHash/keccak256String.js:14](https://github.com/evmts/primitives/blob/main/src/primitives/Hash/BrandedHash/keccak256String.js#L14)

**Implementation:** Encodes string as UTF-8 bytes then computes Keccak-256.

### `Hash.keccak256Hex(hex)`

Computes Keccak-256 hash of hex-encoded data.

```typescript
const hash = Hash.keccak256Hex("0x1234")
const hash2 = Hash.keccak256Hex("1234") // 0x prefix optional

// Hash hex-encoded data
const abiEncoded = "0x000000000000000000000000742d35cc..."
const hash3 = Hash.keccak256Hex(abiEncoded)
```

**Parameters:**
- `hex: string` - Hex string to hash (with or without `0x` prefix)

**Returns:** `Hash` - 32-byte Keccak-256 hash

**Throws:**
- `Error` - If hex string has odd length

Defined in: [primitives/Hash/BrandedHash/keccak256Hex.js:15](https://github.com/evmts/primitives/blob/main/src/primitives/Hash/BrandedHash/keccak256Hex.js#L15)

**Implementation:** Decodes hex to bytes then computes Keccak-256.

## Utility Constructors

### `Hash.random()`

Generates cryptographically secure random hash.

```typescript
const randomHash = Hash.random()

// Generate multiple random hashes
const hashes = Array.from({ length: 10 }, () => Hash.random())
```

**Returns:** `Hash` - Random 32-byte hash

**Throws:**
- `Error` - If `crypto.getRandomValues` not available

Defined in: [primitives/Hash/BrandedHash/random.js:14](https://github.com/evmts/primitives/blob/main/src/primitives/Hash/BrandedHash/random.js#L14)

**Note:** Uses Web Crypto API's `crypto.getRandomValues()`. Available in browsers and Node.js 15+.

## Usage Examples

### Parsing User Input

```typescript
function parseHash(input: string): Hash {
  if (!Hash.isValidHex(input)) {
    throw new Error("Invalid hash format")
  }
  return Hash.fromHex(input)
}
```

### Computing Event Topics

```typescript
// Event signature: Transfer(address indexed from, address indexed to, uint256 value)
const eventSignature = "Transfer(address,address,uint256)"
const topic0 = Hash.keccak256String(eventSignature)
console.log(topic0.toHex())
// "0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef"
```

### Hashing Transaction Data

```typescript
const txData = new Uint8Array([...]) // Transaction bytes
const txHash = Hash.keccak256(txData)
```

### Creating Test Data

```typescript
// Deterministic test hash
const testHash = Hash.fromHex("0x0000000000000000000000000000000000000000000000000000000000000001")

// Random test hash
const randomTestHash = Hash.random()
```

## Tree-Shakeable Usage

All constructors available as tree-shakeable imports:

```typescript
import {
  from,
  fromHex,
  fromBytes,
  keccak256,
  keccak256String,
  keccak256Hex,
  random
} from '@tevm/voltaire/BrandedHash'

const hash1 = from("0x1234567890abcdef...")
const hash2 = fromHex("0x1234567890abcdef...")
const hash3 = fromBytes(new Uint8Array(32))
const dataHash = keccak256(data)
const stringHash = keccak256String("hello")
const hexHash = keccak256Hex("0x1234")
const randomHash = random()
```

**Tree-shaking notes:**
- `keccak256`, `keccak256String`, `keccak256Hex` include Keccak-256 implementation
- Other constructors are pure conversions (no crypto dependencies)

See [BrandedHash](/primitives/hash/branded-hash) for details on tree-shakeable API.
