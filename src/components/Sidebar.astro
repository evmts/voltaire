---
/**
 * Custom Sidebar component that filters navigation based on current route
 * - /zig/* paths show Zig-only navigation
 * - All other paths show TypeScript navigation
 */
import type { Props } from "@astrojs/starlight/props";
import Default from "@astrojs/starlight/components/Sidebar.astro";

// Filter sidebar items based on current URL
const isZigPath = Astro.url.pathname.startsWith("/zig");

// Filter function to show only relevant navigation items
const filteredSidebar = Astro.props.sidebar.filter((item) => {
	const itemHref = item.type === "link" ? item.href : "";
	const itemLabel = item.label || "";

	if (isZigPath) {
		// Show only Zig items (those starting with /zig or labeled with "Zig")
		return (
			itemHref.startsWith("/zig") || itemLabel.toLowerCase().includes("zig")
		);
	} else {
		// Show only TypeScript items (those NOT starting with /zig and NOT labeled with "Zig")
		return (
			!itemHref.startsWith("/zig") && !itemLabel.toLowerCase().includes("zig")
		);
	}
});

// Pass filtered sidebar to default component
---

<Default {...Astro.props} sidebar={filteredSidebar} />
