import * as ABI from "../../../primitives/ABI/index.js";
import * as Hex from "../../../primitives/Hex/index.js";

// Example: Decode basic types
const basicData = Hex.fromString(
	"0x" +
		"00000000000000000000000000000000000000000000000000000000000003e8" + // uint256
		"000000000000000000000000742d35cc6634c0532925a3b844bc454e4438f44e" + // address
		"0000000000000000000000000000000000000000000000000000000000000001", // bool
);

const basicParams = ABI.decodeParameters(
	[
		{ type: "uint256", name: "amount" },
		{ type: "address", name: "recipient" },
		{ type: "bool", name: "success" },
	],
	basicData,
);

// Example: Decode array types
const arrayData = Hex.fromString(
	"0x" +
		"0000000000000000000000000000000000000000000000000000000000000040" + // offset to amounts
		"00000000000000000000000000000000000000000000000000000000000000a0" + // offset to recipients
		"0000000000000000000000000000000000000000000000000000000000000003" + // amounts length
		"0000000000000000000000000000000000000000000000000000000000000064" + // 100
		"00000000000000000000000000000000000000000000000000000000000000c8" + // 200
		"000000000000000000000000000000000000000000000000000000000000012c" + // 300
		"0000000000000000000000000000000000000000000000000000000000000002" + // recipients length
		"000000000000000000000000742d35cc6634c0532925a3b844bc454e4438f44e" +
		"0000000000000000000000001234567890123456789012345678901234567890",
);

const arrayParams = ABI.decodeParameters(
	[
		{ type: "uint256[]", name: "amounts" },
		{ type: "address[]", name: "recipients" },
	],
	arrayData,
);

// Example: Decode string and bytes
const dynamicData = Hex.fromString(
	"0x" +
		"0000000000000000000000000000000000000000000000000000000000000040" + // offset to string
		"0000000000000000000000000000000000000000000000000000000000000080" + // offset to bytes
		"000000000000000000000000000000000000000000000000000000000000000d" + // string length
		"48656c6c6f2c20576f726c642100000000000000000000000000000000000000" + // "Hello, World!"
		"0000000000000000000000000000000000000000000000000000000000000005" + // bytes length
		"0102030405000000000000000000000000000000000000000000000000000000", // bytes data
);

const dynamicParams = ABI.decodeParameters(
	[
		{ type: "string", name: "message" },
		{ type: "bytes", name: "data" },
	],
	dynamicData,
);

// Example: Decode tuple
const tupleData = Hex.fromString(
	"0x" +
		"0000000000000000000000000000000000000000000000000000000000000020" + // offset to tuple
		"000000000000000000000000742d35cc6634c0532925a3b844bc454e4438f44e" + // maker
		"00000000000000000000000000000000000000000000000000000000000003e8" + // amount
		"00000000000000000000000000000000000000000000000000000000000001f4", // price
);

const tupleParams = ABI.decodeParameters(
	[
		{
			type: "tuple",
			name: "order",
			components: [
				{ type: "address", name: "maker" },
				{ type: "uint256", name: "amount" },
				{ type: "uint256", name: "price" },
			],
		},
	],
	tupleData,
);
