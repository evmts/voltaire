---
title: Crypto Overview
description: Combined crypto layers and individual cryptographic services
---

voltaire-effect provides [Effect](https://effect.website)-based wrappers for all cryptographic operations: hashing, signatures, encryption, key derivation, and zero-knowledge proofs. These wrap the high-performance crypto from [Voltaire](https://voltaire.tevm.sh/crypto).

## Combined Layers

For convenience, use `CryptoLive` (production) or `CryptoTest` (testing) to provide all crypto services at once.

### CryptoLive

Production layer with all cryptographic services:

```typescript
import { Effect } from 'effect'
import { CryptoLive, KeccakService, Secp256k1Service } from 'voltaire-effect/crypto'

const program = Effect.gen(function* () {
  const keccak = yield* KeccakService
  const secp = yield* Secp256k1Service
  
  const hash = yield* keccak.hash(new Uint8Array([1, 2, 3]))
  const { publicKey, privateKey } = yield* secp.generateKeyPair()
  
  return { hash, publicKey }
}).pipe(Effect.provide(CryptoLive))

await Effect.runPromise(program)
```

**Included services:**
- Keccak256, SHA256, Blake2, RIPEMD-160 (hashing)
- Secp256k1, Ed25519, P256, BLS12-381 (signatures)
- ChaCha20-Poly1305 (encryption)
- HDWallet, BIP-39, Keystore (key derivation)
- BN254, KZG (zero-knowledge)
- HMAC, EIP-712 (utilities)

### CryptoTest

Mock layer for unit testing. Returns deterministic values without cryptographic overhead:

```typescript
import { CryptoTest, KeccakService } from 'voltaire-effect/crypto'

const testProgram = Effect.gen(function* () {
  const keccak = yield* KeccakService
  const hash = yield* keccak.hash(new Uint8Array([1, 2, 3]))
  // Returns zero-filled array for predictable testing
}).pipe(Effect.provide(CryptoTest))
```

## Individual Services

Import only what you need for smaller bundles:

```typescript
import { KeccakLive, KeccakService } from 'voltaire-effect/crypto/Keccak256'
import { Secp256k1Live, Secp256k1Service } from 'voltaire-effect/crypto/Secp256k1'

const program = Effect.gen(function* () {
  const keccak = yield* KeccakService
  const hash = yield* keccak.hash(data)
}).pipe(
  Effect.provide(KeccakLive),
  Effect.provide(Secp256k1Live)
)
```

## Service Categories

### Hashing

| Service | Description |
|---------|-------------|
| [Keccak256](/crypto/keccak256) | Ethereum's primary hash (SHA3-256 variant) |
| [SHA256](/crypto/sha256) | Standard SHA-256 |
| [Blake2](/crypto/blake2) | Blake2b and Blake2s |
| [RIPEMD-160](/crypto/ripemd160) | For Bitcoin-style addresses |

### Signatures

| Service | Description |
|---------|-------------|
| [Secp256k1](/crypto/secp256k1) | Ethereum signatures (ECDSA) |
| [Ed25519](/crypto/ed25519) | EdDSA signatures |
| [P256](/crypto/p256) | NIST P-256 / secp256r1 |
| [BLS12-381](/crypto/bls12381) | BLS signatures (beacon chain) |

### Encryption

| Service | Description |
|---------|-------------|
| [AES-GCM](/crypto/aesgcm) | Symmetric encryption |
| [ChaCha20-Poly1305](/crypto/chacha20poly1305) | Modern symmetric encryption |
| [X25519](/crypto/x25519) | Key exchange (ECDH) |

### Key Derivation

| Service | Description |
|---------|-------------|
| [HDWallet](/crypto/hdwallet) | BIP-32/44 hierarchical deterministic keys |
| [BIP-39](/crypto/bip39) | Mnemonic phrase generation |
| [Keystore](/crypto/keystore) | Encrypted key storage (Web3 Secret Storage) |
| [HMAC](/crypto/hmac) | Keyed-hash message authentication |

### Zero Knowledge

| Service | Description |
|---------|-------------|
| [BN254](/crypto/bn254) | BN254 curve for ZK proofs |
| [KZG](/crypto/kzg) | KZG commitments (EIP-4844 blobs) |

### Utilities

| Service | Description |
|---------|-------------|
| [EIP-712](/crypto/eip712) | Typed data hashing and signing |
| [Signers](/crypto/signers) | High-level signing interface |
| [ModExp](/crypto/modexp) | Modular exponentiation (precompile) |

## Layer Composition

Compose individual layers as needed:

```typescript
import { Layer } from 'effect'
import { KeccakLive } from 'voltaire-effect/crypto/Keccak256'
import { Secp256k1Live } from 'voltaire-effect/crypto/Secp256k1'
import { HDWalletLive } from 'voltaire-effect/crypto/HDWallet'

// Custom subset of crypto services
const MyCrypto = Layer.mergeAll(
  KeccakLive,
  Secp256k1Live,
  HDWalletLive
)

program.pipe(Effect.provide(MyCrypto))
```

## Testing Pattern

Use `*Test` layers for unit tests:

```typescript
import { describe, it, expect } from 'vitest'
import { Effect } from 'effect'
import { CryptoTest, KeccakService } from 'voltaire-effect/crypto'

describe('MyHash', () => {
  it('should hash data', async () => {
    const result = await Effect.runPromise(
      Effect.gen(function* () {
        const keccak = yield* KeccakService
        return yield* keccak.hash(new Uint8Array([1, 2, 3]))
      }).pipe(Effect.provide(CryptoTest))
    )
    
    // Test layers return deterministic values
    expect(result).toHaveLength(32)
  })
})
```

## See Also

- [Voltaire Crypto](https://voltaire.tevm.sh/crypto) — Core crypto documentation
- [Testing](/testing) — Testing patterns with mock layers
- [Signer Service](/services/signer) — Transaction signing using crypto
- [HD Wallet Guide](/guides/hd-wallet) — BIP-39 mnemonic integration
