---
title: Layers
description: Schema, Effect, and Service layers
---

| Layer | Purpose | Use When |
|-------|---------|----------|
| **Schema** | Validation, type coercion | Parsing user input, API responses |
| **Effect** | Composable operations | Chaining transformations, error handling |
| **Services** | Stateful resources | Provider calls, wallet signing |

## Schema

[Effect Schema](https://effect.website/docs/schema/introduction/) wrappers. Decodes to actual Voltaire branded types.

```typescript
import { Address, Hex } from 'voltaire-effect'
import * as Schema from 'effect/Schema'

const addr = Schema.decodeSync(Address.Schema)("0x742d35Cc...")
const fromBytes = Schema.decodeSync(Address.FromBytesSchema)(bytes)

// Works directly with Voltaire
Hex.toBytes(Schema.decodeSync(Hex.Schema)("0x1234"))
```

## Effect

[Effect](https://effect.website/docs/getting-started/the-effect-type/)-wrapped operations. Typed errors with `_tag` for [catchTag](https://effect.website/docs/error-management/expected-errors/#catchtag).

```typescript
import { Address, Hex } from 'voltaire-effect'
import { Effect } from 'effect'

const program = Effect.gen(function* () {
  const addr = yield* Address.fromString("0x...")
  const bytes = yield* Hex.toBytes("0x1234")
  return { addr, bytes }
})

// Error handling
Effect.catchTag("InvalidAddress", (e) => ...)
```

## Services

[Effect Services](https://effect.website/docs/requirements-management/services/) for stateful resources.

```typescript
import { Provider } from 'voltaire-effect/services'
import { Effect } from 'effect'

const program = Effect.gen(function* () {
  const provider = yield* Provider.Provider
  return yield* provider.getBlock("latest")
})

program.pipe(
  Effect.provide(Provider.live("https://eth.llamarpc.com"))
)
```

**Available**: Provider (JSON-RPC), Wallet (signing), Eip1193 (browser wallets)
