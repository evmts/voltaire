```typescript
import { Effect, Layer } from 'effect'
import { ProviderService } from 'voltaire-effect/services'
import { CryptoTest } from 'voltaire-effect/crypto'

// Mock provider with controlled responses
const MockProvider = Layer.succeed(ProviderService, {
  getBlockNumber: () => Effect.succeed(12345n),
  getBalance: () => Effect.succeed(1000000000000000000n),
  getBlock: () => Effect.succeed({ number: 12345n, hash: '0x...' }),
  // ... other methods
})

// Combine mock layers
const TestLayer = Layer.mergeAll(
  MockProvider,
  CryptoTest
)

// Run tests with mock layer
await Effect.runPromise(program.pipe(Effect.provide(TestLayer)))
```
